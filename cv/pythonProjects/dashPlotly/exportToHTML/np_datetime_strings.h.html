<html>
<head>
<title>np_datetime_strings.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
np_datetime_strings.h</font>
</center></td></tr></table>
<pre><span class="s0">/* 
 
Copyright (c) 2016, PyData Development Team 
All rights reserved. 
 
Distributed under the terms of the BSD Simplified License. 
 
The full license is in the LICENSE file, distributed with this software. 
 
Written by Mark Wiebe (mwwiebe@gmail.com) 
Copyright (c) 2011 by Enthought, Inc. 
 
Copyright (c) 2005-2011, NumPy Developers 
All rights reserved. 
 
See NUMPY_LICENSE.txt for the license. 
 
This file implements string parsing and creation for NumPy datetime. 
 
*/</span>

<span class="s2">#ifndef </span><span class="s1">PANDAS__LIBS_TSLIBS_SRC_DATETIME_NP_DATETIME_STRINGS_H_</span>
<span class="s2">#define </span><span class="s1">PANDAS__LIBS_TSLIBS_SRC_DATETIME_NP_DATETIME_STRINGS_H_</span>

<span class="s2">#ifndef </span><span class="s1">NPY_NO_DEPRECATED_API</span>
<span class="s2">#define </span><span class="s1">NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION</span>
<span class="s2">#endif  </span><span class="s0">// NPY_NO_DEPRECATED_API</span>

<span class="s0">/* 
 * Parses (almost) standard ISO 8601 date strings. The differences are: 
 * 
 * + The date &quot;20100312&quot; is parsed as the year 20100312, not as 
 *   equivalent to &quot;2010-03-12&quot;. The '-' in the dates are not optional. 
 * + Only seconds may have a decimal point, with up to 18 digits after it 
 *   (maximum attoseconds precision). 
 * + Either a 'T' as in ISO 8601 or a ' ' may be used to separate 
 *   the date and the time. Both are treated equivalently. 
 * + Doesn't (yet) handle the &quot;YYYY-DDD&quot; or &quot;YYYY-Www&quot; formats. 
 * + Doesn't handle leap seconds (seconds value has 60 in these cases). 
 * + Doesn't handle 24:00:00 as synonym for midnight (00:00:00) tomorrow 
 * + Accepts special values &quot;NaT&quot; (not a time), &quot;Today&quot;, (current 
 *   day according to local time) and &quot;Now&quot; (current time in UTC). 
 * 
 * 'str' must be a NULL-terminated string, and 'len' must be its length. 
 * 
 * 'out' gets filled with the parsed date-time. 
 * 'out_local' gets whether returned value contains timezone. 0 for UTC, 1 for local time. 
 * 'out_tzoffset' gets set to timezone offset by minutes 
 *      if the parsed time was in local time, 
 *      to 0 otherwise. The values 'now' and 'today' don't get counted 
 *      as local, and neither do UTC +/-#### timezone offsets, because 
 *      they aren't using the computer's local timezone offset. 
 * 
 * Returns 0 on success, -1 on failure. 
 */</span>
<span class="s2">int</span>
<span class="s1">parse_iso_8601_datetime(</span><span class="s2">const char </span><span class="s1">*str, </span><span class="s2">int </span><span class="s1">len, </span><span class="s2">int </span><span class="s1">want_exc,</span>
                        <span class="s1">npy_datetimestruct *out,</span>
                        <span class="s2">int </span><span class="s1">*out_local,</span>
                        <span class="s2">int </span><span class="s1">*out_tzoffset);</span>

<span class="s0">/* 
 * Provides a string length to use for converting datetime 
 * objects with the given local and unit settings. 
 */</span>
<span class="s2">int</span>
<span class="s1">get_datetime_iso_8601_strlen(</span><span class="s2">int </span><span class="s1">local, NPY_DATETIMEUNIT base);</span>

<span class="s0">/* 
 * Converts an npy_datetimestruct to an (almost) ISO 8601 
 * NULL-terminated string using timezone Z (UTC). 
 * 
 * 'base' restricts the output to that unit. Set 'base' to 
 * -1 to auto-detect a base after which all the values are zero. 
 * 
 *  Returns 0 on success, -1 on failure (for example if the output 
 *  string was too short). 
 */</span>
<span class="s2">int</span>
<span class="s1">make_iso_8601_datetime(npy_datetimestruct *dts, </span><span class="s2">char </span><span class="s1">*outstr, </span><span class="s2">int </span><span class="s1">outlen,</span>
                       <span class="s1">NPY_DATETIMEUNIT base);</span>

<span class="s0">/* 
 * Converts an pandas_timedeltastruct to an ISO 8601 string. 
 * 
 * Mutates outlen to provide size of (non-NULL terminated) string. 
 * 
 * Currently has no error handling 
 */</span>
<span class="s2">int </span><span class="s1">make_iso_8601_timedelta(pandas_timedeltastruct *tds, </span><span class="s2">char </span><span class="s1">*outstr,</span>
                            <span class="s1">size_t *outlen);</span>
<span class="s2">#endif  </span><span class="s0">// PANDAS__LIBS_TSLIBS_SRC_DATETIME_NP_DATETIME_STRINGS_H_</span>
</pre>
</body>
</html>