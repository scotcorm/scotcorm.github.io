<html>
<head>
<title>test_repr_info.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #808080;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
test_repr_info.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">datetime </span><span class="s0">import </span><span class="s1">(</span>
    <span class="s1">datetime</span><span class="s0">,</span>
    <span class="s1">timedelta</span><span class="s0">,</span>
<span class="s1">)</span>
<span class="s0">from </span><span class="s1">io </span><span class="s0">import </span><span class="s1">StringIO</span>
<span class="s0">import </span><span class="s1">warnings</span>

<span class="s0">import </span><span class="s1">numpy </span><span class="s0">as </span><span class="s1">np</span>
<span class="s0">import </span><span class="s1">pytest</span>

<span class="s0">from </span><span class="s1">pandas </span><span class="s0">import </span><span class="s1">(</span>
    <span class="s1">Categorical</span><span class="s0">,</span>
    <span class="s1">DataFrame</span><span class="s0">,</span>
    <span class="s1">MultiIndex</span><span class="s0">,</span>
    <span class="s1">NaT</span><span class="s0">,</span>
    <span class="s1">PeriodIndex</span><span class="s0">,</span>
    <span class="s1">Series</span><span class="s0">,</span>
    <span class="s1">Timestamp</span><span class="s0">,</span>
    <span class="s1">date_range</span><span class="s0">,</span>
    <span class="s1">option_context</span><span class="s0">,</span>
    <span class="s1">period_range</span><span class="s0">,</span>
<span class="s1">)</span>
<span class="s0">import </span><span class="s1">pandas._testing </span><span class="s0">as </span><span class="s1">tm</span>

<span class="s0">import </span><span class="s1">pandas.io.formats.format </span><span class="s0">as </span><span class="s1">fmt</span>


<span class="s0">class </span><span class="s1">TestDataFrameReprInfoEtc:</span>
    <span class="s0">def </span><span class="s1">test_repr_bytes_61_lines(self):</span>
        <span class="s2"># GH#12857</span>
        <span class="s1">lets = list(</span><span class="s3">&quot;ACDEFGHIJKLMNOP&quot;</span><span class="s1">)</span>
        <span class="s1">slen = </span><span class="s4">50</span>
        <span class="s1">nseqs = </span><span class="s4">1000</span>
        <span class="s1">words = [[np.random.choice(lets) </span><span class="s0">for </span><span class="s1">x </span><span class="s0">in </span><span class="s1">range(slen)] </span><span class="s0">for </span><span class="s1">_ </span><span class="s0">in </span><span class="s1">range(nseqs)]</span>
        <span class="s1">df = DataFrame(words).astype(</span><span class="s3">&quot;U1&quot;</span><span class="s1">)</span>
        <span class="s0">assert </span><span class="s1">(df.dtypes == object).all()</span>

        <span class="s2"># smoke tests; at one point this raised with 61 but not 60</span>
        <span class="s1">repr(df)</span>
        <span class="s1">repr(df.iloc[:</span><span class="s4">60</span><span class="s0">, </span><span class="s1">:])</span>
        <span class="s1">repr(df.iloc[:</span><span class="s4">61</span><span class="s0">, </span><span class="s1">:])</span>

    <span class="s0">def </span><span class="s1">test_repr_unicode_level_names(self</span><span class="s0">, </span><span class="s1">frame_or_series):</span>
        <span class="s1">index = MultiIndex.from_tuples([(</span><span class="s4">0</span><span class="s0">, </span><span class="s4">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s4">1</span><span class="s0">, </span><span class="s4">1</span><span class="s1">)]</span><span class="s0">, </span><span class="s1">names=[</span><span class="s3">&quot;</span><span class="s0">\u0394</span><span class="s3">&quot;</span><span class="s0">, </span><span class="s3">&quot;i1&quot;</span><span class="s1">])</span>

        <span class="s1">obj = DataFrame(np.random.randn(</span><span class="s4">2</span><span class="s0">, </span><span class="s4">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">index=index)</span>
        <span class="s1">obj = tm.get_obj(obj</span><span class="s0">, </span><span class="s1">frame_or_series)</span>
        <span class="s1">repr(obj)</span>

    <span class="s0">def </span><span class="s1">test_assign_index_sequences(self):</span>
        <span class="s2"># GH#2200</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;a&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s1">]</span><span class="s0">, </span><span class="s3">&quot;b&quot;</span><span class="s1">: [</span><span class="s4">4</span><span class="s0">, </span><span class="s4">5</span><span class="s0">, </span><span class="s4">6</span><span class="s1">]</span><span class="s0">, </span><span class="s3">&quot;c&quot;</span><span class="s1">: [</span><span class="s4">7</span><span class="s0">, </span><span class="s4">8</span><span class="s0">, </span><span class="s4">9</span><span class="s1">]}).set_index(</span>
            <span class="s1">[</span><span class="s3">&quot;a&quot;</span><span class="s0">, </span><span class="s3">&quot;b&quot;</span><span class="s1">]</span>
        <span class="s1">)</span>
        <span class="s1">index = list(df.index)</span>
        <span class="s1">index[</span><span class="s4">0</span><span class="s1">] = (</span><span class="s3">&quot;faz&quot;</span><span class="s0">, </span><span class="s3">&quot;boo&quot;</span><span class="s1">)</span>
        <span class="s1">df.index = index</span>
        <span class="s1">repr(df)</span>

        <span class="s2"># this travels an improper code path</span>
        <span class="s1">index[</span><span class="s4">0</span><span class="s1">] = [</span><span class="s3">&quot;faz&quot;</span><span class="s0">, </span><span class="s3">&quot;boo&quot;</span><span class="s1">]</span>
        <span class="s1">df.index = index</span>
        <span class="s1">repr(df)</span>

    <span class="s0">def </span><span class="s1">test_repr_with_mi_nat(self</span><span class="s0">, </span><span class="s1">float_string_frame):</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;X&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s1">]}</span><span class="s0">, </span><span class="s1">index=[[NaT</span><span class="s0">, </span><span class="s1">Timestamp(</span><span class="s3">&quot;20130101&quot;</span><span class="s1">)]</span><span class="s0">, </span><span class="s1">[</span><span class="s3">&quot;a&quot;</span><span class="s0">, </span><span class="s3">&quot;b&quot;</span><span class="s1">]])</span>
        <span class="s1">result = repr(df)</span>
        <span class="s1">expected = </span><span class="s3">&quot;              X</span><span class="s0">\n</span><span class="s3">NaT        a  1</span><span class="s0">\n</span><span class="s3">2013-01-01 b  2&quot;</span>
        <span class="s0">assert </span><span class="s1">result == expected</span>

    <span class="s0">def </span><span class="s1">test_repr_with_different_nulls(self):</span>
        <span class="s2"># GH45263</span>
        <span class="s1">df = DataFrame([</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s0">, </span><span class="s4">4</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s0">True, None, </span><span class="s1">np.nan</span><span class="s0">, </span><span class="s1">NaT])</span>
        <span class="s1">result = repr(df)</span>
        <span class="s1">expected = </span><span class="s3">&quot;&quot;&quot;      0 
True  1 
None  2 
NaN   3 
NaT   4&quot;&quot;&quot;</span>
        <span class="s0">assert </span><span class="s1">result == expected</span>

    <span class="s0">def </span><span class="s1">test_repr_with_different_nulls_cols(self):</span>
        <span class="s2"># GH45263</span>
        <span class="s1">d = {np.nan: [</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s1">]</span><span class="s0">, None</span><span class="s1">: [</span><span class="s4">3</span><span class="s0">, </span><span class="s4">4</span><span class="s1">]</span><span class="s0">, </span><span class="s1">NaT: [</span><span class="s4">6</span><span class="s0">, </span><span class="s4">7</span><span class="s1">]</span><span class="s0">, True</span><span class="s1">: [</span><span class="s4">8</span><span class="s0">, </span><span class="s4">9</span><span class="s1">]}</span>
        <span class="s1">df = DataFrame(data=d)</span>
        <span class="s1">result = repr(df)</span>
        <span class="s1">expected = </span><span class="s3">&quot;&quot;&quot;   NaN  None  NaT  True 
0    1     3    6     8 
1    2     4    7     9&quot;&quot;&quot;</span>
        <span class="s0">assert </span><span class="s1">result == expected</span>

    <span class="s0">def </span><span class="s1">test_multiindex_na_repr(self):</span>
        <span class="s2"># only an issue with long columns</span>
        <span class="s1">df3 = DataFrame(</span>
            <span class="s1">{</span>
                <span class="s3">&quot;A&quot; </span><span class="s1">* </span><span class="s4">30</span><span class="s1">: {(</span><span class="s3">&quot;A&quot;</span><span class="s0">, </span><span class="s3">&quot;A0006000&quot;</span><span class="s0">, </span><span class="s3">&quot;nuit&quot;</span><span class="s1">): </span><span class="s3">&quot;A0006000&quot;</span><span class="s1">}</span><span class="s0">,</span>
                <span class="s3">&quot;B&quot; </span><span class="s1">* </span><span class="s4">30</span><span class="s1">: {(</span><span class="s3">&quot;A&quot;</span><span class="s0">, </span><span class="s3">&quot;A0006000&quot;</span><span class="s0">, </span><span class="s3">&quot;nuit&quot;</span><span class="s1">): np.nan}</span><span class="s0">,</span>
                <span class="s3">&quot;C&quot; </span><span class="s1">* </span><span class="s4">30</span><span class="s1">: {(</span><span class="s3">&quot;A&quot;</span><span class="s0">, </span><span class="s3">&quot;A0006000&quot;</span><span class="s0">, </span><span class="s3">&quot;nuit&quot;</span><span class="s1">): np.nan}</span><span class="s0">,</span>
                <span class="s3">&quot;D&quot; </span><span class="s1">* </span><span class="s4">30</span><span class="s1">: {(</span><span class="s3">&quot;A&quot;</span><span class="s0">, </span><span class="s3">&quot;A0006000&quot;</span><span class="s0">, </span><span class="s3">&quot;nuit&quot;</span><span class="s1">): np.nan}</span><span class="s0">,</span>
                <span class="s3">&quot;E&quot; </span><span class="s1">* </span><span class="s4">30</span><span class="s1">: {(</span><span class="s3">&quot;A&quot;</span><span class="s0">, </span><span class="s3">&quot;A0006000&quot;</span><span class="s0">, </span><span class="s3">&quot;nuit&quot;</span><span class="s1">): </span><span class="s3">&quot;A&quot;</span><span class="s1">}</span><span class="s0">,</span>
                <span class="s3">&quot;F&quot; </span><span class="s1">* </span><span class="s4">30</span><span class="s1">: {(</span><span class="s3">&quot;A&quot;</span><span class="s0">, </span><span class="s3">&quot;A0006000&quot;</span><span class="s0">, </span><span class="s3">&quot;nuit&quot;</span><span class="s1">): np.nan}</span><span class="s0">,</span>
            <span class="s1">}</span>
        <span class="s1">)</span>

        <span class="s1">idf = df3.set_index([</span><span class="s3">&quot;A&quot; </span><span class="s1">* </span><span class="s4">30</span><span class="s0">, </span><span class="s3">&quot;C&quot; </span><span class="s1">* </span><span class="s4">30</span><span class="s1">])</span>
        <span class="s1">repr(idf)</span>

    <span class="s0">def </span><span class="s1">test_repr_name_coincide(self):</span>
        <span class="s1">index = MultiIndex.from_tuples(</span>
            <span class="s1">[(</span><span class="s3">&quot;a&quot;</span><span class="s0">, </span><span class="s4">0</span><span class="s0">, </span><span class="s3">&quot;foo&quot;</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">&quot;b&quot;</span><span class="s0">, </span><span class="s4">1</span><span class="s0">, </span><span class="s3">&quot;bar&quot;</span><span class="s1">)]</span><span class="s0">, </span><span class="s1">names=[</span><span class="s3">&quot;a&quot;</span><span class="s0">, </span><span class="s3">&quot;b&quot;</span><span class="s0">, </span><span class="s3">&quot;c&quot;</span><span class="s1">]</span>
        <span class="s1">)</span>

        <span class="s1">df = DataFrame({</span><span class="s3">&quot;value&quot;</span><span class="s1">: [</span><span class="s4">0</span><span class="s0">, </span><span class="s4">1</span><span class="s1">]}</span><span class="s0">, </span><span class="s1">index=index)</span>

        <span class="s1">lines = repr(df).split(</span><span class="s3">&quot;</span><span class="s0">\n</span><span class="s3">&quot;</span><span class="s1">)</span>
        <span class="s0">assert </span><span class="s1">lines[</span><span class="s4">2</span><span class="s1">].startswith(</span><span class="s3">&quot;a 0 foo&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_repr_to_string(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">multiindex_year_month_day_dataframe_random_data</span><span class="s0">,</span>
        <span class="s1">multiindex_dataframe_random_data</span><span class="s0">,</span>
    <span class="s1">):</span>
        <span class="s1">ymd = multiindex_year_month_day_dataframe_random_data</span>
        <span class="s1">frame = multiindex_dataframe_random_data</span>

        <span class="s1">repr(frame)</span>
        <span class="s1">repr(ymd)</span>
        <span class="s1">repr(frame.T)</span>
        <span class="s1">repr(ymd.T)</span>

        <span class="s1">buf = StringIO()</span>
        <span class="s1">frame.to_string(buf=buf)</span>
        <span class="s1">ymd.to_string(buf=buf)</span>
        <span class="s1">frame.T.to_string(buf=buf)</span>
        <span class="s1">ymd.T.to_string(buf=buf)</span>

    <span class="s0">def </span><span class="s1">test_repr_empty(self):</span>
        <span class="s2"># empty</span>
        <span class="s1">repr(DataFrame())</span>

        <span class="s2"># empty with index</span>
        <span class="s1">frame = DataFrame(index=np.arange(</span><span class="s4">1000</span><span class="s1">))</span>
        <span class="s1">repr(frame)</span>

    <span class="s0">def </span><span class="s1">test_repr_mixed(self</span><span class="s0">, </span><span class="s1">float_string_frame):</span>
        <span class="s1">buf = StringIO()</span>

        <span class="s2"># mixed</span>
        <span class="s1">repr(float_string_frame)</span>
        <span class="s1">float_string_frame.info(verbose=</span><span class="s0">False, </span><span class="s1">buf=buf)</span>

    <span class="s1">@pytest.mark.slow</span>
    <span class="s0">def </span><span class="s1">test_repr_mixed_big(self):</span>
        <span class="s2"># big mixed</span>
        <span class="s1">biggie = DataFrame(</span>
            <span class="s1">{</span><span class="s3">&quot;A&quot;</span><span class="s1">: np.random.randn(</span><span class="s4">200</span><span class="s1">)</span><span class="s0">, </span><span class="s3">&quot;B&quot;</span><span class="s1">: tm.makeStringIndex(</span><span class="s4">200</span><span class="s1">)}</span><span class="s0">, </span><span class="s1">index=range(</span><span class="s4">200</span><span class="s1">)</span>
        <span class="s1">)</span>
        <span class="s1">biggie.loc[:</span><span class="s4">20</span><span class="s0">, </span><span class="s3">&quot;A&quot;</span><span class="s1">] = np.nan</span>
        <span class="s1">biggie.loc[:</span><span class="s4">20</span><span class="s0">, </span><span class="s3">&quot;B&quot;</span><span class="s1">] = np.nan</span>

        <span class="s1">repr(biggie)</span>

    <span class="s0">def </span><span class="s1">test_repr(self</span><span class="s0">, </span><span class="s1">float_frame):</span>
        <span class="s1">buf = StringIO()</span>

        <span class="s2"># small one</span>
        <span class="s1">repr(float_frame)</span>
        <span class="s1">float_frame.info(verbose=</span><span class="s0">False, </span><span class="s1">buf=buf)</span>

        <span class="s2"># even smaller</span>
        <span class="s1">float_frame.reindex(columns=[</span><span class="s3">&quot;A&quot;</span><span class="s1">]).info(verbose=</span><span class="s0">False, </span><span class="s1">buf=buf)</span>
        <span class="s1">float_frame.reindex(columns=[</span><span class="s3">&quot;A&quot;</span><span class="s0">, </span><span class="s3">&quot;B&quot;</span><span class="s1">]).info(verbose=</span><span class="s0">False, </span><span class="s1">buf=buf)</span>

        <span class="s2"># exhausting cases in DataFrame.info</span>

        <span class="s2"># columns but no index</span>
        <span class="s1">no_index = DataFrame(columns=[</span><span class="s4">0</span><span class="s0">, </span><span class="s4">1</span><span class="s0">, </span><span class="s4">3</span><span class="s1">])</span>
        <span class="s1">repr(no_index)</span>

        <span class="s2"># no columns or index</span>
        <span class="s1">DataFrame().info(buf=buf)</span>

        <span class="s1">df = DataFrame([</span><span class="s3">&quot;a</span><span class="s0">\n\r\t</span><span class="s3">b&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">columns=[</span><span class="s3">&quot;a</span><span class="s0">\n\r\t</span><span class="s3">d&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">index=[</span><span class="s3">&quot;a</span><span class="s0">\n\r\t</span><span class="s3">f&quot;</span><span class="s1">])</span>
        <span class="s0">assert </span><span class="s3">&quot;</span><span class="s0">\t</span><span class="s3">&quot; </span><span class="s0">not in </span><span class="s1">repr(df)</span>
        <span class="s0">assert </span><span class="s3">&quot;</span><span class="s0">\r</span><span class="s3">&quot; </span><span class="s0">not in </span><span class="s1">repr(df)</span>
        <span class="s0">assert </span><span class="s3">&quot;a</span><span class="s0">\n</span><span class="s3">&quot; </span><span class="s0">not in </span><span class="s1">repr(df)</span>

    <span class="s0">def </span><span class="s1">test_repr_dimensions(self):</span>
        <span class="s1">df = DataFrame([[</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s4">3</span><span class="s0">, </span><span class="s4">4</span><span class="s1">]])</span>
        <span class="s0">with </span><span class="s1">option_context(</span><span class="s3">&quot;display.show_dimensions&quot;</span><span class="s0">, True</span><span class="s1">):</span>
            <span class="s0">assert </span><span class="s3">&quot;2 rows x 2 columns&quot; </span><span class="s0">in </span><span class="s1">repr(df)</span>

        <span class="s0">with </span><span class="s1">option_context(</span><span class="s3">&quot;display.show_dimensions&quot;</span><span class="s0">, False</span><span class="s1">):</span>
            <span class="s0">assert </span><span class="s3">&quot;2 rows x 2 columns&quot; </span><span class="s0">not in </span><span class="s1">repr(df)</span>

        <span class="s0">with </span><span class="s1">option_context(</span><span class="s3">&quot;display.show_dimensions&quot;</span><span class="s0">, </span><span class="s3">&quot;truncate&quot;</span><span class="s1">):</span>
            <span class="s0">assert </span><span class="s3">&quot;2 rows x 2 columns&quot; </span><span class="s0">not in </span><span class="s1">repr(df)</span>

    <span class="s1">@pytest.mark.slow</span>
    <span class="s0">def </span><span class="s1">test_repr_big(self):</span>
        <span class="s2"># big one</span>
        <span class="s1">biggie = DataFrame(np.zeros((</span><span class="s4">200</span><span class="s0">, </span><span class="s4">4</span><span class="s1">))</span><span class="s0">, </span><span class="s1">columns=range(</span><span class="s4">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">index=range(</span><span class="s4">200</span><span class="s1">))</span>
        <span class="s1">repr(biggie)</span>

    <span class="s0">def </span><span class="s1">test_repr_unsortable(self</span><span class="s0">, </span><span class="s1">float_frame):</span>
        <span class="s2"># columns are not sortable</span>

        <span class="s1">warn_filters = warnings.filters</span>
        <span class="s1">warnings.filterwarnings(</span><span class="s3">&quot;ignore&quot;</span><span class="s0">, </span><span class="s1">category=FutureWarning</span><span class="s0">, </span><span class="s1">module=</span><span class="s3">&quot;.*format&quot;</span><span class="s1">)</span>

        <span class="s1">unsortable = DataFrame(</span>
            <span class="s1">{</span>
                <span class="s3">&quot;foo&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s1">] * </span><span class="s4">50</span><span class="s0">,</span>
                <span class="s1">datetime.today(): [</span><span class="s4">1</span><span class="s1">] * </span><span class="s4">50</span><span class="s0">,</span>
                <span class="s3">&quot;bar&quot;</span><span class="s1">: [</span><span class="s3">&quot;bar&quot;</span><span class="s1">] * </span><span class="s4">50</span><span class="s0">,</span>
                <span class="s1">datetime.today() + timedelta(</span><span class="s4">1</span><span class="s1">): [</span><span class="s3">&quot;bar&quot;</span><span class="s1">] * </span><span class="s4">50</span><span class="s0">,</span>
            <span class="s1">}</span><span class="s0">,</span>
            <span class="s1">index=np.arange(</span><span class="s4">50</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">repr(unsortable)</span>

        <span class="s1">fmt.set_option(</span><span class="s3">&quot;display.precision&quot;</span><span class="s0">, </span><span class="s4">3</span><span class="s0">, </span><span class="s3">&quot;display.column_space&quot;</span><span class="s0">, </span><span class="s4">10</span><span class="s1">)</span>
        <span class="s1">repr(float_frame)</span>

        <span class="s1">fmt.set_option(</span><span class="s3">&quot;display.max_rows&quot;</span><span class="s0">, </span><span class="s4">10</span><span class="s0">, </span><span class="s3">&quot;display.max_columns&quot;</span><span class="s0">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">repr(float_frame)</span>

        <span class="s1">fmt.set_option(</span><span class="s3">&quot;display.max_rows&quot;</span><span class="s0">, </span><span class="s4">1000</span><span class="s0">, </span><span class="s3">&quot;display.max_columns&quot;</span><span class="s0">, </span><span class="s4">1000</span><span class="s1">)</span>
        <span class="s1">repr(float_frame)</span>

        <span class="s1">tm.reset_display_options()</span>

        <span class="s1">warnings.filters = warn_filters</span>

    <span class="s0">def </span><span class="s1">test_repr_unicode(self):</span>
        <span class="s1">uval = </span><span class="s3">&quot;</span><span class="s0">\u03c3\u03c3\u03c3\u03c3</span><span class="s3">&quot;</span>

        <span class="s1">df = DataFrame({</span><span class="s3">&quot;A&quot;</span><span class="s1">: [uval</span><span class="s0">, </span><span class="s1">uval]})</span>

        <span class="s1">result = repr(df)</span>
        <span class="s1">ex_top = </span><span class="s3">&quot;      A&quot;</span>
        <span class="s0">assert </span><span class="s1">result.split(</span><span class="s3">&quot;</span><span class="s0">\n</span><span class="s3">&quot;</span><span class="s1">)[</span><span class="s4">0</span><span class="s1">].rstrip() == ex_top</span>

        <span class="s1">df = DataFrame({</span><span class="s3">&quot;A&quot;</span><span class="s1">: [uval</span><span class="s0">, </span><span class="s1">uval]})</span>
        <span class="s1">result = repr(df)</span>
        <span class="s0">assert </span><span class="s1">result.split(</span><span class="s3">&quot;</span><span class="s0">\n</span><span class="s3">&quot;</span><span class="s1">)[</span><span class="s4">0</span><span class="s1">].rstrip() == ex_top</span>

    <span class="s0">def </span><span class="s1">test_unicode_string_with_unicode(self):</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;A&quot;</span><span class="s1">: [</span><span class="s3">&quot;</span><span class="s0">\u05d0</span><span class="s3">&quot;</span><span class="s1">]})</span>
        <span class="s1">str(df)</span>

    <span class="s0">def </span><span class="s1">test_repr_unicode_columns(self):</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;</span><span class="s0">\u05d0</span><span class="s3">&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s1">]</span><span class="s0">, </span><span class="s3">&quot;</span><span class="s0">\u05d1</span><span class="s3">&quot;</span><span class="s1">: [</span><span class="s4">4</span><span class="s0">, </span><span class="s4">5</span><span class="s0">, </span><span class="s4">6</span><span class="s1">]</span><span class="s0">, </span><span class="s3">&quot;c&quot;</span><span class="s1">: [</span><span class="s4">7</span><span class="s0">, </span><span class="s4">8</span><span class="s0">, </span><span class="s4">9</span><span class="s1">]})</span>
        <span class="s1">repr(df.columns)  </span><span class="s2"># should not raise UnicodeDecodeError</span>

    <span class="s0">def </span><span class="s1">test_str_to_bytes_raises(self):</span>
        <span class="s2"># GH 26447</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;A&quot;</span><span class="s1">: [</span><span class="s3">&quot;abc&quot;</span><span class="s1">]})</span>
        <span class="s1">msg = </span><span class="s3">&quot;^'str' object cannot be interpreted as an integer$&quot;</span>
        <span class="s0">with </span><span class="s1">pytest.raises(TypeError</span><span class="s0">, </span><span class="s1">match=msg):</span>
            <span class="s1">bytes(df)</span>

    <span class="s0">def </span><span class="s1">test_very_wide_info_repr(self):</span>
        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">10</span><span class="s0">, </span><span class="s4">20</span><span class="s1">)</span><span class="s0">, </span><span class="s1">columns=tm.rands_array(</span><span class="s4">10</span><span class="s0">, </span><span class="s4">20</span><span class="s1">))</span>
        <span class="s1">repr(df)</span>

    <span class="s0">def </span><span class="s1">test_repr_column_name_unicode_truncation_bug(self):</span>
        <span class="s2"># #1906</span>
        <span class="s1">df = DataFrame(</span>
            <span class="s1">{</span>
                <span class="s3">&quot;Id&quot;</span><span class="s1">: [</span><span class="s4">7117434</span><span class="s1">]</span><span class="s0">,</span>
                <span class="s3">&quot;StringCol&quot;</span><span class="s1">: (</span>
                    <span class="s3">&quot;Is it possible to modify drop plot code&quot;</span>
                    <span class="s3">&quot;so that the output graph is displayed &quot;</span>
                    <span class="s3">&quot;in iphone simulator, Is it possible to &quot;</span>
                    <span class="s3">&quot;modify drop plot code so that the &quot;</span>
                    <span class="s3">&quot;output graph is </span><span class="s0">\xe2\x80\xa8</span><span class="s3">displayed &quot;</span>
                    <span class="s3">&quot;in iphone simulator.Now we are adding &quot;</span>
                    <span class="s3">&quot;the CSV file externally. I want to Call &quot;</span>
                    <span class="s3">&quot;the File through the code..&quot;</span>
                <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">}</span>
        <span class="s1">)</span>

        <span class="s0">with </span><span class="s1">option_context(</span><span class="s3">&quot;display.max_columns&quot;</span><span class="s0">, </span><span class="s4">20</span><span class="s1">):</span>
            <span class="s0">assert </span><span class="s3">&quot;StringCol&quot; </span><span class="s0">in </span><span class="s1">repr(df)</span>

    <span class="s1">@pytest.mark.filterwarnings(</span><span class="s3">&quot;ignore::FutureWarning&quot;</span><span class="s1">)</span>
    <span class="s0">def </span><span class="s1">test_latex_repr(self):</span>
        <span class="s1">result = </span><span class="s3">r&quot;&quot;&quot;\begin{tabular}{llll} 
\toprule 
{} &amp;         0 &amp;  1 &amp;  2 \\ 
\midrule 
0 &amp;  $\alpha$ &amp;  b &amp;  c \\ 
1 &amp;         1 &amp;  2 &amp;  3 \\ 
\bottomrule 
\end{tabular} 
&quot;&quot;&quot;</span>
        <span class="s0">with </span><span class="s1">option_context(</span><span class="s3">&quot;display.latex.escape&quot;</span><span class="s0">, False, </span><span class="s3">&quot;display.latex.repr&quot;</span><span class="s0">, True</span><span class="s1">):</span>
            <span class="s1">df = DataFrame([[</span><span class="s3">r&quot;$\alpha$&quot;</span><span class="s0">, </span><span class="s3">&quot;b&quot;</span><span class="s0">, </span><span class="s3">&quot;c&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s1">]])</span>
            <span class="s0">assert </span><span class="s1">result == df._repr_latex_()</span>

        <span class="s2"># GH 12182</span>
        <span class="s0">assert </span><span class="s1">df._repr_latex_() </span><span class="s0">is None</span>

    <span class="s0">def </span><span class="s1">test_repr_categorical_dates_periods(self):</span>
        <span class="s2"># normal DataFrame</span>
        <span class="s1">dt = date_range(</span><span class="s3">&quot;2011-01-01 09:00&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s3">&quot;H&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s0">, </span><span class="s1">tz=</span><span class="s3">&quot;US/Eastern&quot;</span><span class="s1">)</span>
        <span class="s1">p = period_range(</span><span class="s3">&quot;2011-01&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s3">&quot;M&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;dt&quot;</span><span class="s1">: dt</span><span class="s0">, </span><span class="s3">&quot;p&quot;</span><span class="s1">: p})</span>
        <span class="s1">exp = </span><span class="s3">&quot;&quot;&quot;                         dt        p 
0 2011-01-01 09:00:00-05:00  2011-01 
1 2011-01-01 10:00:00-05:00  2011-02 
2 2011-01-01 11:00:00-05:00  2011-03 
3 2011-01-01 12:00:00-05:00  2011-04 
4 2011-01-01 13:00:00-05:00  2011-05&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(df) == exp</span>

        <span class="s1">df2 = DataFrame({</span><span class="s3">&quot;dt&quot;</span><span class="s1">: Categorical(dt)</span><span class="s0">, </span><span class="s3">&quot;p&quot;</span><span class="s1">: Categorical(p)})</span>
        <span class="s0">assert </span><span class="s1">repr(df2) == exp</span>

    <span class="s1">@pytest.mark.parametrize(</span><span class="s3">&quot;arg&quot;</span><span class="s0">, </span><span class="s1">[np.datetime64</span><span class="s0">, </span><span class="s1">np.timedelta64])</span>
    <span class="s1">@pytest.mark.parametrize(</span>
        <span class="s3">&quot;box, expected&quot;</span><span class="s0">,</span>
        <span class="s1">[[Series</span><span class="s0">, </span><span class="s3">&quot;0    NaT</span><span class="s0">\n</span><span class="s3">dtype: object&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[DataFrame</span><span class="s0">, </span><span class="s3">&quot;     0</span><span class="s0">\n</span><span class="s3">0  NaT&quot;</span><span class="s1">]]</span><span class="s0">,</span>
    <span class="s1">)</span>
    <span class="s0">def </span><span class="s1">test_repr_np_nat_with_object(self</span><span class="s0">, </span><span class="s1">arg</span><span class="s0">, </span><span class="s1">box</span><span class="s0">, </span><span class="s1">expected):</span>
        <span class="s2"># GH 25445</span>
        <span class="s1">result = repr(box([arg(</span><span class="s3">&quot;NaT&quot;</span><span class="s1">)]</span><span class="s0">, </span><span class="s1">dtype=object))</span>
        <span class="s0">assert </span><span class="s1">result == expected</span>

    <span class="s0">def </span><span class="s1">test_frame_datetime64_pre1900_repr(self):</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;year&quot;</span><span class="s1">: date_range(</span><span class="s3">&quot;1/1/1700&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">50</span><span class="s0">, </span><span class="s1">freq=</span><span class="s3">&quot;A-DEC&quot;</span><span class="s1">)})</span>
        <span class="s2"># it works!</span>
        <span class="s1">repr(df)</span>

    <span class="s0">def </span><span class="s1">test_frame_to_string_with_periodindex(self):</span>
        <span class="s1">index = PeriodIndex([</span><span class="s3">&quot;2011-1&quot;</span><span class="s0">, </span><span class="s3">&quot;2011-2&quot;</span><span class="s0">, </span><span class="s3">&quot;2011-3&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">freq=</span><span class="s3">&quot;M&quot;</span><span class="s1">)</span>
        <span class="s1">frame = DataFrame(np.random.randn(</span><span class="s4">3</span><span class="s0">, </span><span class="s4">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">index=index)</span>

        <span class="s2"># it works!</span>
        <span class="s1">frame.to_string()</span>

    <span class="s0">def </span><span class="s1">test_datetime64tz_slice_non_truncate(self):</span>
        <span class="s2"># GH 30263</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;x&quot;</span><span class="s1">: date_range(</span><span class="s3">&quot;2019&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">10</span><span class="s0">, </span><span class="s1">tz=</span><span class="s3">&quot;UTC&quot;</span><span class="s1">)})</span>
        <span class="s1">expected = repr(df)</span>
        <span class="s1">df = df.iloc[:</span><span class="s0">, </span><span class="s1">:</span><span class="s4">5</span><span class="s1">]</span>
        <span class="s1">result = repr(df)</span>
        <span class="s0">assert </span><span class="s1">result == expected</span>
</pre>
</body>
</html>