<html>
<head>
<title>offline.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #629755; font-style: italic;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #808080;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
offline.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot; Plotly Offline 
    A module to use Plotly's graphing library with Python 
    without connecting to a public or private plotly enterprise 
    server. 
&quot;&quot;&quot;</span>
<span class="s2">from </span><span class="s1">__future__ </span><span class="s2">import </span><span class="s1">absolute_import</span>

<span class="s2">import </span><span class="s1">os</span>
<span class="s2">import </span><span class="s1">warnings</span>
<span class="s2">import </span><span class="s1">pkgutil</span>
<span class="s2">import </span><span class="s1">plotly</span>
<span class="s2">import </span><span class="s1">plotly.tools</span>

<span class="s2">from </span><span class="s1">plotly.optional_imports </span><span class="s2">import </span><span class="s1">get_module</span>
<span class="s2">from </span><span class="s1">plotly </span><span class="s2">import </span><span class="s1">tools</span>
<span class="s2">from </span><span class="s1">._plotlyjs_version </span><span class="s2">import </span><span class="s1">__plotlyjs_version__</span>


<span class="s1">__IMAGE_FORMATS = [</span><span class="s3">&quot;jpeg&quot;</span><span class="s2">, </span><span class="s3">&quot;png&quot;</span><span class="s2">, </span><span class="s3">&quot;webp&quot;</span><span class="s2">, </span><span class="s3">&quot;svg&quot;</span><span class="s1">]</span>


<span class="s2">def </span><span class="s1">download_plotlyjs(download_url):</span>
    <span class="s1">warnings.warn(</span>
        <span class="s3">&quot;&quot;&quot; 
        `download_plotlyjs` is deprecated and will be removed in the 
        next release. plotly.js is shipped with this module, it is no 
        longer necessary to download this bundle separately. 
    &quot;&quot;&quot;</span><span class="s2">,</span>
        <span class="s1">DeprecationWarning</span><span class="s2">,</span>
    <span class="s1">)</span>
    <span class="s2">pass</span>


<span class="s2">def </span><span class="s1">get_plotlyjs_version():</span>
    <span class="s0">&quot;&quot;&quot; 
    Returns the version of plotly.js that is bundled with plotly.py. 
 
    Returns 
    ------- 
    str 
        Plotly.js version string 
    &quot;&quot;&quot;</span>
    <span class="s2">return </span><span class="s1">__plotlyjs_version__</span>


<span class="s2">def </span><span class="s1">get_plotlyjs():</span>
    <span class="s0">&quot;&quot;&quot; 
    Return the contents of the minified plotly.js library as a string. 
 
    This may be useful when building standalone HTML reports. 
 
    Returns 
    ------- 
    str 
        Contents of the minified plotly.js library as a string 
 
    Examples 
    -------- 
    Here is an example of creating a standalone HTML report that contains 
    two plotly figures, each in their own div.  The include_plotlyjs argument 
    is set to False when creating the divs so that we don't include multiple 
    copies of the plotly.js library in the output.  Instead, a single copy 
    of plotly.js is included in a script tag in the html head element. 
 
    &gt;&gt;&gt; import plotly.graph_objs as go 
    &gt;&gt;&gt; from plotly.offline import plot, get_plotlyjs 
    &gt;&gt;&gt; fig1 = go.Figure(data=[{'type': 'bar', 'y': [1, 3, 2]}], 
    ...                 layout={'height': 400}) 
    &gt;&gt;&gt; fig2 = go.Figure(data=[{'type': 'scatter', 'y': [1, 3, 2]}], 
    ...                  layout={'height': 400}) 
    &gt;&gt;&gt; div1 = plot(fig1, output_type='div', include_plotlyjs=False) 
    &gt;&gt;&gt; div2 = plot(fig2, output_type='div', include_plotlyjs=False) 
 
    &gt;&gt;&gt; html = ''' 
    ... &lt;html&gt; 
    ...     &lt;head&gt; 
    ...         &lt;script type=&quot;text/javascript&quot;&gt;{plotlyjs}&lt;/script&gt; 
    ...     &lt;/head&gt; 
    ...     &lt;body&gt; 
    ...        {div1} 
    ...        {div2} 
    ...     &lt;/body&gt; 
    ... &lt;/html&gt; 
    ... '''.format(plotlyjs=get_plotlyjs(), div1=div1, div2=div2) 
 
    &gt;&gt;&gt; with open('multi_plot.html', 'w') as f: 
    ...      f.write(html) # doctest: +SKIP 
    &quot;&quot;&quot;</span>
    <span class="s1">path = os.path.join(</span><span class="s3">&quot;package_data&quot;</span><span class="s2">, </span><span class="s3">&quot;plotly.min.js&quot;</span><span class="s1">)</span>
    <span class="s1">plotlyjs = pkgutil.get_data(</span><span class="s3">&quot;plotly&quot;</span><span class="s2">, </span><span class="s1">path).decode(</span><span class="s3">&quot;utf-8&quot;</span><span class="s1">)</span>
    <span class="s2">return </span><span class="s1">plotlyjs</span>


<span class="s2">def </span><span class="s1">_build_resize_script(plotdivid</span><span class="s2">, </span><span class="s1">plotly_root=</span><span class="s3">&quot;Plotly&quot;</span><span class="s1">):</span>
    <span class="s1">resize_script = (</span>
        <span class="s3">'&lt;script type=&quot;text/javascript&quot;&gt;'</span>
        <span class="s3">'window.addEventListener(&quot;resize&quot;, function(){{'</span>
        <span class="s3">'if (document.getElementById(&quot;{id}&quot;)) {{'</span>
        <span class="s3">'{plotly_root}.Plots.resize(document.getElementById(&quot;{id}&quot;));'</span>
        <span class="s3">&quot;}};}})&quot;</span>
        <span class="s3">&quot;&lt;/script&gt;&quot;</span>
    <span class="s1">).format(plotly_root=plotly_root</span><span class="s2">, </span><span class="s1">id=plotdivid)</span>
    <span class="s2">return </span><span class="s1">resize_script</span>


<span class="s2">def </span><span class="s1">_build_mathjax_script(url):</span>
    <span class="s2">return </span><span class="s3">'&lt;script src=&quot;{url}?config=TeX-AMS-MML_SVG&quot;&gt;&lt;/script&gt;'</span><span class="s1">.format(url=url)</span>


<span class="s2">def </span><span class="s1">_get_jconfig(config=</span><span class="s2">None</span><span class="s1">):</span>

    <span class="s1">configkeys = (</span>
        <span class="s3">&quot;staticPlot&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;plotlyServerURL&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;editable&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;edits&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;autosizable&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;responsive&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;queueLength&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;fillFrame&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;frameMargins&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;scrollZoom&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;doubleClick&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;showTips&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;showAxisDragHandles&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;showAxisRangeEntryBoxes&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;showLink&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;sendData&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;showSendToCloud&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;linkText&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;showSources&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;displayModeBar&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;modeBarButtonsToRemove&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;modeBarButtonsToAdd&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;modeBarButtons&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;toImageButtonOptions&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;displaylogo&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;watermark&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;plotGlPixelRatio&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;setBackground&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;topojsonURL&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;mapboxAccessToken&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;logging&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;globalTransforms&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;locale&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;locales&quot;</span><span class="s2">,</span>
        <span class="s3">&quot;doubleClickDelay&quot;</span><span class="s2">,</span>
    <span class="s1">)</span>

    <span class="s2">if </span><span class="s1">config </span><span class="s2">and </span><span class="s1">isinstance(config</span><span class="s2">, </span><span class="s1">dict):</span>
        <span class="s4"># Warn user on unrecognized config options.  We make this a warning</span>
        <span class="s4"># rather than an error since we don't have code generation logic in</span>
        <span class="s4"># place yet to guarantee that the config options in plotly.py are up</span>
        <span class="s4"># to date</span>
        <span class="s1">bad_config = [k </span><span class="s2">for </span><span class="s1">k </span><span class="s2">in </span><span class="s1">config </span><span class="s2">if </span><span class="s1">k </span><span class="s2">not in </span><span class="s1">configkeys]</span>
        <span class="s2">if </span><span class="s1">bad_config:</span>
            <span class="s1">warnings.warn(</span>
                <span class="s3">&quot;&quot;&quot; 
Unrecognized config options supplied: {bad_config}&quot;&quot;&quot;</span><span class="s1">.format(</span>
                    <span class="s1">bad_config=bad_config</span>
                <span class="s1">)</span>
            <span class="s1">)</span>

        <span class="s1">clean_config = config</span>
    <span class="s2">else</span><span class="s1">:</span>
        <span class="s1">clean_config = {}</span>

    <span class="s1">plotly_platform_url = plotly.tools.get_config_plotly_server_url()</span>

    <span class="s2">if not </span><span class="s1">clean_config.get(</span><span class="s3">&quot;plotlyServerURL&quot;</span><span class="s2">, None</span><span class="s1">):</span>
        <span class="s1">clean_config[</span><span class="s3">&quot;plotlyServerURL&quot;</span><span class="s1">] = plotly_platform_url</span>

    <span class="s2">if </span><span class="s1">(</span>
        <span class="s1">plotly_platform_url != </span><span class="s3">&quot;https://plot.ly&quot;</span>
        <span class="s2">and </span><span class="s1">clean_config.get(</span><span class="s3">&quot;linkText&quot;</span><span class="s2">, None</span><span class="s1">) == </span><span class="s3">&quot;Export to plot.ly&quot;</span>
    <span class="s1">):</span>
        <span class="s1">link_domain = plotly_platform_url.replace(</span><span class="s3">&quot;https://&quot;</span><span class="s2">, </span><span class="s3">&quot;&quot;</span><span class="s1">).replace(</span><span class="s3">&quot;http://&quot;</span><span class="s2">, </span><span class="s3">&quot;&quot;</span><span class="s1">)</span>
        <span class="s1">link_text = clean_config[</span><span class="s3">&quot;linkText&quot;</span><span class="s1">].replace(</span><span class="s3">&quot;plot.ly&quot;</span><span class="s2">, </span><span class="s1">link_domain)</span>
        <span class="s1">clean_config[</span><span class="s3">&quot;linkText&quot;</span><span class="s1">] = link_text</span>

    <span class="s2">return </span><span class="s1">clean_config</span>


<span class="s4"># Build script to set global PlotlyConfig object. This must execute before</span>
<span class="s4"># plotly.js is loaded.</span>
<span class="s1">_window_plotly_config = </span><span class="s3">&quot;&quot;&quot;</span><span class="s2">\ 
</span><span class="s3">&lt;script type=&quot;text/javascript&quot;&gt;</span><span class="s2">\ 
</span><span class="s3">window.PlotlyConfig = {MathJaxConfig: 'local'};</span><span class="s2">\ 
</span><span class="s3">&lt;/script&gt;&quot;&quot;&quot;</span>

<span class="s1">_mathjax_config = </span><span class="s3">&quot;&quot;&quot;</span><span class="s2">\ 
</span><span class="s3">&lt;script type=&quot;text/javascript&quot;&gt;</span><span class="s2">\ 
</span><span class="s3">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: &quot;STIX-Web&quot;}});}</span><span class="s2">\ 
</span><span class="s3">&lt;/script&gt;&quot;&quot;&quot;</span>


<span class="s2">def </span><span class="s1">get_image_download_script(caller):</span>
    <span class="s0">&quot;&quot;&quot; 
    This function will return a script that will download an image of a Plotly 
    plot. 
 
    Keyword Arguments: 
    caller ('plot', 'iplot') -- specifies which function made the call for the 
        download script. If `iplot`, then an extra condition is added into the 
        download script to ensure that download prompts aren't initiated on 
        page reloads. 
    &quot;&quot;&quot;</span>

    <span class="s2">if </span><span class="s1">caller == </span><span class="s3">&quot;iplot&quot;</span><span class="s1">:</span>
        <span class="s1">check_start = </span><span class="s3">&quot;if(document.readyState == 'complete') {{&quot;</span>
        <span class="s1">check_end = </span><span class="s3">&quot;}}&quot;</span>
    <span class="s2">elif </span><span class="s1">caller == </span><span class="s3">&quot;plot&quot;</span><span class="s1">:</span>
        <span class="s1">check_start = </span><span class="s3">&quot;&quot;</span>
        <span class="s1">check_end = </span><span class="s3">&quot;&quot;</span>
    <span class="s2">else</span><span class="s1">:</span>
        <span class="s2">raise </span><span class="s1">ValueError(</span><span class="s3">&quot;caller should only be one of `iplot` or `plot`&quot;</span><span class="s1">)</span>

    <span class="s2">return </span><span class="s1">(</span>
        <span class="s3">&quot;function downloadimage(format, height, width,&quot;</span>
        <span class="s3">&quot; filename) {{&quot;</span>
        <span class="s3">&quot;var p = document.getElementById('{{plot_id}}');&quot;</span>
        <span class="s3">&quot;Plotly.downloadImage(p, {{format: format, height: height, &quot;</span>
        <span class="s3">&quot;width: width, filename: filename}});}};&quot;</span>
        <span class="s1">+ check_start</span>
        <span class="s1">+ </span><span class="s3">&quot;downloadimage('{format}', {height}, {width}, &quot;</span>
        <span class="s3">&quot;'{filename}');&quot; </span><span class="s1">+ check_end</span>
    <span class="s1">)</span>


<span class="s2">def </span><span class="s1">build_save_image_post_script(</span>
    <span class="s1">image</span><span class="s2">, </span><span class="s1">image_filename</span><span class="s2">, </span><span class="s1">image_height</span><span class="s2">, </span><span class="s1">image_width</span><span class="s2">, </span><span class="s1">caller</span>
<span class="s1">):</span>
    <span class="s2">if </span><span class="s1">image:</span>
        <span class="s2">if </span><span class="s1">image </span><span class="s2">not in </span><span class="s1">__IMAGE_FORMATS:</span>
            <span class="s2">raise </span><span class="s1">ValueError(</span>
                <span class="s3">&quot;The image parameter must be one of the &quot;</span>
                <span class="s3">&quot;following: {}&quot;</span><span class="s1">.format(__IMAGE_FORMATS)</span>
            <span class="s1">)</span>

        <span class="s1">script = get_image_download_script(caller)</span>
        <span class="s1">post_script = script.format(</span>
            <span class="s1">format=image</span><span class="s2">,</span>
            <span class="s1">width=image_width</span><span class="s2">,</span>
            <span class="s1">height=image_height</span><span class="s2">,</span>
            <span class="s1">filename=image_filename</span><span class="s2">,</span>
        <span class="s1">)</span>
    <span class="s2">else</span><span class="s1">:</span>
        <span class="s1">post_script = </span><span class="s2">None</span>

    <span class="s2">return </span><span class="s1">post_script</span>


<span class="s2">def </span><span class="s1">init_notebook_mode(connected=</span><span class="s2">False</span><span class="s1">):</span>
    <span class="s0">&quot;&quot;&quot; 
    Initialize plotly.js in the browser if it hasn't been loaded into the DOM 
    yet. This is an idempotent method and can and should be called from any 
    offline methods that require plotly.js to be loaded into the notebook dom. 
 
    Keyword arguments: 
 
    connected (default=False) -- If True, the plotly.js library will be loaded 
    from an online CDN. If False, the plotly.js library will be loaded locally 
    from the plotly python package 
 
    Use `connected=True` if you want your notebooks to have smaller file sizes. 
    In the case where `connected=False`, the entirety of the plotly.js library 
    will be loaded into the notebook, which will result in a file-size increase 
    of a couple megabytes. Additionally, because the library will be downloaded 
    from the web, you and your viewers must be connected to the internet to be 
    able to view charts within this notebook. 
 
    Use `connected=False` if you want you and your collaborators to be able to 
    create and view these charts regardless of the availability of an internet 
    connection. This is the default option since it is the most predictable. 
    Note that under this setting the library will be included inline inside 
    your notebook, resulting in much larger notebook sizes compared to the case 
    where `connected=True`. 
    &quot;&quot;&quot;</span>
    <span class="s2">import </span><span class="s1">plotly.io </span><span class="s2">as </span><span class="s1">pio</span>

    <span class="s1">ipython = get_module(</span><span class="s3">&quot;IPython&quot;</span><span class="s1">)</span>
    <span class="s2">if not </span><span class="s1">ipython:</span>
        <span class="s2">raise </span><span class="s1">ImportError(</span><span class="s3">&quot;`iplot` can only run inside an IPython Notebook.&quot;</span><span class="s1">)</span>

    <span class="s2">if </span><span class="s1">connected:</span>
        <span class="s1">pio.renderers.default = </span><span class="s3">&quot;plotly_mimetype+notebook_connected&quot;</span>
    <span class="s2">else</span><span class="s1">:</span>
        <span class="s1">pio.renderers.default = </span><span class="s3">&quot;plotly_mimetype+notebook&quot;</span>

    <span class="s4"># Trigger immediate activation of notebook. This way the plotly.js</span>
    <span class="s4"># library reference is available to the notebook immediately</span>
    <span class="s1">pio.renderers._activate_pending_renderers()</span>


<span class="s2">def </span><span class="s1">iplot(</span>
    <span class="s1">figure_or_data</span><span class="s2">,</span>
    <span class="s1">show_link=</span><span class="s2">False,</span>
    <span class="s1">link_text=</span><span class="s3">&quot;Export to plot.ly&quot;</span><span class="s2">,</span>
    <span class="s1">validate=</span><span class="s2">True,</span>
    <span class="s1">image=</span><span class="s2">None,</span>
    <span class="s1">filename=</span><span class="s3">&quot;plot_image&quot;</span><span class="s2">,</span>
    <span class="s1">image_width=</span><span class="s5">800</span><span class="s2">,</span>
    <span class="s1">image_height=</span><span class="s5">600</span><span class="s2">,</span>
    <span class="s1">config=</span><span class="s2">None,</span>
    <span class="s1">auto_play=</span><span class="s2">True,</span>
    <span class="s1">animation_opts=</span><span class="s2">None,</span>
<span class="s1">):</span>
    <span class="s0">&quot;&quot;&quot; 
    Draw plotly graphs inside an IPython or Jupyter notebook 
 
    figure_or_data -- a plotly.graph_objs.Figure or plotly.graph_objs.Data or 
                      dict or list that describes a Plotly graph. 
                      See https://plot.ly/python/ for examples of 
                      graph descriptions. 
 
    Keyword arguments: 
    show_link (default=False) -- display a link in the bottom-right corner of 
                                of the chart that will export the chart to 
                                Plotly Cloud or Plotly Enterprise 
    link_text (default='Export to plot.ly') -- the text of export link 
    validate (default=True) -- validate that all of the keys in the figure 
                               are valid? omit if your version of plotly.js 
                               has become outdated with your version of 
                               graph_reference.json or if you need to include 
                               extra, unnecessary keys in your figure. 
    image (default=None |'png' |'jpeg' |'svg' |'webp') -- This parameter sets 
        the format of the image to be downloaded, if we choose to download an 
        image. This parameter has a default value of None indicating that no 
        image should be downloaded. Please note: for higher resolution images 
        and more export options, consider using plotly.io.write_image. See 
        https://plot.ly/python/static-image-export/ for more details. 
    filename (default='plot') -- Sets the name of the file your image 
        will be saved to. The extension should not be included. 
    image_height (default=600) -- Specifies the height of the image in `px`. 
    image_width (default=800) -- Specifies the width of the image in `px`. 
    config (default=None) -- Plot view options dictionary. Keyword arguments 
        `show_link` and `link_text` set the associated options in this 
        dictionary if it doesn't contain them already. 
    auto_play (default=True) -- Whether to automatically start the animation 
        sequence on page load, if the figure contains frames. Has no effect if 
        the figure does not contain frames. 
    animation_opts (default=None) -- Dict of custom animation parameters that 
        are used for the automatically started animation on page load. This 
        dict is passed to the function Plotly.animate in Plotly.js. See 
        https://github.com/plotly/plotly.js/blob/master/src/plots/animation_attributes.js 
        for available options. Has no effect if the figure 
        does not contain frames, or auto_play is False. 
 
    Example: 
    ``` 
    from plotly.offline import init_notebook_mode, iplot 
    init_notebook_mode() 
    iplot([{'x': [1, 2, 3], 'y': [5, 2, 7]}]) 
    # We can also download an image of the plot by setting the image to the 
    format you want. e.g. `image='png'` 
    iplot([{'x': [1, 2, 3], 'y': [5, 2, 7]}], image='png') 
    ``` 
 
    animation_opts Example: 
    ``` 
    from plotly.offline import iplot 
    figure = {'data': [{'x': [0, 1], 'y': [0, 1]}], 
              'layout': {'xaxis': {'range': [0, 5], 'autorange': False}, 
                         'yaxis': {'range': [0, 5], 'autorange': False}, 
                         'title': 'Start Title'}, 
              'frames': [{'data': [{'x': [1, 2], 'y': [1, 2]}]}, 
                         {'data': [{'x': [1, 4], 'y': [1, 4]}]}, 
                         {'data': [{'x': [3, 4], 'y': [3, 4]}], 
                          'layout': {'title': 'End Title'}}]} 
    iplot(figure, animation_opts={'frame': {'duration': 1}}) 
    ``` 
    &quot;&quot;&quot;</span>
    <span class="s2">import </span><span class="s1">plotly.io </span><span class="s2">as </span><span class="s1">pio</span>

    <span class="s1">ipython = get_module(</span><span class="s3">&quot;IPython&quot;</span><span class="s1">)</span>
    <span class="s2">if not </span><span class="s1">ipython:</span>
        <span class="s2">raise </span><span class="s1">ImportError(</span><span class="s3">&quot;`iplot` can only run inside an IPython Notebook.&quot;</span><span class="s1">)</span>

    <span class="s1">config = dict(config) </span><span class="s2">if </span><span class="s1">config </span><span class="s2">else </span><span class="s1">{}</span>
    <span class="s1">config.setdefault(</span><span class="s3">&quot;showLink&quot;</span><span class="s2">, </span><span class="s1">show_link)</span>
    <span class="s1">config.setdefault(</span><span class="s3">&quot;linkText&quot;</span><span class="s2">, </span><span class="s1">link_text)</span>

    <span class="s4"># Get figure</span>
    <span class="s1">figure = tools.return_figure_from_figure_or_data(figure_or_data</span><span class="s2">, </span><span class="s1">validate)</span>

    <span class="s4"># Handle image request</span>
    <span class="s1">post_script = build_save_image_post_script(</span>
        <span class="s1">image</span><span class="s2">, </span><span class="s1">filename</span><span class="s2">, </span><span class="s1">image_height</span><span class="s2">, </span><span class="s1">image_width</span><span class="s2">, </span><span class="s3">&quot;iplot&quot;</span>
    <span class="s1">)</span>

    <span class="s4"># Show figure</span>
    <span class="s1">pio.show(</span>
        <span class="s1">figure</span><span class="s2">,</span>
        <span class="s1">validate=validate</span><span class="s2">,</span>
        <span class="s1">config=config</span><span class="s2">,</span>
        <span class="s1">auto_play=auto_play</span><span class="s2">,</span>
        <span class="s1">post_script=post_script</span><span class="s2">,</span>
        <span class="s1">animation_opts=animation_opts</span><span class="s2">,</span>
    <span class="s1">)</span>


<span class="s2">def </span><span class="s1">plot(</span>
    <span class="s1">figure_or_data</span><span class="s2">,</span>
    <span class="s1">show_link=</span><span class="s2">False,</span>
    <span class="s1">link_text=</span><span class="s3">&quot;Export to plot.ly&quot;</span><span class="s2">,</span>
    <span class="s1">validate=</span><span class="s2">True,</span>
    <span class="s1">output_type=</span><span class="s3">&quot;file&quot;</span><span class="s2">,</span>
    <span class="s1">include_plotlyjs=</span><span class="s2">True,</span>
    <span class="s1">filename=</span><span class="s3">&quot;temp-plot.html&quot;</span><span class="s2">,</span>
    <span class="s1">auto_open=</span><span class="s2">True,</span>
    <span class="s1">image=</span><span class="s2">None,</span>
    <span class="s1">image_filename=</span><span class="s3">&quot;plot_image&quot;</span><span class="s2">,</span>
    <span class="s1">image_width=</span><span class="s5">800</span><span class="s2">,</span>
    <span class="s1">image_height=</span><span class="s5">600</span><span class="s2">,</span>
    <span class="s1">config=</span><span class="s2">None,</span>
    <span class="s1">include_mathjax=</span><span class="s2">False,</span>
    <span class="s1">auto_play=</span><span class="s2">True,</span>
    <span class="s1">animation_opts=</span><span class="s2">None,</span>
<span class="s1">):</span>
    <span class="s0">&quot;&quot;&quot; Create a plotly graph locally as an HTML document or string. 
 
    Example: 
    ``` 
    from plotly.offline import plot 
    import plotly.graph_objs as go 
 
    plot([go.Scatter(x=[1, 2, 3], y=[3, 2, 6])], filename='my-graph.html') 
    # We can also download an image of the plot by setting the image parameter 
    # to the image format we want 
    plot([go.Scatter(x=[1, 2, 3], y=[3, 2, 6])], filename='my-graph.html', 
         image='jpeg') 
    ``` 
    More examples below. 
 
    figure_or_data -- a plotly.graph_objs.Figure or plotly.graph_objs.Data or 
                      dict or list that describes a Plotly graph. 
                      See https://plot.ly/python/ for examples of 
                      graph descriptions. 
 
    Keyword arguments: 
    show_link (default=False) -- display a link in the bottom-right corner of 
        of the chart that will export the chart to Plotly Cloud or 
        Plotly Enterprise 
    link_text (default='Export to plot.ly') -- the text of export link 
    validate (default=True) -- validate that all of the keys in the figure 
        are valid? omit if your version of plotly.js has become outdated 
        with your version of graph_reference.json or if you need to include 
        extra, unnecessary keys in your figure. 
    output_type ('file' | 'div' - default 'file') -- if 'file', then 
        the graph is saved as a standalone HTML file and `plot` 
        returns None. 
        If 'div', then `plot` returns a string that just contains the 
        HTML &lt;div&gt; that contains the graph and the script to generate the 
        graph. 
        Use 'file' if you want to save and view a single graph at a time 
        in a standalone HTML file. 
        Use 'div' if you are embedding these graphs in an HTML file with 
        other graphs or HTML markup, like a HTML report or an website. 
    include_plotlyjs (True | False | 'cdn' | 'directory' | path - default=True) 
        Specifies how the plotly.js library is included in the output html 
        file or div string. 
 
        If True, a script tag containing the plotly.js source code (~3MB) 
        is included in the output.  HTML files generated with this option are 
        fully self-contained and can be used offline. 
 
        If 'cdn', a script tag that references the plotly.js CDN is included 
        in the output. HTML files generated with this option are about 3MB 
        smaller than those generated with include_plotlyjs=True, but they 
        require an active internet connection in order to load the plotly.js 
        library. 
 
        If 'directory', a script tag is included that references an external 
        plotly.min.js bundle that is assumed to reside in the same 
        directory as the HTML file.  If output_type='file' then the 
        plotly.min.js bundle is copied into the directory of the resulting 
        HTML file. If a file named plotly.min.js already exists in the output 
        directory then this file is left unmodified and no copy is performed. 
        HTML files generated with this option can be used offline, but they 
        require a copy of the plotly.min.js bundle in the same directory. 
        This option is useful when many figures will be saved as HTML files in 
        the same directory because the plotly.js source code will be included 
        only once per output directory, rather than once per output file. 
 
        If a string that ends in '.js', a script tag is included that 
        references the specified path. This approach can be used to point 
        the resulting HTML file to an alternative CDN. 
 
        If False, no script tag referencing plotly.js is included. This is 
        useful when output_type='div' and the resulting div string will be 
        placed inside an HTML document that already loads plotly.js.  This 
        option is not advised when output_type='file' as it will result in 
        a non-functional html file. 
    filename (default='temp-plot.html') -- The local filename to save the 
        outputted chart to. If the filename already exists, it will be 
        overwritten. This argument only applies if `output_type` is 'file'. 
    auto_open (default=True) -- If True, open the saved file in a 
        web browser after saving. 
        This argument only applies if `output_type` is 'file'. 
    image (default=None |'png' |'jpeg' |'svg' |'webp') -- This parameter sets 
        the format of the image to be downloaded, if we choose to download an 
        image. This parameter has a default value of None indicating that no 
        image should be downloaded. Please note: for higher resolution images 
        and more export options, consider making requests to our image servers. 
        Type: `help(py.image)` for more details. 
    image_filename (default='plot_image') -- Sets the name of the file your 
        image will be saved to. The extension should not be included. 
    image_height (default=600) -- Specifies the height of the image in `px`. 
    image_width (default=800) -- Specifies the width of the image in `px`. 
    config (default=None) -- Plot view options dictionary. Keyword arguments 
        `show_link` and `link_text` set the associated options in this 
        dictionary if it doesn't contain them already. 
    include_mathjax (False | 'cdn' | path - default=False) -- 
        Specifies how the MathJax.js library is included in the output html 
        file or div string.  MathJax is required in order to display labels 
        with LaTeX typesetting. 
 
        If False, no script tag referencing MathJax.js will be included in the 
        output. HTML files generated with this option will not be able to 
        display LaTeX typesetting. 
 
        If 'cdn', a script tag that references a MathJax CDN location will be 
        included in the output.  HTML files generated with this option will be 
        able to display LaTeX typesetting as long as they have internet access. 
 
        If a string that ends in '.js', a script tag is included that 
        references the specified path. This approach can be used to point the 
        resulting HTML file to an alternative CDN. 
    auto_play (default=True) -- Whether to automatically start the animation 
        sequence on page load if the figure contains frames. Has no effect if 
        the figure does not contain frames. 
    animation_opts (default=None) -- Dict of custom animation parameters that 
        are used for the automatically started animation on page load. This 
        dict is passed to the function Plotly.animate in Plotly.js. See 
        https://github.com/plotly/plotly.js/blob/master/src/plots/animation_attributes.js 
        for available options. Has no effect if the figure 
        does not contain frames, or auto_play is False. 
 
    Example: 
    ``` 
    from plotly.offline import plot 
    figure = {'data': [{'x': [0, 1], 'y': [0, 1]}], 
              'layout': {'xaxis': {'range': [0, 5], 'autorange': False}, 
                         'yaxis': {'range': [0, 5], 'autorange': False}, 
                         'title': 'Start Title'}, 
              'frames': [{'data': [{'x': [1, 2], 'y': [1, 2]}]}, 
                         {'data': [{'x': [1, 4], 'y': [1, 4]}]}, 
                         {'data': [{'x': [3, 4], 'y': [3, 4]}], 
                          'layout': {'title': 'End Title'}}]} 
    plot(figure, animation_opts={'frame': {'duration': 1}}) 
    ``` 
    &quot;&quot;&quot;</span>
    <span class="s2">import </span><span class="s1">plotly.io </span><span class="s2">as </span><span class="s1">pio</span>

    <span class="s4"># Output type</span>
    <span class="s2">if </span><span class="s1">output_type </span><span class="s2">not in </span><span class="s1">[</span><span class="s3">&quot;div&quot;</span><span class="s2">, </span><span class="s3">&quot;file&quot;</span><span class="s1">]:</span>
        <span class="s2">raise </span><span class="s1">ValueError(</span>
            <span class="s3">&quot;`output_type` argument must be 'div' or 'file'. &quot;</span>
            <span class="s3">&quot;You supplied `&quot; </span><span class="s1">+ output_type + </span><span class="s3">&quot;``&quot;</span>
        <span class="s1">)</span>
    <span class="s2">if not </span><span class="s1">filename.endswith(</span><span class="s3">&quot;.html&quot;</span><span class="s1">) </span><span class="s2">and </span><span class="s1">output_type == </span><span class="s3">&quot;file&quot;</span><span class="s1">:</span>
        <span class="s1">warnings.warn(</span>
            <span class="s3">&quot;Your filename `&quot; </span><span class="s1">+ filename + </span><span class="s3">&quot;` didn't end with .html. &quot;</span>
            <span class="s3">&quot;Adding .html to the end of your file.&quot;</span>
        <span class="s1">)</span>
        <span class="s1">filename += </span><span class="s3">&quot;.html&quot;</span>

    <span class="s4"># Config</span>
    <span class="s1">config = dict(config) </span><span class="s2">if </span><span class="s1">config </span><span class="s2">else </span><span class="s1">{}</span>
    <span class="s1">config.setdefault(</span><span class="s3">&quot;showLink&quot;</span><span class="s2">, </span><span class="s1">show_link)</span>
    <span class="s1">config.setdefault(</span><span class="s3">&quot;linkText&quot;</span><span class="s2">, </span><span class="s1">link_text)</span>

    <span class="s1">figure = tools.return_figure_from_figure_or_data(figure_or_data</span><span class="s2">, </span><span class="s1">validate)</span>
    <span class="s1">width = figure.get(</span><span class="s3">&quot;layout&quot;</span><span class="s2">, </span><span class="s1">{}).get(</span><span class="s3">&quot;width&quot;</span><span class="s2">, </span><span class="s3">&quot;100%&quot;</span><span class="s1">)</span>
    <span class="s1">height = figure.get(</span><span class="s3">&quot;layout&quot;</span><span class="s2">, </span><span class="s1">{}).get(</span><span class="s3">&quot;height&quot;</span><span class="s2">, </span><span class="s3">&quot;100%&quot;</span><span class="s1">)</span>

    <span class="s2">if </span><span class="s1">width == </span><span class="s3">&quot;100%&quot; </span><span class="s2">or </span><span class="s1">height == </span><span class="s3">&quot;100%&quot;</span><span class="s1">:</span>
        <span class="s1">config.setdefault(</span><span class="s3">&quot;responsive&quot;</span><span class="s2">, True</span><span class="s1">)</span>

    <span class="s4"># Handle image request</span>
    <span class="s1">post_script = build_save_image_post_script(</span>
        <span class="s1">image</span><span class="s2">, </span><span class="s1">image_filename</span><span class="s2">, </span><span class="s1">image_height</span><span class="s2">, </span><span class="s1">image_width</span><span class="s2">, </span><span class="s3">&quot;plot&quot;</span>
    <span class="s1">)</span>

    <span class="s2">if </span><span class="s1">output_type == </span><span class="s3">&quot;file&quot;</span><span class="s1">:</span>
        <span class="s1">pio.write_html(</span>
            <span class="s1">figure</span><span class="s2">,</span>
            <span class="s1">filename</span><span class="s2">,</span>
            <span class="s1">config=config</span><span class="s2">,</span>
            <span class="s1">auto_play=auto_play</span><span class="s2">,</span>
            <span class="s1">include_plotlyjs=include_plotlyjs</span><span class="s2">,</span>
            <span class="s1">include_mathjax=include_mathjax</span><span class="s2">,</span>
            <span class="s1">post_script=post_script</span><span class="s2">,</span>
            <span class="s1">full_html=</span><span class="s2">True,</span>
            <span class="s1">validate=validate</span><span class="s2">,</span>
            <span class="s1">animation_opts=animation_opts</span><span class="s2">,</span>
            <span class="s1">auto_open=auto_open</span><span class="s2">,</span>
        <span class="s1">)</span>
        <span class="s2">return </span><span class="s1">filename</span>
    <span class="s2">else</span><span class="s1">:</span>
        <span class="s2">return </span><span class="s1">pio.to_html(</span>
            <span class="s1">figure</span><span class="s2">,</span>
            <span class="s1">config=config</span><span class="s2">,</span>
            <span class="s1">auto_play=auto_play</span><span class="s2">,</span>
            <span class="s1">include_plotlyjs=include_plotlyjs</span><span class="s2">,</span>
            <span class="s1">include_mathjax=include_mathjax</span><span class="s2">,</span>
            <span class="s1">post_script=post_script</span><span class="s2">,</span>
            <span class="s1">full_html=</span><span class="s2">False,</span>
            <span class="s1">validate=validate</span><span class="s2">,</span>
            <span class="s1">animation_opts=animation_opts</span><span class="s2">,</span>
        <span class="s1">)</span>


<span class="s2">def </span><span class="s1">plot_mpl(</span>
    <span class="s1">mpl_fig</span><span class="s2">,</span>
    <span class="s1">resize=</span><span class="s2">False,</span>
    <span class="s1">strip_style=</span><span class="s2">False,</span>
    <span class="s1">verbose=</span><span class="s2">False,</span>
    <span class="s1">show_link=</span><span class="s2">False,</span>
    <span class="s1">link_text=</span><span class="s3">&quot;Export to plot.ly&quot;</span><span class="s2">,</span>
    <span class="s1">validate=</span><span class="s2">True,</span>
    <span class="s1">output_type=</span><span class="s3">&quot;file&quot;</span><span class="s2">,</span>
    <span class="s1">include_plotlyjs=</span><span class="s2">True,</span>
    <span class="s1">filename=</span><span class="s3">&quot;temp-plot.html&quot;</span><span class="s2">,</span>
    <span class="s1">auto_open=</span><span class="s2">True,</span>
    <span class="s1">image=</span><span class="s2">None,</span>
    <span class="s1">image_filename=</span><span class="s3">&quot;plot_image&quot;</span><span class="s2">,</span>
    <span class="s1">image_height=</span><span class="s5">600</span><span class="s2">,</span>
    <span class="s1">image_width=</span><span class="s5">800</span><span class="s2">,</span>
<span class="s1">):</span>
    <span class="s0">&quot;&quot;&quot; 
    Convert a matplotlib figure to a Plotly graph stored locally as HTML. 
 
    For more information on converting matplotlib visualizations to plotly 
    graphs, call help(plotly.tools.mpl_to_plotly) 
 
    For more information on creating plotly charts locally as an HTML document 
    or string, call help(plotly.offline.plot) 
 
    mpl_fig -- a matplotlib figure object to convert to a plotly graph 
 
    Keyword arguments: 
    resize (default=False) -- allow plotly to choose the figure size. 
    strip_style (default=False) -- allow plotly to choose style options. 
    verbose (default=False) -- print message. 
    show_link (default=False) -- display a link in the bottom-right corner of 
        of the chart that will export the chart to Plotly Cloud or 
        Plotly Enterprise 
    link_text (default='Export to plot.ly') -- the text of export link 
    validate (default=True) -- validate that all of the keys in the figure 
        are valid? omit if your version of plotly.js has become outdated 
        with your version of graph_reference.json or if you need to include 
        extra, unnecessary keys in your figure. 
    output_type ('file' | 'div' - default 'file') -- if 'file', then 
        the graph is saved as a standalone HTML file and `plot` 
        returns None. 
        If 'div', then `plot` returns a string that just contains the 
        HTML &lt;div&gt; that contains the graph and the script to generate the 
        graph. 
        Use 'file' if you want to save and view a single graph at a time 
        in a standalone HTML file. 
        Use 'div' if you are embedding these graphs in an HTML file with 
        other graphs or HTML markup, like a HTML report or an website. 
    include_plotlyjs (default=True) -- If True, include the plotly.js 
        source code in the output file or string. 
        Set as False if your HTML file already contains a copy of the plotly.js 
        library. 
    filename (default='temp-plot.html') -- The local filename to save the 
        outputted chart to. If the filename already exists, it will be 
        overwritten. This argument only applies if `output_type` is 'file'. 
    auto_open (default=True) -- If True, open the saved file in a 
        web browser after saving. 
        This argument only applies if `output_type` is 'file'. 
    image (default=None |'png' |'jpeg' |'svg' |'webp') -- This parameter sets 
        the format of the image to be downloaded, if we choose to download an 
        image. This parameter has a default value of None indicating that no 
        image should be downloaded. 
    image_filename (default='plot_image') -- Sets the name of the file your 
        image will be saved to. The extension should not be included. 
    image_height (default=600) -- Specifies the height of the image in `px`. 
    image_width (default=800) -- Specifies the width of the image in `px`. 
 
    Example: 
    ``` 
    from plotly.offline import init_notebook_mode, plot_mpl 
    import matplotlib.pyplot as plt 
 
    init_notebook_mode() 
 
    fig = plt.figure() 
    x = [10, 15, 20, 25, 30] 
    y = [100, 250, 200, 150, 300] 
    plt.plot(x, y, &quot;o&quot;) 
 
    plot_mpl(fig) 
    # If you want to to download an image of the figure as well 
    plot_mpl(fig, image='png') 
    ``` 
    &quot;&quot;&quot;</span>
    <span class="s1">plotly_plot = plotly.tools.mpl_to_plotly(mpl_fig</span><span class="s2">, </span><span class="s1">resize</span><span class="s2">, </span><span class="s1">strip_style</span><span class="s2">, </span><span class="s1">verbose)</span>
    <span class="s2">return </span><span class="s1">plot(</span>
        <span class="s1">plotly_plot</span><span class="s2">,</span>
        <span class="s1">show_link</span><span class="s2">,</span>
        <span class="s1">link_text</span><span class="s2">,</span>
        <span class="s1">validate</span><span class="s2">,</span>
        <span class="s1">output_type</span><span class="s2">,</span>
        <span class="s1">include_plotlyjs</span><span class="s2">,</span>
        <span class="s1">filename</span><span class="s2">,</span>
        <span class="s1">auto_open</span><span class="s2">,</span>
        <span class="s1">image=image</span><span class="s2">,</span>
        <span class="s1">image_filename=image_filename</span><span class="s2">,</span>
        <span class="s1">image_height=image_height</span><span class="s2">,</span>
        <span class="s1">image_width=image_width</span><span class="s2">,</span>
    <span class="s1">)</span>


<span class="s2">def </span><span class="s1">iplot_mpl(</span>
    <span class="s1">mpl_fig</span><span class="s2">,</span>
    <span class="s1">resize=</span><span class="s2">False,</span>
    <span class="s1">strip_style=</span><span class="s2">False,</span>
    <span class="s1">verbose=</span><span class="s2">False,</span>
    <span class="s1">show_link=</span><span class="s2">False,</span>
    <span class="s1">link_text=</span><span class="s3">&quot;Export to plot.ly&quot;</span><span class="s2">,</span>
    <span class="s1">validate=</span><span class="s2">True,</span>
    <span class="s1">image=</span><span class="s2">None,</span>
    <span class="s1">image_filename=</span><span class="s3">&quot;plot_image&quot;</span><span class="s2">,</span>
    <span class="s1">image_height=</span><span class="s5">600</span><span class="s2">,</span>
    <span class="s1">image_width=</span><span class="s5">800</span><span class="s2">,</span>
<span class="s1">):</span>
    <span class="s0">&quot;&quot;&quot; 
    Convert a matplotlib figure to a plotly graph and plot inside an IPython 
    notebook without connecting to an external server. 
 
    To save the chart to Plotly Cloud or Plotly Enterprise, use 
    `plotly.plotly.plot_mpl`. 
 
    For more information on converting matplotlib visualizations to plotly 
    graphs call `help(plotly.tools.mpl_to_plotly)` 
 
    For more information on plotting plotly charts offline in an Ipython 
    notebook call `help(plotly.offline.iplot)` 
 
    mpl_fig -- a matplotlib.figure to convert to a plotly graph 
 
    Keyword arguments: 
    resize (default=False) -- allow plotly to choose the figure size. 
    strip_style (default=False) -- allow plotly to choose style options. 
    verbose (default=False) -- print message. 
    show_link (default=False) -- display a link in the bottom-right corner of 
                                of the chart that will export the chart to 
                                Plotly Cloud or Plotly Enterprise 
    link_text (default='Export to plot.ly') -- the text of export link 
    validate (default=True) -- validate that all of the keys in the figure 
                               are valid? omit if your version of plotly.js 
                               has become outdated with your version of 
                               graph_reference.json or if you need to include 
                               extra, unnecessary keys in your figure. 
    image (default=None |'png' |'jpeg' |'svg' |'webp') -- This parameter sets 
        the format of the image to be downloaded, if we choose to download an 
        image. This parameter has a default value of None indicating that no 
        image should be downloaded. 
    image_filename (default='plot_image') -- Sets the name of the file your 
        image will be saved to. The extension should not be included. 
    image_height (default=600) -- Specifies the height of the image in `px`. 
    image_width (default=800) -- Specifies the width of the image in `px`. 
 
    Example: 
    ``` 
    from plotly.offline import init_notebook_mode, iplot_mpl 
    import matplotlib.pyplot as plt 
 
    fig = plt.figure() 
    x = [10, 15, 20, 25, 30] 
    y = [100, 250, 200, 150, 300] 
    plt.plot(x, y, &quot;o&quot;) 
 
    init_notebook_mode() 
    iplot_mpl(fig) 
    # and if you want to download an image of the figure as well 
    iplot_mpl(fig, image='jpeg') 
    ``` 
    &quot;&quot;&quot;</span>
    <span class="s1">plotly_plot = plotly.tools.mpl_to_plotly(mpl_fig</span><span class="s2">, </span><span class="s1">resize</span><span class="s2">, </span><span class="s1">strip_style</span><span class="s2">, </span><span class="s1">verbose)</span>
    <span class="s2">return </span><span class="s1">iplot(</span>
        <span class="s1">plotly_plot</span><span class="s2">,</span>
        <span class="s1">show_link</span><span class="s2">,</span>
        <span class="s1">link_text</span><span class="s2">,</span>
        <span class="s1">validate</span><span class="s2">,</span>
        <span class="s1">image=image</span><span class="s2">,</span>
        <span class="s1">filename=image_filename</span><span class="s2">,</span>
        <span class="s1">image_height=image_height</span><span class="s2">,</span>
        <span class="s1">image_width=image_width</span><span class="s2">,</span>
    <span class="s1">)</span>


<span class="s2">def </span><span class="s1">enable_mpl_offline(</span>
    <span class="s1">resize=</span><span class="s2">False,</span>
    <span class="s1">strip_style=</span><span class="s2">False,</span>
    <span class="s1">verbose=</span><span class="s2">False,</span>
    <span class="s1">show_link=</span><span class="s2">False,</span>
    <span class="s1">link_text=</span><span class="s3">&quot;Export to plot.ly&quot;</span><span class="s2">,</span>
    <span class="s1">validate=</span><span class="s2">True,</span>
<span class="s1">):</span>
    <span class="s0">&quot;&quot;&quot; 
    Convert mpl plots to locally hosted HTML documents. 
 
    This function should be used with the inline matplotlib backend 
    that ships with IPython that can be enabled with `%pylab inline` 
    or `%matplotlib inline`. This works by adding an HTML formatter 
    for Figure objects; the existing SVG/PNG formatters will remain 
    enabled. 
 
    (idea taken from `mpld3._display.enable_notebook`) 
 
    Example: 
    ``` 
    from plotly.offline import enable_mpl_offline 
    import matplotlib.pyplot as plt 
 
    enable_mpl_offline() 
 
    fig = plt.figure() 
    x = [10, 15, 20, 25, 30] 
    y = [100, 250, 200, 150, 300] 
    plt.plot(x, y, &quot;o&quot;) 
    fig 
    ``` 
    &quot;&quot;&quot;</span>
    <span class="s1">init_notebook_mode()</span>
    <span class="s1">ipython = get_module(</span><span class="s3">&quot;IPython&quot;</span><span class="s1">)</span>
    <span class="s1">matplotlib = get_module(</span><span class="s3">&quot;matplotlib&quot;</span><span class="s1">)</span>

    <span class="s1">ip = ipython.core.getipython.get_ipython()</span>
    <span class="s1">formatter = ip.display_formatter.formatters[</span><span class="s3">&quot;text/html&quot;</span><span class="s1">]</span>
    <span class="s1">formatter.for_type(</span>
        <span class="s1">matplotlib.figure.Figure</span><span class="s2">,</span>
        <span class="s2">lambda </span><span class="s1">fig: iplot_mpl(</span>
            <span class="s1">fig</span><span class="s2">, </span><span class="s1">resize</span><span class="s2">, </span><span class="s1">strip_style</span><span class="s2">, </span><span class="s1">verbose</span><span class="s2">, </span><span class="s1">show_link</span><span class="s2">, </span><span class="s1">link_text</span><span class="s2">, </span><span class="s1">validate</span>
        <span class="s1">)</span><span class="s2">,</span>
    <span class="s1">)</span>
</pre>
</body>
</html>