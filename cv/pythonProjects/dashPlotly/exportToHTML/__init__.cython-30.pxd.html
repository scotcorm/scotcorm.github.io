<html>
<head>
<title>__init__.cython-30.pxd</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
__init__.cython-30.pxd</font>
</center></td></tr></table>
<pre><span class="s0"># NumPy static imports for Cython &gt;= 3.0</span>
<span class="s0">#</span>
<span class="s0"># If any of the PyArray_* functions are called, import_array must be</span>
<span class="s0"># called first.  This is done automatically by Cython 3.0+ if a call</span>
<span class="s0"># is not detected inside of the module.</span>
<span class="s0">#</span>
<span class="s0"># Author: Dag Sverre Seljebotn</span>
<span class="s0">#</span>

<span class="s0">from cpython.ref cimport Py_INCREF</span>
<span class="s0">from cpython.object cimport PyObject, PyTypeObject, PyObject_TypeCheck</span>
<span class="s0">cimport libc.stdio as stdio</span>


<span class="s0">cdef extern from *:</span>
    <span class="s0"># Leave a marker that the NumPy declarations came from NumPy itself and not from Cython.</span>
    <span class="s0"># See https://github.com/cython/cython/issues/3573</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">/* Using NumPy API declarations from &quot;numpy/__init__.cython-30.pxd&quot; */</span>
    <span class="s0">&quot;&quot;&quot;</span>


<span class="s0">cdef extern from &quot;Python.h&quot;:</span>
    <span class="s0">ctypedef Py_ssize_t Py_intptr_t</span>

<span class="s0">cdef extern from &quot;numpy/arrayobject.h&quot;:</span>
    <span class="s0">ctypedef Py_intptr_t npy_intp</span>
    <span class="s0">ctypedef size_t npy_uintp</span>

    <span class="s0">cdef enum NPY_TYPES:</span>
        <span class="s0">NPY_BOOL</span>
        <span class="s0">NPY_BYTE</span>
        <span class="s0">NPY_UBYTE</span>
        <span class="s0">NPY_SHORT</span>
        <span class="s0">NPY_USHORT</span>
        <span class="s0">NPY_INT</span>
        <span class="s0">NPY_UINT</span>
        <span class="s0">NPY_LONG</span>
        <span class="s0">NPY_ULONG</span>
        <span class="s0">NPY_LONGLONG</span>
        <span class="s0">NPY_ULONGLONG</span>
        <span class="s0">NPY_FLOAT</span>
        <span class="s0">NPY_DOUBLE</span>
        <span class="s0">NPY_LONGDOUBLE</span>
        <span class="s0">NPY_CFLOAT</span>
        <span class="s0">NPY_CDOUBLE</span>
        <span class="s0">NPY_CLONGDOUBLE</span>
        <span class="s0">NPY_OBJECT</span>
        <span class="s0">NPY_STRING</span>
        <span class="s0">NPY_UNICODE</span>
        <span class="s0">NPY_VOID</span>
        <span class="s0">NPY_DATETIME</span>
        <span class="s0">NPY_TIMEDELTA</span>
        <span class="s0">NPY_NTYPES</span>
        <span class="s0">NPY_NOTYPE</span>

        <span class="s0">NPY_INT8</span>
        <span class="s0">NPY_INT16</span>
        <span class="s0">NPY_INT32</span>
        <span class="s0">NPY_INT64</span>
        <span class="s0">NPY_INT128</span>
        <span class="s0">NPY_INT256</span>
        <span class="s0">NPY_UINT8</span>
        <span class="s0">NPY_UINT16</span>
        <span class="s0">NPY_UINT32</span>
        <span class="s0">NPY_UINT64</span>
        <span class="s0">NPY_UINT128</span>
        <span class="s0">NPY_UINT256</span>
        <span class="s0">NPY_FLOAT16</span>
        <span class="s0">NPY_FLOAT32</span>
        <span class="s0">NPY_FLOAT64</span>
        <span class="s0">NPY_FLOAT80</span>
        <span class="s0">NPY_FLOAT96</span>
        <span class="s0">NPY_FLOAT128</span>
        <span class="s0">NPY_FLOAT256</span>
        <span class="s0">NPY_COMPLEX32</span>
        <span class="s0">NPY_COMPLEX64</span>
        <span class="s0">NPY_COMPLEX128</span>
        <span class="s0">NPY_COMPLEX160</span>
        <span class="s0">NPY_COMPLEX192</span>
        <span class="s0">NPY_COMPLEX256</span>
        <span class="s0">NPY_COMPLEX512</span>

        <span class="s0">NPY_INTP</span>

    <span class="s0">ctypedef enum NPY_ORDER:</span>
        <span class="s0">NPY_ANYORDER</span>
        <span class="s0">NPY_CORDER</span>
        <span class="s0">NPY_FORTRANORDER</span>
        <span class="s0">NPY_KEEPORDER</span>

    <span class="s0">ctypedef enum NPY_CASTING:</span>
        <span class="s0">NPY_NO_CASTING</span>
        <span class="s0">NPY_EQUIV_CASTING</span>
        <span class="s0">NPY_SAFE_CASTING</span>
        <span class="s0">NPY_SAME_KIND_CASTING</span>
        <span class="s0">NPY_UNSAFE_CASTING</span>

    <span class="s0">ctypedef enum NPY_CLIPMODE:</span>
        <span class="s0">NPY_CLIP</span>
        <span class="s0">NPY_WRAP</span>
        <span class="s0">NPY_RAISE</span>

    <span class="s0">ctypedef enum NPY_SCALARKIND:</span>
        <span class="s0">NPY_NOSCALAR,</span>
        <span class="s0">NPY_BOOL_SCALAR,</span>
        <span class="s0">NPY_INTPOS_SCALAR,</span>
        <span class="s0">NPY_INTNEG_SCALAR,</span>
        <span class="s0">NPY_FLOAT_SCALAR,</span>
        <span class="s0">NPY_COMPLEX_SCALAR,</span>
        <span class="s0">NPY_OBJECT_SCALAR</span>

    <span class="s0">ctypedef enum NPY_SORTKIND:</span>
        <span class="s0">NPY_QUICKSORT</span>
        <span class="s0">NPY_HEAPSORT</span>
        <span class="s0">NPY_MERGESORT</span>

    <span class="s0">ctypedef enum NPY_SEARCHSIDE:</span>
        <span class="s0">NPY_SEARCHLEFT</span>
        <span class="s0">NPY_SEARCHRIGHT</span>

    <span class="s0">enum:</span>
        <span class="s0"># DEPRECATED since NumPy 1.7 ! Do not use in new code!</span>
        <span class="s0">NPY_C_CONTIGUOUS</span>
        <span class="s0">NPY_F_CONTIGUOUS</span>
        <span class="s0">NPY_CONTIGUOUS</span>
        <span class="s0">NPY_FORTRAN</span>
        <span class="s0">NPY_OWNDATA</span>
        <span class="s0">NPY_FORCECAST</span>
        <span class="s0">NPY_ENSURECOPY</span>
        <span class="s0">NPY_ENSUREARRAY</span>
        <span class="s0">NPY_ELEMENTSTRIDES</span>
        <span class="s0">NPY_ALIGNED</span>
        <span class="s0">NPY_NOTSWAPPED</span>
        <span class="s0">NPY_WRITEABLE</span>
        <span class="s0">NPY_UPDATEIFCOPY</span>
        <span class="s0">NPY_ARR_HAS_DESCR</span>

        <span class="s0">NPY_BEHAVED</span>
        <span class="s0">NPY_BEHAVED_NS</span>
        <span class="s0">NPY_CARRAY</span>
        <span class="s0">NPY_CARRAY_RO</span>
        <span class="s0">NPY_FARRAY</span>
        <span class="s0">NPY_FARRAY_RO</span>
        <span class="s0">NPY_DEFAULT</span>

        <span class="s0">NPY_IN_ARRAY</span>
        <span class="s0">NPY_OUT_ARRAY</span>
        <span class="s0">NPY_INOUT_ARRAY</span>
        <span class="s0">NPY_IN_FARRAY</span>
        <span class="s0">NPY_OUT_FARRAY</span>
        <span class="s0">NPY_INOUT_FARRAY</span>

        <span class="s0">NPY_UPDATE_ALL</span>

    <span class="s0">enum:</span>
        <span class="s0"># Added in NumPy 1.7 to replace the deprecated enums above.</span>
        <span class="s0">NPY_ARRAY_C_CONTIGUOUS</span>
        <span class="s0">NPY_ARRAY_F_CONTIGUOUS</span>
        <span class="s0">NPY_ARRAY_OWNDATA</span>
        <span class="s0">NPY_ARRAY_FORCECAST</span>
        <span class="s0">NPY_ARRAY_ENSURECOPY</span>
        <span class="s0">NPY_ARRAY_ENSUREARRAY</span>
        <span class="s0">NPY_ARRAY_ELEMENTSTRIDES</span>
        <span class="s0">NPY_ARRAY_ALIGNED</span>
        <span class="s0">NPY_ARRAY_NOTSWAPPED</span>
        <span class="s0">NPY_ARRAY_WRITEABLE</span>
        <span class="s0">NPY_ARRAY_UPDATEIFCOPY</span>

        <span class="s0">NPY_ARRAY_BEHAVED</span>
        <span class="s0">NPY_ARRAY_BEHAVED_NS</span>
        <span class="s0">NPY_ARRAY_CARRAY</span>
        <span class="s0">NPY_ARRAY_CARRAY_RO</span>
        <span class="s0">NPY_ARRAY_FARRAY</span>
        <span class="s0">NPY_ARRAY_FARRAY_RO</span>
        <span class="s0">NPY_ARRAY_DEFAULT</span>

        <span class="s0">NPY_ARRAY_IN_ARRAY</span>
        <span class="s0">NPY_ARRAY_OUT_ARRAY</span>
        <span class="s0">NPY_ARRAY_INOUT_ARRAY</span>
        <span class="s0">NPY_ARRAY_IN_FARRAY</span>
        <span class="s0">NPY_ARRAY_OUT_FARRAY</span>
        <span class="s0">NPY_ARRAY_INOUT_FARRAY</span>

        <span class="s0">NPY_ARRAY_UPDATE_ALL</span>

    <span class="s0">cdef enum:</span>
        <span class="s0">NPY_MAXDIMS</span>

    <span class="s0">npy_intp NPY_MAX_ELSIZE</span>

    <span class="s0">ctypedef void (*PyArray_VectorUnaryFunc)(void *, void *, npy_intp, void *,  void *)</span>

    <span class="s0">ctypedef struct PyArray_ArrayDescr:</span>
        <span class="s0"># shape is a tuple, but Cython doesn't support &quot;tuple shape&quot;</span>
        <span class="s0"># inside a non-PyObject declaration, so we have to declare it</span>
        <span class="s0"># as just a PyObject*.</span>
        <span class="s0">PyObject* shape</span>

    <span class="s0">ctypedef struct PyArray_Descr:</span>
        <span class="s0">pass</span>

    <span class="s0">ctypedef class numpy.dtype [object PyArray_Descr, check_size ignore]:</span>
        <span class="s0"># Use PyDataType_* macros when possible, however there are no macros</span>
        <span class="s0"># for accessing some of the fields, so some are defined.</span>
        <span class="s0">cdef PyTypeObject* typeobj</span>
        <span class="s0">cdef char kind</span>
        <span class="s0">cdef char type</span>
        <span class="s0"># Numpy sometimes mutates this without warning (e.g. it'll</span>
        <span class="s0"># sometimes change &quot;|&quot; to &quot;&lt;&quot; in shared dtype objects on</span>
        <span class="s0"># little-endian machines). If this matters to you, use</span>
        <span class="s0"># PyArray_IsNativeByteOrder(dtype.byteorder) instead of</span>
        <span class="s0"># directly accessing this field.</span>
        <span class="s0">cdef char byteorder</span>
        <span class="s0">cdef char flags</span>
        <span class="s0">cdef int type_num</span>
        <span class="s0">cdef int itemsize &quot;elsize&quot;</span>
        <span class="s0">cdef int alignment</span>
        <span class="s0">cdef object fields</span>
        <span class="s0">cdef tuple names</span>
        <span class="s0"># Use PyDataType_HASSUBARRAY to test whether this field is</span>
        <span class="s0"># valid (the pointer can be NULL). Most users should access</span>
        <span class="s0"># this field via the inline helper method PyDataType_SHAPE.</span>
        <span class="s0">cdef PyArray_ArrayDescr* subarray</span>

    <span class="s0">ctypedef class numpy.flatiter [object PyArrayIterObject, check_size ignore]:</span>
        <span class="s0"># Use through macros</span>
        <span class="s0">pass</span>

    <span class="s0">ctypedef class numpy.broadcast [object PyArrayMultiIterObject, check_size ignore]:</span>
        <span class="s0"># Use through macros</span>
        <span class="s0">pass</span>

    <span class="s0">ctypedef struct PyArrayObject:</span>
        <span class="s0"># For use in situations where ndarray can't replace PyArrayObject*,</span>
        <span class="s0"># like PyArrayObject**.</span>
        <span class="s0">pass</span>

    <span class="s0">ctypedef class numpy.ndarray [object PyArrayObject, check_size ignore]:</span>
        <span class="s0">cdef __cythonbufferdefaults__ = {&quot;mode&quot;: &quot;strided&quot;}</span>

        <span class="s0"># NOTE: no field declarations since direct access is deprecated since NumPy 1.7</span>
        <span class="s0"># Instead, we use properties that map to the corresponding C-API functions.</span>

        <span class="s0">@property</span>
        <span class="s0">cdef inline PyObject* base(self) nogil:</span>
            <span class="s0">&quot;&quot;&quot;Returns a borrowed reference to the object owning the data/memory.</span>
            <span class="s0">&quot;&quot;&quot;</span>
            <span class="s0">return PyArray_BASE(self)</span>

        <span class="s0">@property</span>
        <span class="s0">cdef inline dtype descr(self):</span>
            <span class="s0">&quot;&quot;&quot;Returns an owned reference to the dtype of the array.</span>
            <span class="s0">&quot;&quot;&quot;</span>
            <span class="s0">return &lt;dtype&gt;PyArray_DESCR(self)</span>

        <span class="s0">@property</span>
        <span class="s0">cdef inline int ndim(self) nogil:</span>
            <span class="s0">&quot;&quot;&quot;Returns the number of dimensions in the array.</span>
            <span class="s0">&quot;&quot;&quot;</span>
            <span class="s0">return PyArray_NDIM(self)</span>

        <span class="s0">@property</span>
        <span class="s0">cdef inline npy_intp *shape(self) nogil:</span>
            <span class="s0">&quot;&quot;&quot;Returns a pointer to the dimensions/shape of the array.</span>
            <span class="s0">The number of elements matches the number of dimensions of the array (ndim).</span>
            <span class="s0">Can return NULL for 0-dimensional arrays.</span>
            <span class="s0">&quot;&quot;&quot;</span>
            <span class="s0">return PyArray_DIMS(self)</span>

        <span class="s0">@property</span>
        <span class="s0">cdef inline npy_intp *strides(self) nogil:</span>
            <span class="s0">&quot;&quot;&quot;Returns a pointer to the strides of the array.</span>
            <span class="s0">The number of elements matches the number of dimensions of the array (ndim).</span>
            <span class="s0">&quot;&quot;&quot;</span>
            <span class="s0">return PyArray_STRIDES(self)</span>

        <span class="s0">@property</span>
        <span class="s0">cdef inline npy_intp size(self) nogil:</span>
            <span class="s0">&quot;&quot;&quot;Returns the total size (in number of elements) of the array.</span>
            <span class="s0">&quot;&quot;&quot;</span>
            <span class="s0">return PyArray_SIZE(self)</span>

        <span class="s0">@property</span>
        <span class="s0">cdef inline char* data(self) nogil:</span>
            <span class="s0">&quot;&quot;&quot;The pointer to the data buffer as a char*.</span>
            <span class="s0">This is provided for legacy reasons to avoid direct struct field access.</span>
            <span class="s0">For new code that needs this access, you probably want to cast the result</span>
            <span class="s0">of `PyArray_DATA()` instead, which returns a 'void*'.</span>
            <span class="s0">&quot;&quot;&quot;</span>
            <span class="s0">return PyArray_BYTES(self)</span>

    <span class="s0">ctypedef unsigned char      npy_bool</span>

    <span class="s0">ctypedef signed char      npy_byte</span>
    <span class="s0">ctypedef signed short     npy_short</span>
    <span class="s0">ctypedef signed int       npy_int</span>
    <span class="s0">ctypedef signed long      npy_long</span>
    <span class="s0">ctypedef signed long long npy_longlong</span>

    <span class="s0">ctypedef unsigned char      npy_ubyte</span>
    <span class="s0">ctypedef unsigned short     npy_ushort</span>
    <span class="s0">ctypedef unsigned int       npy_uint</span>
    <span class="s0">ctypedef unsigned long      npy_ulong</span>
    <span class="s0">ctypedef unsigned long long npy_ulonglong</span>

    <span class="s0">ctypedef float        npy_float</span>
    <span class="s0">ctypedef double       npy_double</span>
    <span class="s0">ctypedef long double  npy_longdouble</span>

    <span class="s0">ctypedef signed char        npy_int8</span>
    <span class="s0">ctypedef signed short       npy_int16</span>
    <span class="s0">ctypedef signed int         npy_int32</span>
    <span class="s0">ctypedef signed long long   npy_int64</span>
    <span class="s0">ctypedef signed long long   npy_int96</span>
    <span class="s0">ctypedef signed long long   npy_int128</span>

    <span class="s0">ctypedef unsigned char      npy_uint8</span>
    <span class="s0">ctypedef unsigned short     npy_uint16</span>
    <span class="s0">ctypedef unsigned int       npy_uint32</span>
    <span class="s0">ctypedef unsigned long long npy_uint64</span>
    <span class="s0">ctypedef unsigned long long npy_uint96</span>
    <span class="s0">ctypedef unsigned long long npy_uint128</span>

    <span class="s0">ctypedef float        npy_float32</span>
    <span class="s0">ctypedef double       npy_float64</span>
    <span class="s0">ctypedef long double  npy_float80</span>
    <span class="s0">ctypedef long double  npy_float96</span>
    <span class="s0">ctypedef long double  npy_float128</span>

    <span class="s0">ctypedef struct npy_cfloat:</span>
        <span class="s0">float real</span>
        <span class="s0">float imag</span>

    <span class="s0">ctypedef struct npy_cdouble:</span>
        <span class="s0">double real</span>
        <span class="s0">double imag</span>

    <span class="s0">ctypedef struct npy_clongdouble:</span>
        <span class="s0">long double real</span>
        <span class="s0">long double imag</span>

    <span class="s0">ctypedef struct npy_complex64:</span>
        <span class="s0">float real</span>
        <span class="s0">float imag</span>

    <span class="s0">ctypedef struct npy_complex128:</span>
        <span class="s0">double real</span>
        <span class="s0">double imag</span>

    <span class="s0">ctypedef struct npy_complex160:</span>
        <span class="s0">long double real</span>
        <span class="s0">long double imag</span>

    <span class="s0">ctypedef struct npy_complex192:</span>
        <span class="s0">long double real</span>
        <span class="s0">long double imag</span>

    <span class="s0">ctypedef struct npy_complex256:</span>
        <span class="s0">long double real</span>
        <span class="s0">long double imag</span>

    <span class="s0">ctypedef struct PyArray_Dims:</span>
        <span class="s0">npy_intp *ptr</span>
        <span class="s0">int len</span>

    <span class="s0">int _import_array() except -1</span>
    <span class="s0"># A second definition so _import_array isn't marked as used when we use it here.</span>
    <span class="s0"># Do not use - subject to change any time.</span>
    <span class="s0">int __pyx_import_array &quot;_import_array&quot;() except -1</span>

    <span class="s0">#</span>
    <span class="s0"># Macros from ndarrayobject.h</span>
    <span class="s0">#</span>
    <span class="s0">bint PyArray_CHKFLAGS(ndarray m, int flags) nogil</span>
    <span class="s0">bint PyArray_IS_C_CONTIGUOUS(ndarray arr) nogil</span>
    <span class="s0">bint PyArray_IS_F_CONTIGUOUS(ndarray arr) nogil</span>
    <span class="s0">bint PyArray_ISCONTIGUOUS(ndarray m) nogil</span>
    <span class="s0">bint PyArray_ISWRITEABLE(ndarray m) nogil</span>
    <span class="s0">bint PyArray_ISALIGNED(ndarray m) nogil</span>

    <span class="s0">int PyArray_NDIM(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISONESEGMENT(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISFORTRAN(ndarray) nogil</span>
    <span class="s0">int PyArray_FORTRANIF(ndarray) nogil</span>

    <span class="s0">void* PyArray_DATA(ndarray) nogil</span>
    <span class="s0">char* PyArray_BYTES(ndarray) nogil</span>

    <span class="s0">npy_intp* PyArray_DIMS(ndarray) nogil</span>
    <span class="s0">npy_intp* PyArray_STRIDES(ndarray) nogil</span>
    <span class="s0">npy_intp PyArray_DIM(ndarray, size_t) nogil</span>
    <span class="s0">npy_intp PyArray_STRIDE(ndarray, size_t) nogil</span>

    <span class="s0">PyObject *PyArray_BASE(ndarray) nogil  # returns borrowed reference!</span>
    <span class="s0">PyArray_Descr *PyArray_DESCR(ndarray) nogil  # returns borrowed reference to dtype!</span>
    <span class="s0">PyArray_Descr *PyArray_DTYPE(ndarray) nogil  # returns borrowed reference to dtype! NP 1.7+ alias for descr.</span>
    <span class="s0">int PyArray_FLAGS(ndarray) nogil</span>
    <span class="s0">void PyArray_CLEARFLAGS(ndarray, int flags) nogil  # Added in NumPy 1.7</span>
    <span class="s0">void PyArray_ENABLEFLAGS(ndarray, int flags) nogil  # Added in NumPy 1.7</span>
    <span class="s0">npy_intp PyArray_ITEMSIZE(ndarray) nogil</span>
    <span class="s0">int PyArray_TYPE(ndarray arr) nogil</span>

    <span class="s0">object PyArray_GETITEM(ndarray arr, void *itemptr)</span>
    <span class="s0">int PyArray_SETITEM(ndarray arr, void *itemptr, object obj)</span>

    <span class="s0">bint PyTypeNum_ISBOOL(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISUNSIGNED(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISSIGNED(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISINTEGER(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISFLOAT(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISNUMBER(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISSTRING(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISCOMPLEX(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISPYTHON(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISFLEXIBLE(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISUSERDEF(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISEXTENDED(int) nogil</span>
    <span class="s0">bint PyTypeNum_ISOBJECT(int) nogil</span>

    <span class="s0">bint PyDataType_ISBOOL(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISUNSIGNED(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISSIGNED(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISINTEGER(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISFLOAT(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISNUMBER(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISSTRING(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISCOMPLEX(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISPYTHON(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISFLEXIBLE(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISUSERDEF(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISEXTENDED(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISOBJECT(dtype) nogil</span>
    <span class="s0">bint PyDataType_HASFIELDS(dtype) nogil</span>
    <span class="s0">bint PyDataType_HASSUBARRAY(dtype) nogil</span>

    <span class="s0">bint PyArray_ISBOOL(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISUNSIGNED(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISSIGNED(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISINTEGER(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISFLOAT(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISNUMBER(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISSTRING(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISCOMPLEX(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISPYTHON(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISFLEXIBLE(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISUSERDEF(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISEXTENDED(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISOBJECT(ndarray) nogil</span>
    <span class="s0">bint PyArray_HASFIELDS(ndarray) nogil</span>

    <span class="s0">bint PyArray_ISVARIABLE(ndarray) nogil</span>

    <span class="s0">bint PyArray_SAFEALIGNEDCOPY(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISNBO(char) nogil              # works on ndarray.byteorder</span>
    <span class="s0">bint PyArray_IsNativeByteOrder(char) nogil  # works on ndarray.byteorder</span>
    <span class="s0">bint PyArray_ISNOTSWAPPED(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISBYTESWAPPED(ndarray) nogil</span>

    <span class="s0">bint PyArray_FLAGSWAP(ndarray, int) nogil</span>

    <span class="s0">bint PyArray_ISCARRAY(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISCARRAY_RO(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISFARRAY(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISFARRAY_RO(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISBEHAVED(ndarray) nogil</span>
    <span class="s0">bint PyArray_ISBEHAVED_RO(ndarray) nogil</span>


    <span class="s0">bint PyDataType_ISNOTSWAPPED(dtype) nogil</span>
    <span class="s0">bint PyDataType_ISBYTESWAPPED(dtype) nogil</span>

    <span class="s0">bint PyArray_DescrCheck(object)</span>

    <span class="s0">bint PyArray_Check(object)</span>
    <span class="s0">bint PyArray_CheckExact(object)</span>

    <span class="s0"># Cannot be supported due to out arg:</span>
    <span class="s0"># bint PyArray_HasArrayInterfaceType(object, dtype, object, object&amp;)</span>
    <span class="s0"># bint PyArray_HasArrayInterface(op, out)</span>


    <span class="s0">bint PyArray_IsZeroDim(object)</span>
    <span class="s0"># Cannot be supported due to ## ## in macro:</span>
    <span class="s0"># bint PyArray_IsScalar(object, verbatim work)</span>
    <span class="s0">bint PyArray_CheckScalar(object)</span>
    <span class="s0">bint PyArray_IsPythonNumber(object)</span>
    <span class="s0">bint PyArray_IsPythonScalar(object)</span>
    <span class="s0">bint PyArray_IsAnyScalar(object)</span>
    <span class="s0">bint PyArray_CheckAnyScalar(object)</span>

    <span class="s0">ndarray PyArray_GETCONTIGUOUS(ndarray)</span>
    <span class="s0">bint PyArray_SAMESHAPE(ndarray, ndarray) nogil</span>
    <span class="s0">npy_intp PyArray_SIZE(ndarray) nogil</span>
    <span class="s0">npy_intp PyArray_NBYTES(ndarray) nogil</span>

    <span class="s0">object PyArray_FROM_O(object)</span>
    <span class="s0">object PyArray_FROM_OF(object m, int flags)</span>
    <span class="s0">object PyArray_FROM_OT(object m, int type)</span>
    <span class="s0">object PyArray_FROM_OTF(object m, int type, int flags)</span>
    <span class="s0">object PyArray_FROMANY(object m, int type, int min, int max, int flags)</span>
    <span class="s0">object PyArray_ZEROS(int nd, npy_intp* dims, int type, int fortran)</span>
    <span class="s0">object PyArray_EMPTY(int nd, npy_intp* dims, int type, int fortran)</span>
    <span class="s0">void PyArray_FILLWBYTE(object, int val)</span>
    <span class="s0">npy_intp PyArray_REFCOUNT(object)</span>
    <span class="s0">object PyArray_ContiguousFromAny(op, int, int min_depth, int max_depth)</span>
    <span class="s0">unsigned char PyArray_EquivArrTypes(ndarray a1, ndarray a2)</span>
    <span class="s0">bint PyArray_EquivByteorders(int b1, int b2) nogil</span>
    <span class="s0">object PyArray_SimpleNew(int nd, npy_intp* dims, int typenum)</span>
    <span class="s0">object PyArray_SimpleNewFromData(int nd, npy_intp* dims, int typenum, void* data)</span>
    <span class="s0">#object PyArray_SimpleNewFromDescr(int nd, npy_intp* dims, dtype descr)</span>
    <span class="s0">object PyArray_ToScalar(void* data, ndarray arr)</span>

    <span class="s0">void* PyArray_GETPTR1(ndarray m, npy_intp i) nogil</span>
    <span class="s0">void* PyArray_GETPTR2(ndarray m, npy_intp i, npy_intp j) nogil</span>
    <span class="s0">void* PyArray_GETPTR3(ndarray m, npy_intp i, npy_intp j, npy_intp k) nogil</span>
    <span class="s0">void* PyArray_GETPTR4(ndarray m, npy_intp i, npy_intp j, npy_intp k, npy_intp l) nogil</span>

    <span class="s0">void PyArray_XDECREF_ERR(ndarray)</span>
    <span class="s0"># Cannot be supported due to out arg</span>
    <span class="s0"># void PyArray_DESCR_REPLACE(descr)</span>


    <span class="s0">object PyArray_Copy(ndarray)</span>
    <span class="s0">object PyArray_FromObject(object op, int type, int min_depth, int max_depth)</span>
    <span class="s0">object PyArray_ContiguousFromObject(object op, int type, int min_depth, int max_depth)</span>
    <span class="s0">object PyArray_CopyFromObject(object op, int type, int min_depth, int max_depth)</span>

    <span class="s0">object PyArray_Cast(ndarray mp, int type_num)</span>
    <span class="s0">object PyArray_Take(ndarray ap, object items, int axis)</span>
    <span class="s0">object PyArray_Put(ndarray ap, object items, object values)</span>

    <span class="s0">void PyArray_ITER_RESET(flatiter it) nogil</span>
    <span class="s0">void PyArray_ITER_NEXT(flatiter it) nogil</span>
    <span class="s0">void PyArray_ITER_GOTO(flatiter it, npy_intp* destination) nogil</span>
    <span class="s0">void PyArray_ITER_GOTO1D(flatiter it, npy_intp ind) nogil</span>
    <span class="s0">void* PyArray_ITER_DATA(flatiter it) nogil</span>
    <span class="s0">bint PyArray_ITER_NOTDONE(flatiter it) nogil</span>

    <span class="s0">void PyArray_MultiIter_RESET(broadcast multi) nogil</span>
    <span class="s0">void PyArray_MultiIter_NEXT(broadcast multi) nogil</span>
    <span class="s0">void PyArray_MultiIter_GOTO(broadcast multi, npy_intp dest) nogil</span>
    <span class="s0">void PyArray_MultiIter_GOTO1D(broadcast multi, npy_intp ind) nogil</span>
    <span class="s0">void* PyArray_MultiIter_DATA(broadcast multi, npy_intp i) nogil</span>
    <span class="s0">void PyArray_MultiIter_NEXTi(broadcast multi, npy_intp i) nogil</span>
    <span class="s0">bint PyArray_MultiIter_NOTDONE(broadcast multi) nogil</span>

    <span class="s0"># Functions from __multiarray_api.h</span>

    <span class="s0"># Functions taking dtype and returning object/ndarray are disabled</span>
    <span class="s0"># for now as they steal dtype references. I'm conservative and disable</span>
    <span class="s0"># more than is probably needed until it can be checked further.</span>
    <span class="s0">int PyArray_SetNumericOps        (object)</span>
    <span class="s0">object PyArray_GetNumericOps ()</span>
    <span class="s0">int PyArray_INCREF (ndarray)</span>
    <span class="s0">int PyArray_XDECREF (ndarray)</span>
    <span class="s0">void PyArray_SetStringFunction (object, int)</span>
    <span class="s0">dtype PyArray_DescrFromType (int)</span>
    <span class="s0">object PyArray_TypeObjectFromType (int)</span>
    <span class="s0">char * PyArray_Zero (ndarray)</span>
    <span class="s0">char * PyArray_One (ndarray)</span>
    <span class="s0">#object PyArray_CastToType (ndarray, dtype, int)</span>
    <span class="s0">int PyArray_CastTo (ndarray, ndarray)</span>
    <span class="s0">int PyArray_CastAnyTo (ndarray, ndarray)</span>
    <span class="s0">int PyArray_CanCastSafely (int, int)</span>
    <span class="s0">npy_bool PyArray_CanCastTo (dtype, dtype)</span>
    <span class="s0">int PyArray_ObjectType (object, int)</span>
    <span class="s0">dtype PyArray_DescrFromObject (object, dtype)</span>
    <span class="s0">#ndarray* PyArray_ConvertToCommonType (object, int *)</span>
    <span class="s0">dtype PyArray_DescrFromScalar (object)</span>
    <span class="s0">dtype PyArray_DescrFromTypeObject (object)</span>
    <span class="s0">npy_intp PyArray_Size (object)</span>
    <span class="s0">#object PyArray_Scalar (void *, dtype, object)</span>
    <span class="s0">#object PyArray_FromScalar (object, dtype)</span>
    <span class="s0">void PyArray_ScalarAsCtype (object, void *)</span>
    <span class="s0">#int PyArray_CastScalarToCtype (object, void *, dtype)</span>
    <span class="s0">#int PyArray_CastScalarDirect (object, dtype, void *, int)</span>
    <span class="s0">object PyArray_ScalarFromObject (object)</span>
    <span class="s0">#PyArray_VectorUnaryFunc * PyArray_GetCastFunc (dtype, int)</span>
    <span class="s0">object PyArray_FromDims (int, int *, int)</span>
    <span class="s0">#object PyArray_FromDimsAndDataAndDescr (int, int *, dtype, char *)</span>
    <span class="s0">#object PyArray_FromAny (object, dtype, int, int, int, object)</span>
    <span class="s0">object PyArray_EnsureArray (object)</span>
    <span class="s0">object PyArray_EnsureAnyArray (object)</span>
    <span class="s0">#object PyArray_FromFile (stdio.FILE *, dtype, npy_intp, char *)</span>
    <span class="s0">#object PyArray_FromString (char *, npy_intp, dtype, npy_intp, char *)</span>
    <span class="s0">#object PyArray_FromBuffer (object, dtype, npy_intp, npy_intp)</span>
    <span class="s0">#object PyArray_FromIter (object, dtype, npy_intp)</span>
    <span class="s0">object PyArray_Return (ndarray)</span>
    <span class="s0">#object PyArray_GetField (ndarray, dtype, int)</span>
    <span class="s0">#int PyArray_SetField (ndarray, dtype, int, object)</span>
    <span class="s0">object PyArray_Byteswap (ndarray, npy_bool)</span>
    <span class="s0">object PyArray_Resize (ndarray, PyArray_Dims *, int, NPY_ORDER)</span>
    <span class="s0">int PyArray_MoveInto (ndarray, ndarray)</span>
    <span class="s0">int PyArray_CopyInto (ndarray, ndarray)</span>
    <span class="s0">int PyArray_CopyAnyInto (ndarray, ndarray)</span>
    <span class="s0">int PyArray_CopyObject (ndarray, object)</span>
    <span class="s0">object PyArray_NewCopy (ndarray, NPY_ORDER)</span>
    <span class="s0">object PyArray_ToList (ndarray)</span>
    <span class="s0">object PyArray_ToString (ndarray, NPY_ORDER)</span>
    <span class="s0">int PyArray_ToFile (ndarray, stdio.FILE *, char *, char *)</span>
    <span class="s0">int PyArray_Dump (object, object, int)</span>
    <span class="s0">object PyArray_Dumps (object, int)</span>
    <span class="s0">int PyArray_ValidType (int)</span>
    <span class="s0">void PyArray_UpdateFlags (ndarray, int)</span>
    <span class="s0">object PyArray_New (type, int, npy_intp *, int, npy_intp *, void *, int, int, object)</span>
    <span class="s0">#object PyArray_NewFromDescr (type, dtype, int, npy_intp *, npy_intp *, void *, int, object)</span>
    <span class="s0">#dtype PyArray_DescrNew (dtype)</span>
    <span class="s0">dtype PyArray_DescrNewFromType (int)</span>
    <span class="s0">double PyArray_GetPriority (object, double)</span>
    <span class="s0">object PyArray_IterNew (object)</span>
    <span class="s0">object PyArray_MultiIterNew (int, ...)</span>

    <span class="s0">int PyArray_PyIntAsInt (object)</span>
    <span class="s0">npy_intp PyArray_PyIntAsIntp (object)</span>
    <span class="s0">int PyArray_Broadcast (broadcast)</span>
    <span class="s0">void PyArray_FillObjectArray (ndarray, object)</span>
    <span class="s0">int PyArray_FillWithScalar (ndarray, object)</span>
    <span class="s0">npy_bool PyArray_CheckStrides (int, int, npy_intp, npy_intp, npy_intp *, npy_intp *)</span>
    <span class="s0">dtype PyArray_DescrNewByteorder (dtype, char)</span>
    <span class="s0">object PyArray_IterAllButAxis (object, int *)</span>
    <span class="s0">#object PyArray_CheckFromAny (object, dtype, int, int, int, object)</span>
    <span class="s0">#object PyArray_FromArray (ndarray, dtype, int)</span>
    <span class="s0">object PyArray_FromInterface (object)</span>
    <span class="s0">object PyArray_FromStructInterface (object)</span>
    <span class="s0">#object PyArray_FromArrayAttr (object, dtype, object)</span>
    <span class="s0">#NPY_SCALARKIND PyArray_ScalarKind (int, ndarray*)</span>
    <span class="s0">int PyArray_CanCoerceScalar (int, int, NPY_SCALARKIND)</span>
    <span class="s0">object PyArray_NewFlagsObject (object)</span>
    <span class="s0">npy_bool PyArray_CanCastScalar (type, type)</span>
    <span class="s0">#int PyArray_CompareUCS4 (npy_ucs4 *, npy_ucs4 *, register size_t)</span>
    <span class="s0">int PyArray_RemoveSmallest (broadcast)</span>
    <span class="s0">int PyArray_ElementStrides (object)</span>
    <span class="s0">void PyArray_Item_INCREF (char *, dtype)</span>
    <span class="s0">void PyArray_Item_XDECREF (char *, dtype)</span>
    <span class="s0">object PyArray_FieldNames (object)</span>
    <span class="s0">object PyArray_Transpose (ndarray, PyArray_Dims *)</span>
    <span class="s0">object PyArray_TakeFrom (ndarray, object, int, ndarray, NPY_CLIPMODE)</span>
    <span class="s0">object PyArray_PutTo (ndarray, object, object, NPY_CLIPMODE)</span>
    <span class="s0">object PyArray_PutMask (ndarray, object, object)</span>
    <span class="s0">object PyArray_Repeat (ndarray, object, int)</span>
    <span class="s0">object PyArray_Choose (ndarray, object, ndarray, NPY_CLIPMODE)</span>
    <span class="s0">int PyArray_Sort (ndarray, int, NPY_SORTKIND)</span>
    <span class="s0">object PyArray_ArgSort (ndarray, int, NPY_SORTKIND)</span>
    <span class="s0">object PyArray_SearchSorted (ndarray, object, NPY_SEARCHSIDE, PyObject *)</span>
    <span class="s0">object PyArray_ArgMax (ndarray, int, ndarray)</span>
    <span class="s0">object PyArray_ArgMin (ndarray, int, ndarray)</span>
    <span class="s0">object PyArray_Reshape (ndarray, object)</span>
    <span class="s0">object PyArray_Newshape (ndarray, PyArray_Dims *, NPY_ORDER)</span>
    <span class="s0">object PyArray_Squeeze (ndarray)</span>
    <span class="s0">#object PyArray_View (ndarray, dtype, type)</span>
    <span class="s0">object PyArray_SwapAxes (ndarray, int, int)</span>
    <span class="s0">object PyArray_Max (ndarray, int, ndarray)</span>
    <span class="s0">object PyArray_Min (ndarray, int, ndarray)</span>
    <span class="s0">object PyArray_Ptp (ndarray, int, ndarray)</span>
    <span class="s0">object PyArray_Mean (ndarray, int, int, ndarray)</span>
    <span class="s0">object PyArray_Trace (ndarray, int, int, int, int, ndarray)</span>
    <span class="s0">object PyArray_Diagonal (ndarray, int, int, int)</span>
    <span class="s0">object PyArray_Clip (ndarray, object, object, ndarray)</span>
    <span class="s0">object PyArray_Conjugate (ndarray, ndarray)</span>
    <span class="s0">object PyArray_Nonzero (ndarray)</span>
    <span class="s0">object PyArray_Std (ndarray, int, int, ndarray, int)</span>
    <span class="s0">object PyArray_Sum (ndarray, int, int, ndarray)</span>
    <span class="s0">object PyArray_CumSum (ndarray, int, int, ndarray)</span>
    <span class="s0">object PyArray_Prod (ndarray, int, int, ndarray)</span>
    <span class="s0">object PyArray_CumProd (ndarray, int, int, ndarray)</span>
    <span class="s0">object PyArray_All (ndarray, int, ndarray)</span>
    <span class="s0">object PyArray_Any (ndarray, int, ndarray)</span>
    <span class="s0">object PyArray_Compress (ndarray, object, int, ndarray)</span>
    <span class="s0">object PyArray_Flatten (ndarray, NPY_ORDER)</span>
    <span class="s0">object PyArray_Ravel (ndarray, NPY_ORDER)</span>
    <span class="s0">npy_intp PyArray_MultiplyList (npy_intp *, int)</span>
    <span class="s0">int PyArray_MultiplyIntList (int *, int)</span>
    <span class="s0">void * PyArray_GetPtr (ndarray, npy_intp*)</span>
    <span class="s0">int PyArray_CompareLists (npy_intp *, npy_intp *, int)</span>
    <span class="s0">#int PyArray_AsCArray (object*, void *, npy_intp *, int, dtype)</span>
    <span class="s0">#int PyArray_As1D (object*, char **, int *, int)</span>
    <span class="s0">#int PyArray_As2D (object*, char ***, int *, int *, int)</span>
    <span class="s0">int PyArray_Free (object, void *)</span>
    <span class="s0">#int PyArray_Converter (object, object*)</span>
    <span class="s0">int PyArray_IntpFromSequence (object, npy_intp *, int)</span>
    <span class="s0">object PyArray_Concatenate (object, int)</span>
    <span class="s0">object PyArray_InnerProduct (object, object)</span>
    <span class="s0">object PyArray_MatrixProduct (object, object)</span>
    <span class="s0">object PyArray_CopyAndTranspose (object)</span>
    <span class="s0">object PyArray_Correlate (object, object, int)</span>
    <span class="s0">int PyArray_TypestrConvert (int, int)</span>
    <span class="s0">#int PyArray_DescrConverter (object, dtype*)</span>
    <span class="s0">#int PyArray_DescrConverter2 (object, dtype*)</span>
    <span class="s0">int PyArray_IntpConverter (object, PyArray_Dims *)</span>
    <span class="s0">#int PyArray_BufferConverter (object, chunk)</span>
    <span class="s0">int PyArray_AxisConverter (object, int *)</span>
    <span class="s0">int PyArray_BoolConverter (object, npy_bool *)</span>
    <span class="s0">int PyArray_ByteorderConverter (object, char *)</span>
    <span class="s0">int PyArray_OrderConverter (object, NPY_ORDER *)</span>
    <span class="s0">unsigned char PyArray_EquivTypes (dtype, dtype)</span>
    <span class="s0">#object PyArray_Zeros (int, npy_intp *, dtype, int)</span>
    <span class="s0">#object PyArray_Empty (int, npy_intp *, dtype, int)</span>
    <span class="s0">object PyArray_Where (object, object, object)</span>
    <span class="s0">object PyArray_Arange (double, double, double, int)</span>
    <span class="s0">#object PyArray_ArangeObj (object, object, object, dtype)</span>
    <span class="s0">int PyArray_SortkindConverter (object, NPY_SORTKIND *)</span>
    <span class="s0">object PyArray_LexSort (object, int)</span>
    <span class="s0">object PyArray_Round (ndarray, int, ndarray)</span>
    <span class="s0">unsigned char PyArray_EquivTypenums (int, int)</span>
    <span class="s0">int PyArray_RegisterDataType (dtype)</span>
    <span class="s0">int PyArray_RegisterCastFunc (dtype, int, PyArray_VectorUnaryFunc *)</span>
    <span class="s0">int PyArray_RegisterCanCast (dtype, int, NPY_SCALARKIND)</span>
    <span class="s0">#void PyArray_InitArrFuncs (PyArray_ArrFuncs *)</span>
    <span class="s0">object PyArray_IntTupleFromIntp (int, npy_intp *)</span>
    <span class="s0">int PyArray_TypeNumFromName (char *)</span>
    <span class="s0">int PyArray_ClipmodeConverter (object, NPY_CLIPMODE *)</span>
    <span class="s0">#int PyArray_OutputConverter (object, ndarray*)</span>
    <span class="s0">object PyArray_BroadcastToShape (object, npy_intp *, int)</span>
    <span class="s0">void _PyArray_SigintHandler (int)</span>
    <span class="s0">void* _PyArray_GetSigintBuf ()</span>
    <span class="s0">#int PyArray_DescrAlignConverter (object, dtype*)</span>
    <span class="s0">#int PyArray_DescrAlignConverter2 (object, dtype*)</span>
    <span class="s0">int PyArray_SearchsideConverter (object, void *)</span>
    <span class="s0">object PyArray_CheckAxis (ndarray, int *, int)</span>
    <span class="s0">npy_intp PyArray_OverflowMultiplyList (npy_intp *, int)</span>
    <span class="s0">int PyArray_CompareString (char *, char *, size_t)</span>
    <span class="s0">int PyArray_SetBaseObject(ndarray, base)  # NOTE: steals a reference to base! Use &quot;set_array_base()&quot; instead.</span>


<span class="s0"># Typedefs that matches the runtime dtype objects in</span>
<span class="s0"># the numpy module.</span>

<span class="s0"># The ones that are commented out needs an IFDEF function</span>
<span class="s0"># in Cython to enable them only on the right systems.</span>

<span class="s0">ctypedef npy_int8       int8_t</span>
<span class="s0">ctypedef npy_int16      int16_t</span>
<span class="s0">ctypedef npy_int32      int32_t</span>
<span class="s0">ctypedef npy_int64      int64_t</span>
<span class="s0">#ctypedef npy_int96      int96_t</span>
<span class="s0">#ctypedef npy_int128     int128_t</span>

<span class="s0">ctypedef npy_uint8      uint8_t</span>
<span class="s0">ctypedef npy_uint16     uint16_t</span>
<span class="s0">ctypedef npy_uint32     uint32_t</span>
<span class="s0">ctypedef npy_uint64     uint64_t</span>
<span class="s0">#ctypedef npy_uint96     uint96_t</span>
<span class="s0">#ctypedef npy_uint128    uint128_t</span>

<span class="s0">ctypedef npy_float32    float32_t</span>
<span class="s0">ctypedef npy_float64    float64_t</span>
<span class="s0">#ctypedef npy_float80    float80_t</span>
<span class="s0">#ctypedef npy_float128   float128_t</span>

<span class="s0">ctypedef float complex  complex64_t</span>
<span class="s0">ctypedef double complex complex128_t</span>

<span class="s0"># The int types are mapped a bit surprising --</span>
<span class="s0"># numpy.int corresponds to 'l' and numpy.long to 'q'</span>
<span class="s0">ctypedef npy_long       int_t</span>
<span class="s0">ctypedef npy_longlong   long_t</span>
<span class="s0">ctypedef npy_longlong   longlong_t</span>

<span class="s0">ctypedef npy_ulong      uint_t</span>
<span class="s0">ctypedef npy_ulonglong  ulong_t</span>
<span class="s0">ctypedef npy_ulonglong  ulonglong_t</span>

<span class="s0">ctypedef npy_intp       intp_t</span>
<span class="s0">ctypedef npy_uintp      uintp_t</span>

<span class="s0">ctypedef npy_double     float_t</span>
<span class="s0">ctypedef npy_double     double_t</span>
<span class="s0">ctypedef npy_longdouble longdouble_t</span>

<span class="s0">ctypedef npy_cfloat      cfloat_t</span>
<span class="s0">ctypedef npy_cdouble     cdouble_t</span>
<span class="s0">ctypedef npy_clongdouble clongdouble_t</span>

<span class="s0">ctypedef npy_cdouble     complex_t</span>

<span class="s0">cdef inline object PyArray_MultiIterNew1(a):</span>
    <span class="s0">return PyArray_MultiIterNew(1, &lt;void*&gt;a)</span>

<span class="s0">cdef inline object PyArray_MultiIterNew2(a, b):</span>
    <span class="s0">return PyArray_MultiIterNew(2, &lt;void*&gt;a, &lt;void*&gt;b)</span>

<span class="s0">cdef inline object PyArray_MultiIterNew3(a, b, c):</span>
    <span class="s0">return PyArray_MultiIterNew(3, &lt;void*&gt;a, &lt;void*&gt;b, &lt;void*&gt; c)</span>

<span class="s0">cdef inline object PyArray_MultiIterNew4(a, b, c, d):</span>
    <span class="s0">return PyArray_MultiIterNew(4, &lt;void*&gt;a, &lt;void*&gt;b, &lt;void*&gt;c, &lt;void*&gt; d)</span>

<span class="s0">cdef inline object PyArray_MultiIterNew5(a, b, c, d, e):</span>
    <span class="s0">return PyArray_MultiIterNew(5, &lt;void*&gt;a, &lt;void*&gt;b, &lt;void*&gt;c, &lt;void*&gt; d, &lt;void*&gt; e)</span>

<span class="s0">cdef inline tuple PyDataType_SHAPE(dtype d):</span>
    <span class="s0">if PyDataType_HASSUBARRAY(d):</span>
        <span class="s0">return &lt;tuple&gt;d.subarray.shape</span>
    <span class="s0">else:</span>
        <span class="s0">return ()</span>


<span class="s0">cdef extern from &quot;numpy/ndarrayobject.h&quot;:</span>
    <span class="s0">PyTypeObject PyTimedeltaArrType_Type</span>
    <span class="s0">PyTypeObject PyDatetimeArrType_Type</span>
    <span class="s0">ctypedef int64_t npy_timedelta</span>
    <span class="s0">ctypedef int64_t npy_datetime</span>

<span class="s0">cdef extern from &quot;numpy/ndarraytypes.h&quot;:</span>
    <span class="s0">ctypedef struct PyArray_DatetimeMetaData:</span>
        <span class="s0">NPY_DATETIMEUNIT base</span>
        <span class="s0">int64_t num</span>

<span class="s0">cdef extern from &quot;numpy/arrayscalars.h&quot;:</span>

    <span class="s0"># abstract types</span>
    <span class="s0">ctypedef class numpy.generic [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.number [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.integer [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.signedinteger [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.unsignedinteger [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.inexact [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.floating [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.complexfloating [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.flexible [object PyObject]:</span>
        <span class="s0">pass</span>
    <span class="s0">ctypedef class numpy.character [object PyObject]:</span>
        <span class="s0">pass</span>

    <span class="s0">ctypedef struct PyDatetimeScalarObject:</span>
        <span class="s0"># PyObject_HEAD</span>
        <span class="s0">npy_datetime obval</span>
        <span class="s0">PyArray_DatetimeMetaData obmeta</span>

    <span class="s0">ctypedef struct PyTimedeltaScalarObject:</span>
        <span class="s0"># PyObject_HEAD</span>
        <span class="s0">npy_timedelta obval</span>
        <span class="s0">PyArray_DatetimeMetaData obmeta</span>

    <span class="s0">ctypedef enum NPY_DATETIMEUNIT:</span>
        <span class="s0">NPY_FR_Y</span>
        <span class="s0">NPY_FR_M</span>
        <span class="s0">NPY_FR_W</span>
        <span class="s0">NPY_FR_D</span>
        <span class="s0">NPY_FR_B</span>
        <span class="s0">NPY_FR_h</span>
        <span class="s0">NPY_FR_m</span>
        <span class="s0">NPY_FR_s</span>
        <span class="s0">NPY_FR_ms</span>
        <span class="s0">NPY_FR_us</span>
        <span class="s0">NPY_FR_ns</span>
        <span class="s0">NPY_FR_ps</span>
        <span class="s0">NPY_FR_fs</span>
        <span class="s0">NPY_FR_as</span>


<span class="s0">#</span>
<span class="s0"># ufunc API</span>
<span class="s0">#</span>

<span class="s0">cdef extern from &quot;numpy/ufuncobject.h&quot;:</span>

    <span class="s0">ctypedef void (*PyUFuncGenericFunction) (char **, npy_intp *, npy_intp *, void *)</span>

    <span class="s0">ctypedef class numpy.ufunc [object PyUFuncObject, check_size ignore]:</span>
        <span class="s0">cdef:</span>
            <span class="s0">int nin, nout, nargs</span>
            <span class="s0">int identity</span>
            <span class="s0">PyUFuncGenericFunction *functions</span>
            <span class="s0">void **data</span>
            <span class="s0">int ntypes</span>
            <span class="s0">int check_return</span>
            <span class="s0">char *name</span>
            <span class="s0">char *types</span>
            <span class="s0">char *doc</span>
            <span class="s0">void *ptr</span>
            <span class="s0">PyObject *obj</span>
            <span class="s0">PyObject *userloops</span>

    <span class="s0">cdef enum:</span>
        <span class="s0">PyUFunc_Zero</span>
        <span class="s0">PyUFunc_One</span>
        <span class="s0">PyUFunc_None</span>
        <span class="s0">UFUNC_ERR_IGNORE</span>
        <span class="s0">UFUNC_ERR_WARN</span>
        <span class="s0">UFUNC_ERR_RAISE</span>
        <span class="s0">UFUNC_ERR_CALL</span>
        <span class="s0">UFUNC_ERR_PRINT</span>
        <span class="s0">UFUNC_ERR_LOG</span>
        <span class="s0">UFUNC_MASK_DIVIDEBYZERO</span>
        <span class="s0">UFUNC_MASK_OVERFLOW</span>
        <span class="s0">UFUNC_MASK_UNDERFLOW</span>
        <span class="s0">UFUNC_MASK_INVALID</span>
        <span class="s0">UFUNC_SHIFT_DIVIDEBYZERO</span>
        <span class="s0">UFUNC_SHIFT_OVERFLOW</span>
        <span class="s0">UFUNC_SHIFT_UNDERFLOW</span>
        <span class="s0">UFUNC_SHIFT_INVALID</span>
        <span class="s0">UFUNC_FPE_DIVIDEBYZERO</span>
        <span class="s0">UFUNC_FPE_OVERFLOW</span>
        <span class="s0">UFUNC_FPE_UNDERFLOW</span>
        <span class="s0">UFUNC_FPE_INVALID</span>
        <span class="s0">UFUNC_ERR_DEFAULT</span>
        <span class="s0">UFUNC_ERR_DEFAULT2</span>

    <span class="s0">object PyUFunc_FromFuncAndData(PyUFuncGenericFunction *,</span>
          <span class="s0">void **, char *, int, int, int, int, char *, char *, int)</span>
    <span class="s0">int PyUFunc_RegisterLoopForType(ufunc, int,</span>
                                    <span class="s0">PyUFuncGenericFunction, int *, void *)</span>
    <span class="s0">void PyUFunc_f_f_As_d_d \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_d_d \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_f_f \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_g_g \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_F_F_As_D_D \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_F_F \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_D_D \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_G_G \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_O_O \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_ff_f_As_dd_d \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_ff_f \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_dd_d \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_gg_g \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_FF_F_As_DD_D \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_DD_D \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_FF_F \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_GG_G \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_OO_O \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_O_O_method \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_OO_O_method \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">void PyUFunc_On_Om \</span>
         <span class="s0">(char **, npy_intp *, npy_intp *, void *)</span>
    <span class="s0">int PyUFunc_GetPyValues \</span>
        <span class="s0">(char *, int *, int *, PyObject **)</span>
    <span class="s0">int PyUFunc_checkfperr \</span>
           <span class="s0">(int, PyObject *, int *)</span>
    <span class="s0">void PyUFunc_clearfperr()</span>
    <span class="s0">int PyUFunc_getfperr()</span>
    <span class="s0">int PyUFunc_handlefperr \</span>
        <span class="s0">(int, PyObject *, int, int *)</span>
    <span class="s0">int PyUFunc_ReplaceLoopBySignature \</span>
        <span class="s0">(ufunc, PyUFuncGenericFunction, int *, PyUFuncGenericFunction *)</span>
    <span class="s0">object PyUFunc_FromFuncAndDataAndSignature \</span>
             <span class="s0">(PyUFuncGenericFunction *, void **, char *, int, int, int,</span>
              <span class="s0">int, char *, char *, int, char *)</span>

    <span class="s0">int _import_umath() except -1</span>

<span class="s0">cdef inline void set_array_base(ndarray arr, object base):</span>
    <span class="s0">Py_INCREF(base) # important to do this before stealing the reference below!</span>
    <span class="s0">PyArray_SetBaseObject(arr, base)</span>

<span class="s0">cdef inline object get_array_base(ndarray arr):</span>
    <span class="s0">base = PyArray_BASE(arr)</span>
    <span class="s0">if base is NULL:</span>
        <span class="s0">return None</span>
    <span class="s0">return &lt;object&gt;base</span>

<span class="s0"># Versions of the import_* functions which are more suitable for</span>
<span class="s0"># Cython code.</span>
<span class="s0">cdef inline int import_array() except -1:</span>
    <span class="s0">try:</span>
        <span class="s0">__pyx_import_array()</span>
    <span class="s0">except Exception:</span>
        <span class="s0">raise ImportError(&quot;numpy.core.multiarray failed to import&quot;)</span>

<span class="s0">cdef inline int import_umath() except -1:</span>
    <span class="s0">try:</span>
        <span class="s0">_import_umath()</span>
    <span class="s0">except Exception:</span>
        <span class="s0">raise ImportError(&quot;numpy.core.umath failed to import&quot;)</span>

<span class="s0">cdef inline int import_ufunc() except -1:</span>
    <span class="s0">try:</span>
        <span class="s0">_import_umath()</span>
    <span class="s0">except Exception:</span>
        <span class="s0">raise ImportError(&quot;numpy.core.umath failed to import&quot;)</span>


<span class="s0">cdef inline bint is_timedelta64_object(object obj):</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">Cython equivalent of `isinstance(obj, np.timedelta64)`</span>

    <span class="s0">Parameters</span>
    <span class="s0">----------</span>
    <span class="s0">obj : object</span>

    <span class="s0">Returns</span>
    <span class="s0">-------</span>
    <span class="s0">bool</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">return PyObject_TypeCheck(obj, &amp;PyTimedeltaArrType_Type)</span>


<span class="s0">cdef inline bint is_datetime64_object(object obj):</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">Cython equivalent of `isinstance(obj, np.datetime64)`</span>

    <span class="s0">Parameters</span>
    <span class="s0">----------</span>
    <span class="s0">obj : object</span>

    <span class="s0">Returns</span>
    <span class="s0">-------</span>
    <span class="s0">bool</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">return PyObject_TypeCheck(obj, &amp;PyDatetimeArrType_Type)</span>


<span class="s0">cdef inline npy_datetime get_datetime64_value(object obj) nogil:</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">returns the int64 value underlying scalar numpy datetime64 object</span>

    <span class="s0">Note that to interpret this as a datetime, the corresponding unit is</span>
    <span class="s0">also needed.  That can be found using `get_datetime64_unit`.</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">return (&lt;PyDatetimeScalarObject*&gt;obj).obval</span>


<span class="s0">cdef inline npy_timedelta get_timedelta64_value(object obj) nogil:</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">returns the int64 value underlying scalar numpy timedelta64 object</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">return (&lt;PyTimedeltaScalarObject*&gt;obj).obval</span>


<span class="s0">cdef inline NPY_DATETIMEUNIT get_datetime64_unit(object obj) nogil:</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">returns the unit part of the dtype for a numpy datetime64 object.</span>
    <span class="s0">&quot;&quot;&quot;</span>
    <span class="s0">return &lt;NPY_DATETIMEUNIT&gt;(&lt;PyDatetimeScalarObject*&gt;obj).obmeta.base</span>
</pre>
</body>
</html>