<html>
<head>
<title>hashtable.pyi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #808080;}
.s3 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
hashtable.pyi</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">typing </span><span class="s0">import </span><span class="s1">(</span>
    <span class="s1">Hashable</span><span class="s0">,</span>
    <span class="s1">Literal</span><span class="s0">,</span>
<span class="s1">)</span>

<span class="s0">import </span><span class="s1">numpy </span><span class="s0">as </span><span class="s1">np</span>

<span class="s0">from </span><span class="s1">pandas._typing </span><span class="s0">import </span><span class="s1">npt</span>

<span class="s0">def </span><span class="s1">unique_label_indices(</span>
    <span class="s1">labels: np.ndarray</span><span class="s0">,  </span><span class="s2"># const int64_t[:]</span>
<span class="s1">) -&gt; np.ndarray: ...</span>

<span class="s0">class </span><span class="s1">Factorizer:</span>
    <span class="s1">count: int</span>
    <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">size_hint: int): ...</span>
    <span class="s0">def </span><span class="s1">get_count(self) -&gt; int: ...</span>

<span class="s0">class </span><span class="s1">ObjectFactorizer(Factorizer):</span>
    <span class="s1">table: PyObjectHashTable</span>
    <span class="s1">uniques: ObjectVector</span>
    <span class="s0">def </span><span class="s1">factorize(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: npt.NDArray[np.object_]</span><span class="s0">,</span>
        <span class="s1">sort: bool = ...</span><span class="s0">,</span>
        <span class="s1">na_sentinel=...</span><span class="s0">,</span>
        <span class="s1">na_value=...</span><span class="s0">,</span>
    <span class="s1">) -&gt; npt.NDArray[np.intp]: ...</span>

<span class="s0">class </span><span class="s1">Int64Factorizer(Factorizer):</span>
    <span class="s1">table: Int64HashTable</span>
    <span class="s1">uniques: Int64Vector</span>
    <span class="s0">def </span><span class="s1">factorize(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># const int64_t[:]</span>
        <span class="s1">sort: bool = ...</span><span class="s0">,</span>
        <span class="s1">na_sentinel=...</span><span class="s0">,</span>
        <span class="s1">na_value=...</span><span class="s0">,</span>
    <span class="s1">) -&gt; npt.NDArray[np.intp]: ...</span>

<span class="s0">class </span><span class="s1">Int64Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.int64]: ...</span>

<span class="s0">class </span><span class="s1">Int32Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.int32]: ...</span>

<span class="s0">class </span><span class="s1">Int16Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.int16]: ...</span>

<span class="s0">class </span><span class="s1">Int8Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.int8]: ...</span>

<span class="s0">class </span><span class="s1">UInt64Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.uint64]: ...</span>

<span class="s0">class </span><span class="s1">UInt32Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.uint32]: ...</span>

<span class="s0">class </span><span class="s1">UInt16Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.uint16]: ...</span>

<span class="s0">class </span><span class="s1">UInt8Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.uint8]: ...</span>

<span class="s0">class </span><span class="s1">Float64Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.float64]: ...</span>

<span class="s0">class </span><span class="s1">Float32Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.float32]: ...</span>

<span class="s0">class </span><span class="s1">Complex128Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.complex128]: ...</span>

<span class="s0">class </span><span class="s1">Complex64Vector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.complex64]: ...</span>

<span class="s0">class </span><span class="s1">StringVector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.object_]: ...</span>

<span class="s0">class </span><span class="s1">ObjectVector:</span>
    <span class="s0">def </span><span class="s1">__init__(self): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">to_array(self) -&gt; npt.NDArray[np.object_]: ...</span>

<span class="s0">class </span><span class="s1">HashTable:</span>
    <span class="s2"># NB: The base HashTable class does _not_ actually have these methods;</span>
    <span class="s2">#  we are putting the here for the sake of mypy to avoid</span>
    <span class="s2">#  reproducing them in each subclass below.</span>
    <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">size_hint: int = ...): ...</span>
    <span class="s0">def </span><span class="s1">__len__(self) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">__contains__(self</span><span class="s0">, </span><span class="s1">key: Hashable) -&gt; bool: ...</span>
    <span class="s0">def </span><span class="s1">sizeof(self</span><span class="s0">, </span><span class="s1">deep: bool = ...) -&gt; int: ...</span>
    <span class="s0">def </span><span class="s1">get_state(self) -&gt; dict[str</span><span class="s0">, </span><span class="s1">int]: ...</span>
    <span class="s2"># TODO: `item` type is subclass-specific</span>
    <span class="s0">def </span><span class="s1">get_item(self</span><span class="s0">, </span><span class="s1">item): ...  </span><span class="s2"># TODO: return type?</span>
    <span class="s0">def </span><span class="s1">set_item(self</span><span class="s0">, </span><span class="s1">item) -&gt; </span><span class="s0">None</span><span class="s1">: ...</span>
    <span class="s2"># FIXME: we don't actually have this for StringHashTable or ObjectHashTable?</span>
    <span class="s0">def </span><span class="s1">map(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">keys: np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># const int64_t[:]</span>
    <span class="s1">) -&gt; </span><span class="s0">None</span><span class="s1">: ...</span>
    <span class="s0">def </span><span class="s1">map_locations(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
    <span class="s1">) -&gt; </span><span class="s0">None</span><span class="s1">: ...</span>
    <span class="s0">def </span><span class="s1">lookup(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
    <span class="s1">) -&gt; npt.NDArray[np.intp]: ...</span>
    <span class="s0">def </span><span class="s1">get_labels(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
        <span class="s1">uniques</span><span class="s0">,  </span><span class="s2"># SubclassTypeVector</span>
        <span class="s1">count_prior: int = ...</span><span class="s0">,</span>
        <span class="s1">na_sentinel: int = ...</span><span class="s0">,</span>
        <span class="s1">na_value: object = ...</span><span class="s0">,</span>
    <span class="s1">) -&gt; npt.NDArray[np.intp]: ...</span>
    <span class="s0">def </span><span class="s1">unique(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
        <span class="s1">return_inverse: bool = ...</span><span class="s0">,</span>
    <span class="s1">) -&gt; tuple[</span>
        <span class="s1">np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
        <span class="s1">npt.NDArray[np.intp]</span><span class="s0">,</span>
    <span class="s1">] | np.ndarray: ...  </span><span class="s2"># np.ndarray[subclass-specific]</span>
    <span class="s0">def </span><span class="s1">_unique(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
        <span class="s1">uniques</span><span class="s0">,  </span><span class="s2"># FooVector</span>
        <span class="s1">count_prior: int = ...</span><span class="s0">,</span>
        <span class="s1">na_sentinel: int = ...</span><span class="s0">,</span>
        <span class="s1">na_value: object = ...</span><span class="s0">,</span>
        <span class="s1">ignore_na: bool = ...</span><span class="s0">,</span>
        <span class="s1">return_inverse: bool = ...</span><span class="s0">,</span>
    <span class="s1">) -&gt; tuple[</span>
        <span class="s1">np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
        <span class="s1">npt.NDArray[np.intp]</span><span class="s0">,</span>
    <span class="s1">] | np.ndarray: ...  </span><span class="s2"># np.ndarray[subclass-specific]</span>
    <span class="s0">def </span><span class="s1">factorize(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># np.ndarray[subclass-specific]</span>
        <span class="s1">na_sentinel: int = ...</span><span class="s0">,</span>
        <span class="s1">na_value: object = ...</span><span class="s0">,</span>
        <span class="s1">mask=...</span><span class="s0">,</span>
    <span class="s1">) -&gt; tuple[np.ndarray</span><span class="s0">, </span><span class="s1">npt.NDArray[np.intp]</span><span class="s0">,</span><span class="s1">]: ...  </span><span class="s2"># np.ndarray[subclass-specific]</span>

<span class="s0">class </span><span class="s1">Complex128HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">Complex64HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">Float64HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">Float32HashTable(HashTable): ...</span>

<span class="s0">class </span><span class="s1">Int64HashTable(HashTable):</span>
    <span class="s2"># Only Int64HashTable has get_labels_groupby</span>
    <span class="s0">def </span><span class="s1">get_labels_groupby(</span>
        <span class="s1">self</span><span class="s0">,</span>
        <span class="s1">values: np.ndarray</span><span class="s0">,  </span><span class="s2"># const int64_t[:]</span>
    <span class="s1">) -&gt; tuple[npt.NDArray[np.intp]</span><span class="s0">, </span><span class="s1">npt.NDArray[np.int64]</span><span class="s0">,</span><span class="s1">]: ...</span>

<span class="s0">class </span><span class="s1">Int32HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">Int16HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">Int8HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">UInt64HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">UInt32HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">UInt16HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">UInt8HashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">StringHashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">PyObjectHashTable(HashTable): ...</span>
<span class="s0">class </span><span class="s1">IntpHashTable(HashTable): ...</span>

<span class="s0">def </span><span class="s1">duplicated(</span>
    <span class="s1">values: np.ndarray</span><span class="s0">,</span>
    <span class="s1">keep: Literal[</span><span class="s3">&quot;last&quot;</span><span class="s0">, </span><span class="s3">&quot;first&quot;</span><span class="s0">, False</span><span class="s1">] = ...</span><span class="s0">,</span>
<span class="s1">) -&gt; npt.NDArray[np.bool_]: ...</span>
<span class="s0">def </span><span class="s1">mode(values: np.ndarray</span><span class="s0">, </span><span class="s1">dropna: bool) -&gt; np.ndarray: ...</span>
<span class="s0">def </span><span class="s1">value_count(</span>
    <span class="s1">values: np.ndarray</span><span class="s0">,</span>
    <span class="s1">dropna: bool</span><span class="s0">,</span>
<span class="s1">) -&gt; tuple[np.ndarray</span><span class="s0">, </span><span class="s1">npt.NDArray[np.int64]</span><span class="s0">,</span><span class="s1">]: ...  </span><span class="s2"># np.ndarray[same-as-values]</span>

<span class="s2"># arr and values should have same dtype</span>
<span class="s0">def </span><span class="s1">ismember(</span>
    <span class="s1">arr: np.ndarray</span><span class="s0">,</span>
    <span class="s1">values: np.ndarray</span><span class="s0">,</span>
<span class="s1">) -&gt; npt.NDArray[np.bool_]: ...</span>
<span class="s0">def </span><span class="s1">object_hash(obj) -&gt; int: ...</span>
<span class="s0">def </span><span class="s1">objects_are_equal(a</span><span class="s0">, </span><span class="s1">b) -&gt; bool: ...</span>
</pre>
</body>
</html>