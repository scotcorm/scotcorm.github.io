<html>
<head>
<title>khash.pxd</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
khash.pxd</font>
</center></td></tr></table>
<pre><span class="s0">from cpython.object cimport PyObject</span>
<span class="s0">from numpy cimport (</span>
    <span class="s0">complex64_t,</span>
    <span class="s0">complex128_t,</span>
    <span class="s0">float32_t,</span>
    <span class="s0">float64_t,</span>
    <span class="s0">int8_t,</span>
    <span class="s0">int16_t,</span>
    <span class="s0">int32_t,</span>
    <span class="s0">int64_t,</span>
    <span class="s0">uint8_t,</span>
    <span class="s0">uint16_t,</span>
    <span class="s0">uint32_t,</span>
    <span class="s0">uint64_t,</span>
<span class="s0">)</span>


<span class="s0">cdef extern from &quot;khash_python.h&quot;:</span>
    <span class="s0">const int KHASH_TRACE_DOMAIN</span>

    <span class="s0">ctypedef uint32_t khuint_t</span>
    <span class="s0">ctypedef khuint_t khiter_t</span>

    <span class="s0">ctypedef struct khcomplex128_t:</span>
        <span class="s0">double real</span>
        <span class="s0">double imag</span>

    <span class="s0">bint are_equivalent_khcomplex128_t \</span>
        <span class="s0">&quot;kh_complex_hash_equal&quot; (khcomplex128_t a, khcomplex128_t b) nogil</span>

    <span class="s0">ctypedef struct khcomplex64_t:</span>
        <span class="s0">float real</span>
        <span class="s0">float imag</span>

    <span class="s0">bint are_equivalent_khcomplex64_t \</span>
        <span class="s0">&quot;kh_complex_hash_equal&quot; (khcomplex64_t a, khcomplex64_t b) nogil</span>

    <span class="s0">bint are_equivalent_float64_t \</span>
        <span class="s0">&quot;kh_floats_hash_equal&quot; (float64_t a, float64_t b) nogil</span>

    <span class="s0">bint are_equivalent_float32_t \</span>
        <span class="s0">&quot;kh_floats_hash_equal&quot; (float32_t a, float32_t b) nogil</span>

    <span class="s0">uint32_t kh_python_hash_func(object key)</span>
    <span class="s0">bint kh_python_hash_equal(object a, object b)</span>

    <span class="s0">ctypedef struct kh_pymap_t:</span>
        <span class="s0">khuint_t n_buckets, size, n_occupied, upper_bound</span>
        <span class="s0">uint32_t *flags</span>
        <span class="s0">PyObject **keys</span>
        <span class="s0">size_t *vals</span>

    <span class="s0">kh_pymap_t* kh_init_pymap()</span>
    <span class="s0">void kh_destroy_pymap(kh_pymap_t*)</span>
    <span class="s0">void kh_clear_pymap(kh_pymap_t*)</span>
    <span class="s0">khuint_t kh_get_pymap(kh_pymap_t*, PyObject*)</span>
    <span class="s0">void kh_resize_pymap(kh_pymap_t*, khuint_t)</span>
    <span class="s0">khuint_t kh_put_pymap(kh_pymap_t*, PyObject*, int*)</span>
    <span class="s0">void kh_del_pymap(kh_pymap_t*, khuint_t)</span>

    <span class="s0">bint kh_exist_pymap(kh_pymap_t*, khiter_t)</span>

    <span class="s0">ctypedef struct kh_pyset_t:</span>
        <span class="s0">khuint_t n_buckets, size, n_occupied, upper_bound</span>
        <span class="s0">uint32_t *flags</span>
        <span class="s0">PyObject **keys</span>
        <span class="s0">size_t *vals</span>

    <span class="s0">kh_pyset_t* kh_init_pyset()</span>
    <span class="s0">void kh_destroy_pyset(kh_pyset_t*)</span>
    <span class="s0">void kh_clear_pyset(kh_pyset_t*)</span>
    <span class="s0">khuint_t kh_get_pyset(kh_pyset_t*, PyObject*)</span>
    <span class="s0">void kh_resize_pyset(kh_pyset_t*, khuint_t)</span>
    <span class="s0">khuint_t kh_put_pyset(kh_pyset_t*, PyObject*, int*)</span>
    <span class="s0">void kh_del_pyset(kh_pyset_t*, khuint_t)</span>

    <span class="s0">bint kh_exist_pyset(kh_pyset_t*, khiter_t)</span>

    <span class="s0">ctypedef char* kh_cstr_t</span>

    <span class="s0">ctypedef struct kh_str_t:</span>
        <span class="s0">khuint_t n_buckets, size, n_occupied, upper_bound</span>
        <span class="s0">uint32_t *flags</span>
        <span class="s0">kh_cstr_t *keys</span>
        <span class="s0">size_t *vals</span>

    <span class="s0">kh_str_t* kh_init_str() nogil</span>
    <span class="s0">void kh_destroy_str(kh_str_t*) nogil</span>
    <span class="s0">void kh_clear_str(kh_str_t*) nogil</span>
    <span class="s0">khuint_t kh_get_str(kh_str_t*, kh_cstr_t) nogil</span>
    <span class="s0">void kh_resize_str(kh_str_t*, khuint_t) nogil</span>
    <span class="s0">khuint_t kh_put_str(kh_str_t*, kh_cstr_t, int*) nogil</span>
    <span class="s0">void kh_del_str(kh_str_t*, khuint_t) nogil</span>

    <span class="s0">bint kh_exist_str(kh_str_t*, khiter_t) nogil</span>

    <span class="s0">ctypedef struct kh_str_starts_t:</span>
        <span class="s0">kh_str_t *table</span>
        <span class="s0">int starts[256]</span>

    <span class="s0">kh_str_starts_t* kh_init_str_starts() nogil</span>
    <span class="s0">khuint_t kh_put_str_starts_item(kh_str_starts_t* table, char* key,</span>
                                    <span class="s0">int* ret) nogil</span>
    <span class="s0">khuint_t kh_get_str_starts_item(kh_str_starts_t* table, char* key) nogil</span>
    <span class="s0">void kh_destroy_str_starts(kh_str_starts_t*) nogil</span>
    <span class="s0">void kh_resize_str_starts(kh_str_starts_t*, khuint_t) nogil</span>

    <span class="s0"># sweep factorize</span>

    <span class="s0">ctypedef struct kh_strbox_t:</span>
        <span class="s0">khuint_t n_buckets, size, n_occupied, upper_bound</span>
        <span class="s0">uint32_t *flags</span>
        <span class="s0">kh_cstr_t *keys</span>
        <span class="s0">PyObject **vals</span>

    <span class="s0">kh_strbox_t* kh_init_strbox() nogil</span>
    <span class="s0">void kh_destroy_strbox(kh_strbox_t*) nogil</span>
    <span class="s0">void kh_clear_strbox(kh_strbox_t*) nogil</span>
    <span class="s0">khuint_t kh_get_strbox(kh_strbox_t*, kh_cstr_t) nogil</span>
    <span class="s0">void kh_resize_strbox(kh_strbox_t*, khuint_t) nogil</span>
    <span class="s0">khuint_t kh_put_strbox(kh_strbox_t*, kh_cstr_t, int*) nogil</span>
    <span class="s0">void kh_del_strbox(kh_strbox_t*, khuint_t) nogil</span>

    <span class="s0">bint kh_exist_strbox(kh_strbox_t*, khiter_t) nogil</span>

    <span class="s0">khuint_t kh_needed_n_buckets(khuint_t element_n) nogil</span>


<span class="s0">include &quot;khash_for_primitive_helper.pxi&quot;</span>
</pre>
</body>
</html>