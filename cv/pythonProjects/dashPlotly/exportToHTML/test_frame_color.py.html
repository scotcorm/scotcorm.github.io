<html>
<head>
<title>test_frame_color.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #629755; font-style: italic;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
.s5 { color: #808080;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
test_frame_color.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot; Test cases for DataFrame.plot &quot;&quot;&quot;</span>
<span class="s2">import </span><span class="s1">re</span>
<span class="s2">import </span><span class="s1">warnings</span>

<span class="s2">import </span><span class="s1">numpy </span><span class="s2">as </span><span class="s1">np</span>
<span class="s2">import </span><span class="s1">pytest</span>

<span class="s2">import </span><span class="s1">pandas.util._test_decorators </span><span class="s2">as </span><span class="s1">td</span>

<span class="s2">import </span><span class="s1">pandas </span><span class="s2">as </span><span class="s1">pd</span>
<span class="s2">from </span><span class="s1">pandas </span><span class="s2">import </span><span class="s1">DataFrame</span>
<span class="s2">import </span><span class="s1">pandas._testing </span><span class="s2">as </span><span class="s1">tm</span>
<span class="s2">from </span><span class="s1">pandas.tests.plotting.common </span><span class="s2">import </span><span class="s1">(</span>
    <span class="s1">TestPlotBase</span><span class="s2">,</span>
    <span class="s1">_check_plot_works</span><span class="s2">,</span>
<span class="s1">)</span>

<span class="s1">pytestmark = pytest.mark.slow</span>


<span class="s1">@td.skip_if_no_mpl</span>
<span class="s2">class </span><span class="s1">TestDataFrameColor(TestPlotBase):</span>
    <span class="s2">def </span><span class="s1">setup_method(self</span><span class="s2">, </span><span class="s1">method):</span>
        <span class="s1">TestPlotBase.setup_method(self</span><span class="s2">, </span><span class="s1">method)</span>
        <span class="s2">import </span><span class="s1">matplotlib </span><span class="s2">as </span><span class="s1">mpl</span>

        <span class="s1">mpl.rcdefaults()</span>

        <span class="s1">self.tdf = tm.makeTimeDataFrame()</span>
        <span class="s1">self.hexbin_df = DataFrame(</span>
            <span class="s1">{</span>
                <span class="s3">&quot;A&quot;</span><span class="s1">: np.random.uniform(size=</span><span class="s4">20</span><span class="s1">)</span><span class="s2">,</span>
                <span class="s3">&quot;B&quot;</span><span class="s1">: np.random.uniform(size=</span><span class="s4">20</span><span class="s1">)</span><span class="s2">,</span>
                <span class="s3">&quot;C&quot;</span><span class="s1">: np.arange(</span><span class="s4">20</span><span class="s1">) + np.random.uniform(size=</span><span class="s4">20</span><span class="s1">)</span><span class="s2">,</span>
            <span class="s1">}</span>
        <span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_mpl2_color_cycle_str(self):</span>
        <span class="s5"># GH 15516</span>
        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">10</span><span class="s2">, </span><span class="s4">3</span><span class="s1">)</span><span class="s2">, </span><span class="s1">columns=[</span><span class="s3">&quot;a&quot;</span><span class="s2">, </span><span class="s3">&quot;b&quot;</span><span class="s2">, </span><span class="s3">&quot;c&quot;</span><span class="s1">])</span>
        <span class="s1">colors = [</span><span class="s3">&quot;C0&quot;</span><span class="s2">, </span><span class="s3">&quot;C1&quot;</span><span class="s2">, </span><span class="s3">&quot;C2&quot;</span><span class="s2">, </span><span class="s3">&quot;C3&quot;</span><span class="s2">, </span><span class="s3">&quot;C4&quot;</span><span class="s2">, </span><span class="s3">&quot;C5&quot;</span><span class="s2">, </span><span class="s3">&quot;C6&quot;</span><span class="s2">, </span><span class="s3">&quot;C7&quot;</span><span class="s2">, </span><span class="s3">&quot;C8&quot;</span><span class="s2">, </span><span class="s3">&quot;C9&quot;</span><span class="s1">]</span>
        <span class="s2">with </span><span class="s1">warnings.catch_warnings(record=</span><span class="s2">True</span><span class="s1">) </span><span class="s2">as </span><span class="s1">w:</span>
            <span class="s1">warnings.simplefilter(</span><span class="s3">&quot;always&quot;</span><span class="s2">, </span><span class="s3">&quot;MatplotlibDeprecationWarning&quot;</span><span class="s1">)</span>

            <span class="s2">for </span><span class="s1">color </span><span class="s2">in </span><span class="s1">colors:</span>
                <span class="s1">_check_plot_works(df.plot</span><span class="s2">, </span><span class="s1">color=color)</span>

            <span class="s5"># if warning is raised, check that it is the exact problematic one</span>
            <span class="s5"># GH 36972</span>
            <span class="s2">if </span><span class="s1">w:</span>
                <span class="s1">match = </span><span class="s3">&quot;Support for uppercase single-letter colors is deprecated&quot;</span>
                <span class="s1">warning_message = str(w[</span><span class="s4">0</span><span class="s1">].message)</span>
                <span class="s1">msg = </span><span class="s3">&quot;MatplotlibDeprecationWarning related to CN colors was raised&quot;</span>
                <span class="s2">assert </span><span class="s1">match </span><span class="s2">not in </span><span class="s1">warning_message</span><span class="s2">, </span><span class="s1">msg</span>

    <span class="s2">def </span><span class="s1">test_color_single_series_list(self):</span>
        <span class="s5"># GH 3486</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;A&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]})</span>
        <span class="s1">_check_plot_works(df.plot</span><span class="s2">, </span><span class="s1">color=[</span><span class="s3">&quot;red&quot;</span><span class="s1">])</span>

    <span class="s1">@pytest.mark.parametrize(</span><span class="s3">&quot;color&quot;</span><span class="s2">, </span><span class="s1">[(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0.5</span><span class="s1">)])</span>
    <span class="s2">def </span><span class="s1">test_rgb_tuple_color(self</span><span class="s2">, </span><span class="s1">color):</span>
        <span class="s5"># GH 16695</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;x&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s3">&quot;y&quot;</span><span class="s1">: [</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">]})</span>
        <span class="s1">_check_plot_works(df.plot</span><span class="s2">, </span><span class="s1">x=</span><span class="s3">&quot;x&quot;</span><span class="s2">, </span><span class="s1">y=</span><span class="s3">&quot;y&quot;</span><span class="s2">, </span><span class="s1">color=color)</span>

    <span class="s2">def </span><span class="s1">test_color_empty_string(self):</span>
        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">10</span><span class="s2">, </span><span class="s4">2</span><span class="s1">))</span>
        <span class="s2">with </span><span class="s1">pytest.raises(ValueError</span><span class="s2">, </span><span class="s1">match=</span><span class="s3">&quot;Invalid color argument:&quot;</span><span class="s1">):</span>
            <span class="s1">df.plot(color=</span><span class="s3">&quot;&quot;</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_color_and_style_arguments(self):</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;x&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s3">&quot;y&quot;</span><span class="s1">: [</span><span class="s4">3</span><span class="s2">, </span><span class="s4">4</span><span class="s1">]})</span>
        <span class="s5"># passing both 'color' and 'style' arguments should be allowed</span>
        <span class="s5"># if there is no color symbol in the style strings:</span>
        <span class="s1">ax = df.plot(color=[</span><span class="s3">&quot;red&quot;</span><span class="s2">, </span><span class="s3">&quot;black&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">style=[</span><span class="s3">&quot;-&quot;</span><span class="s2">, </span><span class="s3">&quot;--&quot;</span><span class="s1">])</span>
        <span class="s5"># check that the linestyles are correctly set:</span>
        <span class="s1">linestyle = [line.get_linestyle() </span><span class="s2">for </span><span class="s1">line </span><span class="s2">in </span><span class="s1">ax.lines]</span>
        <span class="s2">assert </span><span class="s1">linestyle == [</span><span class="s3">&quot;-&quot;</span><span class="s2">, </span><span class="s3">&quot;--&quot;</span><span class="s1">]</span>
        <span class="s5"># check that the colors are correctly set:</span>
        <span class="s1">color = [line.get_color() </span><span class="s2">for </span><span class="s1">line </span><span class="s2">in </span><span class="s1">ax.lines]</span>
        <span class="s2">assert </span><span class="s1">color == [</span><span class="s3">&quot;red&quot;</span><span class="s2">, </span><span class="s3">&quot;black&quot;</span><span class="s1">]</span>
        <span class="s5"># passing both 'color' and 'style' arguments should not be allowed</span>
        <span class="s5"># if there is a color symbol in the style strings:</span>
        <span class="s1">msg = (</span>
            <span class="s3">&quot;Cannot pass 'style' string with a color symbol and 'color' keyword &quot;</span>
            <span class="s3">&quot;argument. Please use one or the other or pass 'style' without a color &quot;</span>
            <span class="s3">&quot;symbol&quot;</span>
        <span class="s1">)</span>
        <span class="s2">with </span><span class="s1">pytest.raises(ValueError</span><span class="s2">, </span><span class="s1">match=msg):</span>
            <span class="s1">df.plot(color=[</span><span class="s3">&quot;red&quot;</span><span class="s2">, </span><span class="s3">&quot;black&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">style=[</span><span class="s3">&quot;k-&quot;</span><span class="s2">, </span><span class="s3">&quot;r--&quot;</span><span class="s1">])</span>

    <span class="s1">@pytest.mark.parametrize(</span>
        <span class="s3">&quot;color, expected&quot;</span><span class="s2">,</span>
        <span class="s1">[</span>
            <span class="s1">(</span><span class="s3">&quot;green&quot;</span><span class="s2">, </span><span class="s1">[</span><span class="s3">&quot;green&quot;</span><span class="s1">] * </span><span class="s4">4</span><span class="s1">)</span><span class="s2">,</span>
            <span class="s1">([</span><span class="s3">&quot;yellow&quot;</span><span class="s2">, </span><span class="s3">&quot;red&quot;</span><span class="s2">, </span><span class="s3">&quot;green&quot;</span><span class="s2">, </span><span class="s3">&quot;blue&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s3">&quot;yellow&quot;</span><span class="s2">, </span><span class="s3">&quot;red&quot;</span><span class="s2">, </span><span class="s3">&quot;green&quot;</span><span class="s2">, </span><span class="s3">&quot;blue&quot;</span><span class="s1">])</span><span class="s2">,</span>
        <span class="s1">]</span><span class="s2">,</span>
    <span class="s1">)</span>
    <span class="s2">def </span><span class="s1">test_color_and_marker(self</span><span class="s2">, </span><span class="s1">color</span><span class="s2">, </span><span class="s1">expected):</span>
        <span class="s5"># GH 21003</span>
        <span class="s1">df = DataFrame(np.random.random((</span><span class="s4">7</span><span class="s2">, </span><span class="s4">4</span><span class="s1">)))</span>
        <span class="s1">ax = df.plot(color=color</span><span class="s2">, </span><span class="s1">style=</span><span class="s3">&quot;d--&quot;</span><span class="s1">)</span>
        <span class="s5"># check colors</span>
        <span class="s1">result = [i.get_color() </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">ax.lines]</span>
        <span class="s2">assert </span><span class="s1">result == expected</span>
        <span class="s5"># check markers and linestyles</span>
        <span class="s2">assert </span><span class="s1">all(i.get_linestyle() == </span><span class="s3">&quot;--&quot; </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">ax.lines)</span>
        <span class="s2">assert </span><span class="s1">all(i.get_marker() == </span><span class="s3">&quot;d&quot; </span><span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">ax.lines)</span>

    <span class="s2">def </span><span class="s1">test_bar_colors(self):</span>
        <span class="s2">import </span><span class="s1">matplotlib.pyplot </span><span class="s2">as </span><span class="s1">plt</span>

        <span class="s1">default_colors = self._unpack_cycler(plt.rcParams)</span>

        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>
        <span class="s1">ax = df.plot.bar()</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">5</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=default_colors[:</span><span class="s4">5</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s1">custom_colors = </span><span class="s3">&quot;rgcby&quot;</span>
        <span class="s1">ax = df.plot.bar(color=custom_colors)</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">5</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=custom_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s2">from </span><span class="s1">matplotlib </span><span class="s2">import </span><span class="s1">cm</span>

        <span class="s5"># Test str -&gt; colormap functionality</span>
        <span class="s1">ax = df.plot.bar(colormap=</span><span class="s3">&quot;jet&quot;</span><span class="s1">)</span>
        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">5</span><span class="s1">)]</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">5</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=rgba_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># Test colormap functionality</span>
        <span class="s1">ax = df.plot.bar(colormap=cm.jet)</span>
        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">5</span><span class="s1">)]</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">5</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=rgba_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s1">ax = df.loc[:</span><span class="s2">, </span><span class="s1">[</span><span class="s4">0</span><span class="s1">]].plot.bar(color=</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">)</span>
        <span class="s1">self._check_colors([ax.patches[</span><span class="s4">0</span><span class="s1">]]</span><span class="s2">, </span><span class="s1">facecolors=[</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s1">ax = df.plot(kind=</span><span class="s3">&quot;bar&quot;</span><span class="s2">, </span><span class="s1">color=</span><span class="s3">&quot;green&quot;</span><span class="s1">)</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">5</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=[</span><span class="s3">&quot;green&quot;</span><span class="s1">] * </span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">tm.close()</span>

    <span class="s2">def </span><span class="s1">test_bar_user_colors(self):</span>
        <span class="s1">df = DataFrame(</span>
            <span class="s1">{</span><span class="s3">&quot;A&quot;</span><span class="s1">: range(</span><span class="s4">4</span><span class="s1">)</span><span class="s2">, </span><span class="s3">&quot;B&quot;</span><span class="s1">: range(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">5</span><span class="s1">)</span><span class="s2">, </span><span class="s3">&quot;color&quot;</span><span class="s1">: [</span><span class="s3">&quot;red&quot;</span><span class="s2">, </span><span class="s3">&quot;blue&quot;</span><span class="s2">, </span><span class="s3">&quot;blue&quot;</span><span class="s2">, </span><span class="s3">&quot;red&quot;</span><span class="s1">]}</span>
        <span class="s1">)</span>
        <span class="s5"># This should *only* work when `y` is specified, else</span>
        <span class="s5"># we use one color per column</span>
        <span class="s1">ax = df.plot.bar(y=</span><span class="s3">&quot;A&quot;</span><span class="s2">, </span><span class="s1">color=df[</span><span class="s3">&quot;color&quot;</span><span class="s1">])</span>
        <span class="s1">result = [p.get_facecolor() </span><span class="s2">for </span><span class="s1">p </span><span class="s2">in </span><span class="s1">ax.patches]</span>
        <span class="s1">expected = [</span>
            <span class="s1">(</span><span class="s4">1.0</span><span class="s2">, </span><span class="s4">0.0</span><span class="s2">, </span><span class="s4">0.0</span><span class="s2">, </span><span class="s4">1.0</span><span class="s1">)</span><span class="s2">,</span>
            <span class="s1">(</span><span class="s4">0.0</span><span class="s2">, </span><span class="s4">0.0</span><span class="s2">, </span><span class="s4">1.0</span><span class="s2">, </span><span class="s4">1.0</span><span class="s1">)</span><span class="s2">,</span>
            <span class="s1">(</span><span class="s4">0.0</span><span class="s2">, </span><span class="s4">0.0</span><span class="s2">, </span><span class="s4">1.0</span><span class="s2">, </span><span class="s4">1.0</span><span class="s1">)</span><span class="s2">,</span>
            <span class="s1">(</span><span class="s4">1.0</span><span class="s2">, </span><span class="s4">0.0</span><span class="s2">, </span><span class="s4">0.0</span><span class="s2">, </span><span class="s4">1.0</span><span class="s1">)</span><span class="s2">,</span>
        <span class="s1">]</span>
        <span class="s2">assert </span><span class="s1">result == expected</span>

    <span class="s2">def </span><span class="s1">test_if_scatterplot_colorbar_affects_xaxis_visibility(self):</span>
        <span class="s5"># addressing issue #10611, to ensure colobar does not</span>
        <span class="s5"># interfere with x-axis label and ticklabels with</span>
        <span class="s5"># ipython inline backend.</span>
        <span class="s1">random_array = np.random.random((</span><span class="s4">1000</span><span class="s2">, </span><span class="s4">3</span><span class="s1">))</span>
        <span class="s1">df = DataFrame(random_array</span><span class="s2">, </span><span class="s1">columns=[</span><span class="s3">&quot;A label&quot;</span><span class="s2">, </span><span class="s3">&quot;B label&quot;</span><span class="s2">, </span><span class="s3">&quot;C label&quot;</span><span class="s1">])</span>

        <span class="s1">ax1 = df.plot.scatter(x=</span><span class="s3">&quot;A label&quot;</span><span class="s2">, </span><span class="s1">y=</span><span class="s3">&quot;B label&quot;</span><span class="s1">)</span>
        <span class="s1">ax2 = df.plot.scatter(x=</span><span class="s3">&quot;A label&quot;</span><span class="s2">, </span><span class="s1">y=</span><span class="s3">&quot;B label&quot;</span><span class="s2">, </span><span class="s1">c=</span><span class="s3">&quot;C label&quot;</span><span class="s1">)</span>

        <span class="s1">vis1 = [vis.get_visible() </span><span class="s2">for </span><span class="s1">vis </span><span class="s2">in </span><span class="s1">ax1.xaxis.get_minorticklabels()]</span>
        <span class="s1">vis2 = [vis.get_visible() </span><span class="s2">for </span><span class="s1">vis </span><span class="s2">in </span><span class="s1">ax2.xaxis.get_minorticklabels()]</span>
        <span class="s2">assert </span><span class="s1">vis1 == vis2</span>

        <span class="s1">vis1 = [vis.get_visible() </span><span class="s2">for </span><span class="s1">vis </span><span class="s2">in </span><span class="s1">ax1.xaxis.get_majorticklabels()]</span>
        <span class="s1">vis2 = [vis.get_visible() </span><span class="s2">for </span><span class="s1">vis </span><span class="s2">in </span><span class="s1">ax2.xaxis.get_majorticklabels()]</span>
        <span class="s2">assert </span><span class="s1">vis1 == vis2</span>

        <span class="s2">assert </span><span class="s1">(</span>
            <span class="s1">ax1.xaxis.get_label().get_visible() == ax2.xaxis.get_label().get_visible()</span>
        <span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_if_hexbin_xaxis_label_is_visible(self):</span>
        <span class="s5"># addressing issue #10678, to ensure colobar does not</span>
        <span class="s5"># interfere with x-axis label and ticklabels with</span>
        <span class="s5"># ipython inline backend.</span>
        <span class="s1">random_array = np.random.random((</span><span class="s4">1000</span><span class="s2">, </span><span class="s4">3</span><span class="s1">))</span>
        <span class="s1">df = DataFrame(random_array</span><span class="s2">, </span><span class="s1">columns=[</span><span class="s3">&quot;A label&quot;</span><span class="s2">, </span><span class="s3">&quot;B label&quot;</span><span class="s2">, </span><span class="s3">&quot;C label&quot;</span><span class="s1">])</span>

        <span class="s1">ax = df.plot.hexbin(</span><span class="s3">&quot;A label&quot;</span><span class="s2">, </span><span class="s3">&quot;B label&quot;</span><span class="s2">, </span><span class="s1">gridsize=</span><span class="s4">12</span><span class="s1">)</span>
        <span class="s2">assert </span><span class="s1">all(vis.get_visible() </span><span class="s2">for </span><span class="s1">vis </span><span class="s2">in </span><span class="s1">ax.xaxis.get_minorticklabels())</span>
        <span class="s2">assert </span><span class="s1">all(vis.get_visible() </span><span class="s2">for </span><span class="s1">vis </span><span class="s2">in </span><span class="s1">ax.xaxis.get_majorticklabels())</span>
        <span class="s2">assert </span><span class="s1">ax.xaxis.get_label().get_visible()</span>

    <span class="s2">def </span><span class="s1">test_if_scatterplot_colorbars_are_next_to_parent_axes(self):</span>
        <span class="s2">import </span><span class="s1">matplotlib.pyplot </span><span class="s2">as </span><span class="s1">plt</span>

        <span class="s1">random_array = np.random.random((</span><span class="s4">1000</span><span class="s2">, </span><span class="s4">3</span><span class="s1">))</span>
        <span class="s1">df = DataFrame(random_array</span><span class="s2">, </span><span class="s1">columns=[</span><span class="s3">&quot;A label&quot;</span><span class="s2">, </span><span class="s3">&quot;B label&quot;</span><span class="s2">, </span><span class="s3">&quot;C label&quot;</span><span class="s1">])</span>

        <span class="s1">fig</span><span class="s2">, </span><span class="s1">axes = plt.subplots(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span>
        <span class="s1">df.plot.scatter(</span><span class="s3">&quot;A label&quot;</span><span class="s2">, </span><span class="s3">&quot;B label&quot;</span><span class="s2">, </span><span class="s1">c=</span><span class="s3">&quot;C label&quot;</span><span class="s2">, </span><span class="s1">ax=axes[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">df.plot.scatter(</span><span class="s3">&quot;A label&quot;</span><span class="s2">, </span><span class="s3">&quot;B label&quot;</span><span class="s2">, </span><span class="s1">c=</span><span class="s3">&quot;C label&quot;</span><span class="s2">, </span><span class="s1">ax=axes[</span><span class="s4">1</span><span class="s1">])</span>
        <span class="s1">plt.tight_layout()</span>

        <span class="s1">points = np.array([ax.get_position().get_points() </span><span class="s2">for </span><span class="s1">ax </span><span class="s2">in </span><span class="s1">fig.axes])</span>
        <span class="s1">axes_x_coords = points[:</span><span class="s2">, </span><span class="s1">:</span><span class="s2">, </span><span class="s4">0</span><span class="s1">]</span>
        <span class="s1">parent_distance = axes_x_coords[</span><span class="s4">1</span><span class="s2">, </span><span class="s1">:] - axes_x_coords[</span><span class="s4">0</span><span class="s2">, </span><span class="s1">:]</span>
        <span class="s1">colorbar_distance = axes_x_coords[</span><span class="s4">3</span><span class="s2">, </span><span class="s1">:] - axes_x_coords[</span><span class="s4">2</span><span class="s2">, </span><span class="s1">:]</span>
        <span class="s2">assert </span><span class="s1">np.isclose(parent_distance</span><span class="s2">, </span><span class="s1">colorbar_distance</span><span class="s2">, </span><span class="s1">atol=</span><span class="s4">1e-7</span><span class="s1">).all()</span>

    <span class="s1">@pytest.mark.parametrize(</span><span class="s3">&quot;cmap&quot;</span><span class="s2">, </span><span class="s1">[</span><span class="s2">None, </span><span class="s3">&quot;Greys&quot;</span><span class="s1">])</span>
    <span class="s2">def </span><span class="s1">test_scatter_with_c_column_name_with_colors(self</span><span class="s2">, </span><span class="s1">cmap):</span>
        <span class="s5"># https://github.com/pandas-dev/pandas/issues/34316</span>
        <span class="s1">df = DataFrame(</span>
            <span class="s1">[[</span><span class="s4">5.1</span><span class="s2">, </span><span class="s4">3.5</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">4.9</span><span class="s2">, </span><span class="s4">3.0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">7.0</span><span class="s2">, </span><span class="s4">3.2</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">6.4</span><span class="s2">, </span><span class="s4">3.2</span><span class="s1">]</span><span class="s2">, </span><span class="s1">[</span><span class="s4">5.9</span><span class="s2">, </span><span class="s4">3.0</span><span class="s1">]]</span><span class="s2">,</span>
            <span class="s1">columns=[</span><span class="s3">&quot;length&quot;</span><span class="s2">, </span><span class="s3">&quot;width&quot;</span><span class="s1">]</span><span class="s2">,</span>
        <span class="s1">)</span>
        <span class="s1">df[</span><span class="s3">&quot;species&quot;</span><span class="s1">] = [</span><span class="s3">&quot;r&quot;</span><span class="s2">, </span><span class="s3">&quot;r&quot;</span><span class="s2">, </span><span class="s3">&quot;g&quot;</span><span class="s2">, </span><span class="s3">&quot;g&quot;</span><span class="s2">, </span><span class="s3">&quot;b&quot;</span><span class="s1">]</span>
        <span class="s1">ax = df.plot.scatter(x=</span><span class="s4">0</span><span class="s2">, </span><span class="s1">y=</span><span class="s4">1</span><span class="s2">, </span><span class="s1">c=</span><span class="s3">&quot;species&quot;</span><span class="s2">, </span><span class="s1">cmap=cmap)</span>
        <span class="s2">assert </span><span class="s1">ax.collections[</span><span class="s4">0</span><span class="s1">].colorbar </span><span class="s2">is None</span>

    <span class="s2">def </span><span class="s1">test_scatter_colors(self):</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;a&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]</span><span class="s2">, </span><span class="s3">&quot;b&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]</span><span class="s2">, </span><span class="s3">&quot;c&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]})</span>
        <span class="s2">with </span><span class="s1">pytest.raises(TypeError</span><span class="s2">, </span><span class="s1">match=</span><span class="s3">&quot;Specify exactly one of `c` and `color`&quot;</span><span class="s1">):</span>
            <span class="s1">df.plot.scatter(x=</span><span class="s3">&quot;a&quot;</span><span class="s2">, </span><span class="s1">y=</span><span class="s3">&quot;b&quot;</span><span class="s2">, </span><span class="s1">c=</span><span class="s3">&quot;c&quot;</span><span class="s2">, </span><span class="s1">color=</span><span class="s3">&quot;green&quot;</span><span class="s1">)</span>

        <span class="s1">default_colors = self._unpack_cycler(self.plt.rcParams)</span>

        <span class="s1">ax = df.plot.scatter(x=</span><span class="s3">&quot;a&quot;</span><span class="s2">, </span><span class="s1">y=</span><span class="s3">&quot;b&quot;</span><span class="s2">, </span><span class="s1">c=</span><span class="s3">&quot;c&quot;</span><span class="s1">)</span>
        <span class="s1">tm.assert_numpy_array_equal(</span>
            <span class="s1">ax.collections[</span><span class="s4">0</span><span class="s1">].get_facecolor()[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">np.array(self.colorconverter.to_rgba(default_colors[</span><span class="s4">0</span><span class="s1">]))</span><span class="s2">,</span>
        <span class="s1">)</span>

        <span class="s1">ax = df.plot.scatter(x=</span><span class="s3">&quot;a&quot;</span><span class="s2">, </span><span class="s1">y=</span><span class="s3">&quot;b&quot;</span><span class="s2">, </span><span class="s1">color=</span><span class="s3">&quot;white&quot;</span><span class="s1">)</span>
        <span class="s1">tm.assert_numpy_array_equal(</span>
            <span class="s1">ax.collections[</span><span class="s4">0</span><span class="s1">].get_facecolor()[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">np.array([</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">dtype=np.float64)</span><span class="s2">,</span>
        <span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_scatter_colorbar_different_cmap(self):</span>
        <span class="s5"># GH 33389</span>
        <span class="s2">import </span><span class="s1">matplotlib.pyplot </span><span class="s2">as </span><span class="s1">plt</span>

        <span class="s1">df = DataFrame({</span><span class="s3">&quot;x&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]</span><span class="s2">, </span><span class="s3">&quot;y&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">3</span><span class="s2">, </span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s3">&quot;c&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]})</span>
        <span class="s1">df[</span><span class="s3">&quot;x2&quot;</span><span class="s1">] = df[</span><span class="s3">&quot;x&quot;</span><span class="s1">] + </span><span class="s4">1</span>

        <span class="s1">fig</span><span class="s2">, </span><span class="s1">ax = plt.subplots()</span>
        <span class="s1">df.plot(</span><span class="s3">&quot;x&quot;</span><span class="s2">, </span><span class="s3">&quot;y&quot;</span><span class="s2">, </span><span class="s1">c=</span><span class="s3">&quot;c&quot;</span><span class="s2">, </span><span class="s1">kind=</span><span class="s3">&quot;scatter&quot;</span><span class="s2">, </span><span class="s1">cmap=</span><span class="s3">&quot;cividis&quot;</span><span class="s2">, </span><span class="s1">ax=ax)</span>
        <span class="s1">df.plot(</span><span class="s3">&quot;x2&quot;</span><span class="s2">, </span><span class="s3">&quot;y&quot;</span><span class="s2">, </span><span class="s1">c=</span><span class="s3">&quot;c&quot;</span><span class="s2">, </span><span class="s1">kind=</span><span class="s3">&quot;scatter&quot;</span><span class="s2">, </span><span class="s1">cmap=</span><span class="s3">&quot;magma&quot;</span><span class="s2">, </span><span class="s1">ax=ax)</span>

        <span class="s2">assert </span><span class="s1">ax.collections[</span><span class="s4">0</span><span class="s1">].cmap.name == </span><span class="s3">&quot;cividis&quot;</span>
        <span class="s2">assert </span><span class="s1">ax.collections[</span><span class="s4">1</span><span class="s1">].cmap.name == </span><span class="s3">&quot;magma&quot;</span>

    <span class="s2">def </span><span class="s1">test_line_colors(self):</span>
        <span class="s2">from </span><span class="s1">matplotlib </span><span class="s2">import </span><span class="s1">cm</span>

        <span class="s1">custom_colors = </span><span class="s3">&quot;rgcby&quot;</span>
        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>

        <span class="s1">ax = df.plot(color=custom_colors)</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=custom_colors)</span>

        <span class="s1">tm.close()</span>

        <span class="s1">ax2 = df.plot(color=custom_colors)</span>
        <span class="s1">lines2 = ax2.get_lines()</span>

        <span class="s2">for </span><span class="s1">l1</span><span class="s2">, </span><span class="s1">l2 </span><span class="s2">in </span><span class="s1">zip(ax.get_lines()</span><span class="s2">, </span><span class="s1">lines2):</span>
            <span class="s2">assert </span><span class="s1">l1.get_color() == l2.get_color()</span>

        <span class="s1">tm.close()</span>

        <span class="s1">ax = df.plot(colormap=</span><span class="s3">&quot;jet&quot;</span><span class="s1">)</span>
        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s1">len(df))]</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=rgba_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s1">ax = df.plot(colormap=cm.jet)</span>
        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s1">len(df))]</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=rgba_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># make color a list if plotting one column frame</span>
        <span class="s5"># handles cases like df.plot(color='DodgerBlue')</span>
        <span class="s1">ax = df.loc[:</span><span class="s2">, </span><span class="s1">[</span><span class="s4">0</span><span class="s1">]].plot(color=</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">)</span>
        <span class="s1">self._check_colors(ax.lines</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">])</span>

        <span class="s1">ax = df.plot(color=</span><span class="s3">&quot;red&quot;</span><span class="s1">)</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;red&quot;</span><span class="s1">] * </span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># GH 10299</span>
        <span class="s1">custom_colors = [</span><span class="s3">&quot;#FF0000&quot;</span><span class="s2">, </span><span class="s3">&quot;#0000FF&quot;</span><span class="s2">, </span><span class="s3">&quot;#FFFF00&quot;</span><span class="s2">, </span><span class="s3">&quot;#000000&quot;</span><span class="s2">, </span><span class="s3">&quot;#FFFFFF&quot;</span><span class="s1">]</span>
        <span class="s1">ax = df.plot(color=custom_colors)</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=custom_colors)</span>
        <span class="s1">tm.close()</span>

    <span class="s2">def </span><span class="s1">test_dont_modify_colors(self):</span>
        <span class="s1">colors = [</span><span class="s3">&quot;r&quot;</span><span class="s2">, </span><span class="s3">&quot;g&quot;</span><span class="s2">, </span><span class="s3">&quot;b&quot;</span><span class="s1">]</span>
        <span class="s1">DataFrame(np.random.rand(</span><span class="s4">10</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)).plot(color=colors)</span>
        <span class="s2">assert </span><span class="s1">len(colors) == </span><span class="s4">3</span>

    <span class="s2">def </span><span class="s1">test_line_colors_and_styles_subplots(self):</span>
        <span class="s5"># GH 9894</span>
        <span class="s2">from </span><span class="s1">matplotlib </span><span class="s2">import </span><span class="s1">cm</span>

        <span class="s1">default_colors = self._unpack_cycler(self.plt.rcParams)</span>

        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>

        <span class="s1">axes = df.plot(subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">list(default_colors)):</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># single color char</span>
        <span class="s1">axes = df.plot(subplots=</span><span class="s2">True, </span><span class="s1">color=</span><span class="s3">&quot;k&quot;</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax </span><span class="s2">in </span><span class="s1">axes:</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;k&quot;</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># single color str</span>
        <span class="s1">axes = df.plot(subplots=</span><span class="s2">True, </span><span class="s1">color=</span><span class="s3">&quot;green&quot;</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax </span><span class="s2">in </span><span class="s1">axes:</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;green&quot;</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s1">custom_colors = </span><span class="s3">&quot;rgcby&quot;</span>
        <span class="s1">axes = df.plot(color=custom_colors</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">list(custom_colors)):</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
        <span class="s1">tm.close()</span>

        <span class="s1">axes = df.plot(color=list(custom_colors)</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">list(custom_colors)):</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># GH 10299</span>
        <span class="s1">custom_colors = [</span><span class="s3">&quot;#FF0000&quot;</span><span class="s2">, </span><span class="s3">&quot;#0000FF&quot;</span><span class="s2">, </span><span class="s3">&quot;#FFFF00&quot;</span><span class="s2">, </span><span class="s3">&quot;#000000&quot;</span><span class="s2">, </span><span class="s3">&quot;#FFFFFF&quot;</span><span class="s1">]</span>
        <span class="s1">axes = df.plot(color=custom_colors</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">list(custom_colors)):</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
        <span class="s1">tm.close()</span>

        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s1">len(df))]</span>
        <span class="s2">for </span><span class="s1">cmap </span><span class="s2">in </span><span class="s1">[</span><span class="s3">&quot;jet&quot;</span><span class="s2">, </span><span class="s1">cm.jet]:</span>
            <span class="s1">axes = df.plot(colormap=cmap</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
            <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">rgba_colors):</span>
                <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
            <span class="s1">tm.close()</span>

        <span class="s5"># make color a list if plotting one column frame</span>
        <span class="s5"># handles cases like df.plot(color='DodgerBlue')</span>
        <span class="s1">axes = df.loc[:</span><span class="s2">, </span><span class="s1">[</span><span class="s4">0</span><span class="s1">]].plot(color=</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s1">self._check_colors(axes[</span><span class="s4">0</span><span class="s1">].lines</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">])</span>

        <span class="s5"># single character style</span>
        <span class="s1">axes = df.plot(style=</span><span class="s3">&quot;r&quot;</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax </span><span class="s2">in </span><span class="s1">axes:</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;r&quot;</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># list of styles</span>
        <span class="s1">styles = list(</span><span class="s3">&quot;rgcby&quot;</span><span class="s1">)</span>
        <span class="s1">axes = df.plot(style=styles</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">styles):</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
        <span class="s1">tm.close()</span>

    <span class="s2">def </span><span class="s1">test_area_colors(self):</span>
        <span class="s2">from </span><span class="s1">matplotlib </span><span class="s2">import </span><span class="s1">cm</span>
        <span class="s2">from </span><span class="s1">matplotlib.collections </span><span class="s2">import </span><span class="s1">PolyCollection</span>

        <span class="s1">custom_colors = </span><span class="s3">&quot;rgcby&quot;</span>
        <span class="s1">df = DataFrame(np.random.rand(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>

        <span class="s1">ax = df.plot.area(color=custom_colors)</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=custom_colors)</span>
        <span class="s1">poly = [o </span><span class="s2">for </span><span class="s1">o </span><span class="s2">in </span><span class="s1">ax.get_children() </span><span class="s2">if </span><span class="s1">isinstance(o</span><span class="s2">, </span><span class="s1">PolyCollection)]</span>
        <span class="s1">self._check_colors(poly</span><span class="s2">, </span><span class="s1">facecolors=custom_colors)</span>

        <span class="s1">handles</span><span class="s2">, </span><span class="s1">labels = ax.get_legend_handles_labels()</span>
        <span class="s1">self._check_colors(handles</span><span class="s2">, </span><span class="s1">facecolors=custom_colors)</span>

        <span class="s2">for </span><span class="s1">h </span><span class="s2">in </span><span class="s1">handles:</span>
            <span class="s2">assert </span><span class="s1">h.get_alpha() </span><span class="s2">is None</span>
        <span class="s1">tm.close()</span>

        <span class="s1">ax = df.plot.area(colormap=</span><span class="s3">&quot;jet&quot;</span><span class="s1">)</span>
        <span class="s1">jet_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s1">len(df))]</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=jet_colors)</span>
        <span class="s1">poly = [o </span><span class="s2">for </span><span class="s1">o </span><span class="s2">in </span><span class="s1">ax.get_children() </span><span class="s2">if </span><span class="s1">isinstance(o</span><span class="s2">, </span><span class="s1">PolyCollection)]</span>
        <span class="s1">self._check_colors(poly</span><span class="s2">, </span><span class="s1">facecolors=jet_colors)</span>

        <span class="s1">handles</span><span class="s2">, </span><span class="s1">labels = ax.get_legend_handles_labels()</span>
        <span class="s1">self._check_colors(handles</span><span class="s2">, </span><span class="s1">facecolors=jet_colors)</span>
        <span class="s2">for </span><span class="s1">h </span><span class="s2">in </span><span class="s1">handles:</span>
            <span class="s2">assert </span><span class="s1">h.get_alpha() </span><span class="s2">is None</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># When stacked=False, alpha is set to 0.5</span>
        <span class="s1">ax = df.plot.area(colormap=cm.jet</span><span class="s2">, </span><span class="s1">stacked=</span><span class="s2">False</span><span class="s1">)</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=jet_colors)</span>
        <span class="s1">poly = [o </span><span class="s2">for </span><span class="s1">o </span><span class="s2">in </span><span class="s1">ax.get_children() </span><span class="s2">if </span><span class="s1">isinstance(o</span><span class="s2">, </span><span class="s1">PolyCollection)]</span>
        <span class="s1">jet_with_alpha = [(c[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">c[</span><span class="s4">1</span><span class="s1">]</span><span class="s2">, </span><span class="s1">c[</span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s4">0.5</span><span class="s1">) </span><span class="s2">for </span><span class="s1">c </span><span class="s2">in </span><span class="s1">jet_colors]</span>
        <span class="s1">self._check_colors(poly</span><span class="s2">, </span><span class="s1">facecolors=jet_with_alpha)</span>

        <span class="s1">handles</span><span class="s2">, </span><span class="s1">labels = ax.get_legend_handles_labels()</span>
        <span class="s1">linecolors = jet_with_alpha</span>
        <span class="s1">self._check_colors(handles[: len(jet_colors)]</span><span class="s2">, </span><span class="s1">linecolors=linecolors)</span>
        <span class="s2">for </span><span class="s1">h </span><span class="s2">in </span><span class="s1">handles:</span>
            <span class="s2">assert </span><span class="s1">h.get_alpha() == </span><span class="s4">0.5</span>

    <span class="s2">def </span><span class="s1">test_hist_colors(self):</span>
        <span class="s1">default_colors = self._unpack_cycler(self.plt.rcParams)</span>

        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>
        <span class="s1">ax = df.plot.hist()</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">10</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=default_colors[:</span><span class="s4">5</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s1">custom_colors = </span><span class="s3">&quot;rgcby&quot;</span>
        <span class="s1">ax = df.plot.hist(color=custom_colors)</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">10</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=custom_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s2">from </span><span class="s1">matplotlib </span><span class="s2">import </span><span class="s1">cm</span>

        <span class="s5"># Test str -&gt; colormap functionality</span>
        <span class="s1">ax = df.plot.hist(colormap=</span><span class="s3">&quot;jet&quot;</span><span class="s1">)</span>
        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">5</span><span class="s1">)]</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">10</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=rgba_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># Test colormap functionality</span>
        <span class="s1">ax = df.plot.hist(colormap=cm.jet)</span>
        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">5</span><span class="s1">)]</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">10</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=rgba_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s1">ax = df.loc[:</span><span class="s2">, </span><span class="s1">[</span><span class="s4">0</span><span class="s1">]].plot.hist(color=</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">)</span>
        <span class="s1">self._check_colors([ax.patches[</span><span class="s4">0</span><span class="s1">]]</span><span class="s2">, </span><span class="s1">facecolors=[</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">])</span>

        <span class="s1">ax = df.plot(kind=</span><span class="s3">&quot;hist&quot;</span><span class="s2">, </span><span class="s1">color=</span><span class="s3">&quot;green&quot;</span><span class="s1">)</span>
        <span class="s1">self._check_colors(ax.patches[::</span><span class="s4">10</span><span class="s1">]</span><span class="s2">, </span><span class="s1">facecolors=[</span><span class="s3">&quot;green&quot;</span><span class="s1">] * </span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">tm.close()</span>

    <span class="s1">@td.skip_if_no_scipy</span>
    <span class="s2">def </span><span class="s1">test_kde_colors(self):</span>
        <span class="s2">from </span><span class="s1">matplotlib </span><span class="s2">import </span><span class="s1">cm</span>

        <span class="s1">custom_colors = </span><span class="s3">&quot;rgcby&quot;</span>
        <span class="s1">df = DataFrame(np.random.rand(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>

        <span class="s1">ax = df.plot.kde(color=custom_colors)</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=custom_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s1">ax = df.plot.kde(colormap=</span><span class="s3">&quot;jet&quot;</span><span class="s1">)</span>
        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s1">len(df))]</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=rgba_colors)</span>
        <span class="s1">tm.close()</span>

        <span class="s1">ax = df.plot.kde(colormap=cm.jet)</span>
        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s1">len(df))]</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=rgba_colors)</span>

    <span class="s1">@td.skip_if_no_scipy</span>
    <span class="s2">def </span><span class="s1">test_kde_colors_and_styles_subplots(self):</span>
        <span class="s2">from </span><span class="s1">matplotlib </span><span class="s2">import </span><span class="s1">cm</span>

        <span class="s1">default_colors = self._unpack_cycler(self.plt.rcParams)</span>

        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>

        <span class="s1">axes = df.plot(kind=</span><span class="s3">&quot;kde&quot;</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">list(default_colors)):</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># single color char</span>
        <span class="s1">axes = df.plot(kind=</span><span class="s3">&quot;kde&quot;</span><span class="s2">, </span><span class="s1">color=</span><span class="s3">&quot;k&quot;</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax </span><span class="s2">in </span><span class="s1">axes:</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;k&quot;</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># single color str</span>
        <span class="s1">axes = df.plot(kind=</span><span class="s3">&quot;kde&quot;</span><span class="s2">, </span><span class="s1">color=</span><span class="s3">&quot;red&quot;</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax </span><span class="s2">in </span><span class="s1">axes:</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;red&quot;</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s1">custom_colors = </span><span class="s3">&quot;rgcby&quot;</span>
        <span class="s1">axes = df.plot(kind=</span><span class="s3">&quot;kde&quot;</span><span class="s2">, </span><span class="s1">color=custom_colors</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">list(custom_colors)):</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
        <span class="s1">tm.close()</span>

        <span class="s1">rgba_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s1">len(df))]</span>
        <span class="s2">for </span><span class="s1">cmap </span><span class="s2">in </span><span class="s1">[</span><span class="s3">&quot;jet&quot;</span><span class="s2">, </span><span class="s1">cm.jet]:</span>
            <span class="s1">axes = df.plot(kind=</span><span class="s3">&quot;kde&quot;</span><span class="s2">, </span><span class="s1">colormap=cmap</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
            <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">rgba_colors):</span>
                <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
            <span class="s1">tm.close()</span>

        <span class="s5"># make color a list if plotting one column frame</span>
        <span class="s5"># handles cases like df.plot(color='DodgerBlue')</span>
        <span class="s1">axes = df.loc[:</span><span class="s2">, </span><span class="s1">[</span><span class="s4">0</span><span class="s1">]].plot(kind=</span><span class="s3">&quot;kde&quot;</span><span class="s2">, </span><span class="s1">color=</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s1">self._check_colors(axes[</span><span class="s4">0</span><span class="s1">].lines</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">])</span>

        <span class="s5"># single character style</span>
        <span class="s1">axes = df.plot(kind=</span><span class="s3">&quot;kde&quot;</span><span class="s2">, </span><span class="s1">style=</span><span class="s3">&quot;r&quot;</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax </span><span class="s2">in </span><span class="s1">axes:</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[</span><span class="s3">&quot;r&quot;</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># list of styles</span>
        <span class="s1">styles = list(</span><span class="s3">&quot;rgcby&quot;</span><span class="s1">)</span>
        <span class="s1">axes = df.plot(kind=</span><span class="s3">&quot;kde&quot;</span><span class="s2">, </span><span class="s1">style=styles</span><span class="s2">, </span><span class="s1">subplots=</span><span class="s2">True</span><span class="s1">)</span>
        <span class="s2">for </span><span class="s1">ax</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">zip(axes</span><span class="s2">, </span><span class="s1">styles):</span>
            <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=[c])</span>
        <span class="s1">tm.close()</span>

    <span class="s2">def </span><span class="s1">test_boxplot_colors(self):</span>
        <span class="s2">def </span><span class="s1">_check_colors(bp</span><span class="s2">, </span><span class="s1">box_c</span><span class="s2">, </span><span class="s1">whiskers_c</span><span class="s2">, </span><span class="s1">medians_c</span><span class="s2">, </span><span class="s1">caps_c=</span><span class="s3">&quot;k&quot;</span><span class="s2">, </span><span class="s1">fliers_c=</span><span class="s2">None</span><span class="s1">):</span>
            <span class="s5"># TODO: outside this func?</span>
            <span class="s2">if </span><span class="s1">fliers_c </span><span class="s2">is None</span><span class="s1">:</span>
                <span class="s1">fliers_c = </span><span class="s3">&quot;k&quot;</span>
            <span class="s1">self._check_colors(bp[</span><span class="s3">&quot;boxes&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">linecolors=[box_c] * len(bp[</span><span class="s3">&quot;boxes&quot;</span><span class="s1">]))</span>
            <span class="s1">self._check_colors(</span>
                <span class="s1">bp[</span><span class="s3">&quot;whiskers&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">linecolors=[whiskers_c] * len(bp[</span><span class="s3">&quot;whiskers&quot;</span><span class="s1">])</span>
            <span class="s1">)</span>
            <span class="s1">self._check_colors(</span>
                <span class="s1">bp[</span><span class="s3">&quot;medians&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">linecolors=[medians_c] * len(bp[</span><span class="s3">&quot;medians&quot;</span><span class="s1">])</span>
            <span class="s1">)</span>
            <span class="s1">self._check_colors(bp[</span><span class="s3">&quot;fliers&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">linecolors=[fliers_c] * len(bp[</span><span class="s3">&quot;fliers&quot;</span><span class="s1">]))</span>
            <span class="s1">self._check_colors(bp[</span><span class="s3">&quot;caps&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">linecolors=[caps_c] * len(bp[</span><span class="s3">&quot;caps&quot;</span><span class="s1">]))</span>

        <span class="s1">default_colors = self._unpack_cycler(self.plt.rcParams)</span>

        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">5</span><span class="s1">))</span>
        <span class="s1">bp = df.plot.box(return_type=</span><span class="s3">&quot;dict&quot;</span><span class="s1">)</span>
        <span class="s1">_check_colors(</span>
            <span class="s1">bp</span><span class="s2">,</span>
            <span class="s1">default_colors[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">default_colors[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">default_colors[</span><span class="s4">2</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">default_colors[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">,</span>
        <span class="s1">)</span>
        <span class="s1">tm.close()</span>

        <span class="s1">dict_colors = {</span>
            <span class="s3">&quot;boxes&quot;</span><span class="s1">: </span><span class="s3">&quot;#572923&quot;</span><span class="s2">,</span>
            <span class="s3">&quot;whiskers&quot;</span><span class="s1">: </span><span class="s3">&quot;#982042&quot;</span><span class="s2">,</span>
            <span class="s3">&quot;medians&quot;</span><span class="s1">: </span><span class="s3">&quot;#804823&quot;</span><span class="s2">,</span>
            <span class="s3">&quot;caps&quot;</span><span class="s1">: </span><span class="s3">&quot;#123456&quot;</span><span class="s2">,</span>
        <span class="s1">}</span>
        <span class="s1">bp = df.plot.box(color=dict_colors</span><span class="s2">, </span><span class="s1">sym=</span><span class="s3">&quot;r+&quot;</span><span class="s2">, </span><span class="s1">return_type=</span><span class="s3">&quot;dict&quot;</span><span class="s1">)</span>
        <span class="s1">_check_colors(</span>
            <span class="s1">bp</span><span class="s2">,</span>
            <span class="s1">dict_colors[</span><span class="s3">&quot;boxes&quot;</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">dict_colors[</span><span class="s3">&quot;whiskers&quot;</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">dict_colors[</span><span class="s3">&quot;medians&quot;</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">dict_colors[</span><span class="s3">&quot;caps&quot;</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s3">&quot;r&quot;</span><span class="s2">,</span>
        <span class="s1">)</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># partial colors</span>
        <span class="s1">dict_colors = {</span><span class="s3">&quot;whiskers&quot;</span><span class="s1">: </span><span class="s3">&quot;c&quot;</span><span class="s2">, </span><span class="s3">&quot;medians&quot;</span><span class="s1">: </span><span class="s3">&quot;m&quot;</span><span class="s1">}</span>
        <span class="s1">bp = df.plot.box(color=dict_colors</span><span class="s2">, </span><span class="s1">return_type=</span><span class="s3">&quot;dict&quot;</span><span class="s1">)</span>
        <span class="s1">_check_colors(bp</span><span class="s2">, </span><span class="s1">default_colors[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">&quot;c&quot;</span><span class="s2">, </span><span class="s3">&quot;m&quot;</span><span class="s2">, </span><span class="s1">default_colors[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s2">from </span><span class="s1">matplotlib </span><span class="s2">import </span><span class="s1">cm</span>

        <span class="s5"># Test str -&gt; colormap functionality</span>
        <span class="s1">bp = df.plot.box(colormap=</span><span class="s3">&quot;jet&quot;</span><span class="s2">, </span><span class="s1">return_type=</span><span class="s3">&quot;dict&quot;</span><span class="s1">)</span>
        <span class="s1">jet_colors = [cm.jet(n) </span><span class="s2">for </span><span class="s1">n </span><span class="s2">in </span><span class="s1">np.linspace(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">3</span><span class="s1">)]</span>
        <span class="s1">_check_colors(bp</span><span class="s2">, </span><span class="s1">jet_colors[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">jet_colors[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">jet_colors[</span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s1">jet_colors[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># Test colormap functionality</span>
        <span class="s1">bp = df.plot.box(colormap=cm.jet</span><span class="s2">, </span><span class="s1">return_type=</span><span class="s3">&quot;dict&quot;</span><span class="s1">)</span>
        <span class="s1">_check_colors(bp</span><span class="s2">, </span><span class="s1">jet_colors[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">jet_colors[</span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">jet_colors[</span><span class="s4">2</span><span class="s1">]</span><span class="s2">, </span><span class="s1">jet_colors[</span><span class="s4">0</span><span class="s1">])</span>
        <span class="s1">tm.close()</span>

        <span class="s5"># string color is applied to all artists except fliers</span>
        <span class="s1">bp = df.plot.box(color=</span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s2">, </span><span class="s1">return_type=</span><span class="s3">&quot;dict&quot;</span><span class="s1">)</span>
        <span class="s1">_check_colors(bp</span><span class="s2">, </span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s2">, </span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s2">, </span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s2">, </span><span class="s3">&quot;DodgerBlue&quot;</span><span class="s1">)</span>

        <span class="s5"># tuple is also applied to all artists except fliers</span>
        <span class="s1">bp = df.plot.box(color=(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">sym=</span><span class="s3">&quot;#123456&quot;</span><span class="s2">, </span><span class="s1">return_type=</span><span class="s3">&quot;dict&quot;</span><span class="s1">)</span>
        <span class="s1">_check_colors(bp</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s3">&quot;#123456&quot;</span><span class="s1">)</span>

        <span class="s1">msg = re.escape(</span>
            <span class="s3">&quot;color dict contains invalid key 'xxxx'. The key must be either &quot;</span>
            <span class="s3">&quot;['boxes', 'whiskers', 'medians', 'caps']&quot;</span>
        <span class="s1">)</span>
        <span class="s2">with </span><span class="s1">pytest.raises(ValueError</span><span class="s2">, </span><span class="s1">match=msg):</span>
            <span class="s5"># Color contains invalid key results in ValueError</span>
            <span class="s1">df.plot.box(color={</span><span class="s3">&quot;boxes&quot;</span><span class="s1">: </span><span class="s3">&quot;red&quot;</span><span class="s2">, </span><span class="s3">&quot;xxxx&quot;</span><span class="s1">: </span><span class="s3">&quot;blue&quot;</span><span class="s1">})</span>

    <span class="s2">def </span><span class="s1">test_default_color_cycle(self):</span>
        <span class="s2">import </span><span class="s1">cycler</span>
        <span class="s2">import </span><span class="s1">matplotlib.pyplot </span><span class="s2">as </span><span class="s1">plt</span>

        <span class="s1">colors = list(</span><span class="s3">&quot;rgbk&quot;</span><span class="s1">)</span>
        <span class="s1">plt.rcParams[</span><span class="s3">&quot;axes.prop_cycle&quot;</span><span class="s1">] = cycler.cycler(</span><span class="s3">&quot;color&quot;</span><span class="s2">, </span><span class="s1">colors)</span>

        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">5</span><span class="s2">, </span><span class="s4">3</span><span class="s1">))</span>
        <span class="s1">ax = df.plot()</span>

        <span class="s1">expected = self._unpack_cycler(plt.rcParams)[:</span><span class="s4">3</span><span class="s1">]</span>
        <span class="s1">self._check_colors(ax.get_lines()</span><span class="s2">, </span><span class="s1">linecolors=expected)</span>

    <span class="s2">def </span><span class="s1">test_no_color_bar(self):</span>
        <span class="s1">df = self.hexbin_df</span>
        <span class="s1">ax = df.plot.hexbin(x=</span><span class="s3">&quot;A&quot;</span><span class="s2">, </span><span class="s1">y=</span><span class="s3">&quot;B&quot;</span><span class="s2">, </span><span class="s1">colorbar=</span><span class="s2">None</span><span class="s1">)</span>
        <span class="s2">assert </span><span class="s1">ax.collections[</span><span class="s4">0</span><span class="s1">].colorbar </span><span class="s2">is None</span>

    <span class="s2">def </span><span class="s1">test_mixing_cmap_and_colormap_raises(self):</span>
        <span class="s1">df = self.hexbin_df</span>
        <span class="s1">msg = </span><span class="s3">&quot;Only specify one of `cmap` and `colormap`&quot;</span>
        <span class="s2">with </span><span class="s1">pytest.raises(TypeError</span><span class="s2">, </span><span class="s1">match=msg):</span>
            <span class="s1">df.plot.hexbin(x=</span><span class="s3">&quot;A&quot;</span><span class="s2">, </span><span class="s1">y=</span><span class="s3">&quot;B&quot;</span><span class="s2">, </span><span class="s1">cmap=</span><span class="s3">&quot;YlGn&quot;</span><span class="s2">, </span><span class="s1">colormap=</span><span class="s3">&quot;BuGn&quot;</span><span class="s1">)</span>

    <span class="s2">def </span><span class="s1">test_passed_bar_colors(self):</span>
        <span class="s2">import </span><span class="s1">matplotlib </span><span class="s2">as </span><span class="s1">mpl</span>

        <span class="s1">color_tuples = [(</span><span class="s4">0.9</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0.9</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0.9</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)]</span>
        <span class="s1">colormap = mpl.colors.ListedColormap(color_tuples)</span>
        <span class="s1">barplot = DataFrame([[</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]]).plot(kind=</span><span class="s3">&quot;bar&quot;</span><span class="s2">, </span><span class="s1">cmap=colormap)</span>
        <span class="s2">assert </span><span class="s1">color_tuples == [c.get_facecolor() </span><span class="s2">for </span><span class="s1">c </span><span class="s2">in </span><span class="s1">barplot.patches]</span>

    <span class="s2">def </span><span class="s1">test_rcParams_bar_colors(self):</span>
        <span class="s2">import </span><span class="s1">matplotlib </span><span class="s2">as </span><span class="s1">mpl</span>

        <span class="s1">color_tuples = [(</span><span class="s4">0.9</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0.9</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0.9</span><span class="s2">, </span><span class="s4">1</span><span class="s1">)]</span>
        <span class="s2">with </span><span class="s1">mpl.rc_context(rc={</span><span class="s3">&quot;axes.prop_cycle&quot;</span><span class="s1">: mpl.cycler(</span><span class="s3">&quot;color&quot;</span><span class="s2">, </span><span class="s1">color_tuples)}):</span>
            <span class="s1">barplot = DataFrame([[</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]]).plot(kind=</span><span class="s3">&quot;bar&quot;</span><span class="s1">)</span>
        <span class="s2">assert </span><span class="s1">color_tuples == [c.get_facecolor() </span><span class="s2">for </span><span class="s1">c </span><span class="s2">in </span><span class="s1">barplot.patches]</span>

    <span class="s2">def </span><span class="s1">test_colors_of_columns_with_same_name(self):</span>
        <span class="s5"># ISSUE 11136 -&gt; https://github.com/pandas-dev/pandas/issues/11136</span>
        <span class="s5"># Creating a DataFrame with duplicate column labels and testing colors of them.</span>
        <span class="s1">df = DataFrame({</span><span class="s3">&quot;b&quot;</span><span class="s1">: [</span><span class="s4">0</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">&quot;a&quot;</span><span class="s1">: [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">3</span><span class="s1">]})</span>
        <span class="s1">df1 = DataFrame({</span><span class="s3">&quot;a&quot;</span><span class="s1">: [</span><span class="s4">2</span><span class="s2">, </span><span class="s4">4</span><span class="s2">, </span><span class="s4">6</span><span class="s1">]})</span>
        <span class="s1">df_concat = pd.concat([df</span><span class="s2">, </span><span class="s1">df1]</span><span class="s2">, </span><span class="s1">axis=</span><span class="s4">1</span><span class="s1">)</span>
        <span class="s1">result = df_concat.plot()</span>
        <span class="s2">for </span><span class="s1">legend</span><span class="s2">, </span><span class="s1">line </span><span class="s2">in </span><span class="s1">zip(result.get_legend().legendHandles</span><span class="s2">, </span><span class="s1">result.lines):</span>
            <span class="s2">assert </span><span class="s1">legend.get_color() == line.get_color()</span>

    <span class="s2">def </span><span class="s1">test_invalid_colormap(self):</span>
        <span class="s1">df = DataFrame(np.random.randn(</span><span class="s4">3</span><span class="s2">, </span><span class="s4">2</span><span class="s1">)</span><span class="s2">, </span><span class="s1">columns=[</span><span class="s3">&quot;A&quot;</span><span class="s2">, </span><span class="s3">&quot;B&quot;</span><span class="s1">])</span>
        <span class="s1">msg = </span><span class="s3">&quot;'invalid_colormap' is not a valid value for name; supported values are &quot;</span>
        <span class="s2">with </span><span class="s1">pytest.raises(ValueError</span><span class="s2">, </span><span class="s1">match=msg):</span>
            <span class="s1">df.plot(colormap=</span><span class="s3">&quot;invalid_colormap&quot;</span><span class="s1">)</span>
</pre>
</body>
</html>