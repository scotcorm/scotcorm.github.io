<html>
<head>
<title>tools.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #629755; font-style: italic;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
tools.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot; 
Tools for matplotlib plot exporting 
&quot;&quot;&quot;</span>


<span class="s2">def </span><span class="s1">ipynb_vega_init():</span>
    <span class="s0">&quot;&quot;&quot;Initialize the IPython notebook display elements 
 
    This function borrows heavily from the excellent vincent package: 
    http://github.com/wrobstory/vincent 
    &quot;&quot;&quot;</span>
    <span class="s2">try</span><span class="s1">:</span>
        <span class="s2">from </span><span class="s1">IPython.core.display </span><span class="s2">import </span><span class="s1">display</span><span class="s2">, </span><span class="s1">HTML</span>
    <span class="s2">except </span><span class="s1">ImportError:</span>
        <span class="s1">print(</span><span class="s3">&quot;IPython Notebook could not be loaded.&quot;</span><span class="s1">)</span>

    <span class="s1">require_js = </span><span class="s3">&quot;&quot;&quot; 
    if (window['d3'] === undefined) {{ 
        require.config({{ paths: {{d3: &quot;http://d3js.org/d3.v3.min&quot;}} }}); 
        require([&quot;d3&quot;], function(d3) {{ 
          window.d3 = d3; 
          {0} 
        }}); 
    }}; 
    if (window['topojson'] === undefined) {{ 
        require.config( 
            {{ paths: {{topojson: &quot;http://d3js.org/topojson.v1.min&quot;}} }} 
            ); 
        require([&quot;topojson&quot;], function(topojson) {{ 
          window.topojson = topojson; 
        }}); 
    }}; 
    &quot;&quot;&quot;</span>
    <span class="s1">d3_geo_projection_js_url = </span><span class="s3">&quot;http://d3js.org/d3.geo.projection.v0.min.js&quot;</span>
    <span class="s1">d3_layout_cloud_js_url = </span><span class="s3">&quot;http://wrobstory.github.io/d3-cloud/&quot; &quot;d3.layout.cloud.js&quot;</span>
    <span class="s1">topojson_js_url = </span><span class="s3">&quot;http://d3js.org/topojson.v1.min.js&quot;</span>
    <span class="s1">vega_js_url = </span><span class="s3">&quot;http://trifacta.github.com/vega/vega.js&quot;</span>

    <span class="s1">dep_libs = </span><span class="s3">&quot;&quot;&quot;$.getScript(&quot;%s&quot;, function() { 
        $.getScript(&quot;%s&quot;, function() { 
            $.getScript(&quot;%s&quot;, function() { 
                $.getScript(&quot;%s&quot;, function() { 
                        $([IPython.events]).trigger(&quot;vega_loaded.vincent&quot;); 
                }) 
            }) 
        }) 
    });&quot;&quot;&quot; </span><span class="s1">% (</span>
        <span class="s1">d3_geo_projection_js_url</span><span class="s2">,</span>
        <span class="s1">d3_layout_cloud_js_url</span><span class="s2">,</span>
        <span class="s1">topojson_js_url</span><span class="s2">,</span>
        <span class="s1">vega_js_url</span><span class="s2">,</span>
    <span class="s1">)</span>
    <span class="s1">load_js = require_js.format(dep_libs)</span>
    <span class="s1">html = </span><span class="s3">&quot;&lt;script&gt;&quot; </span><span class="s1">+ load_js + </span><span class="s3">&quot;&lt;/script&gt;&quot;</span>
    <span class="s1">display(HTML(html))</span>
</pre>
</body>
</html>