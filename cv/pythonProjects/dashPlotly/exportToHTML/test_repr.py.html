<html>
<head>
<title>test_repr.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #808080;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
test_repr.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">datetime </span><span class="s0">import </span><span class="s1">(</span>
    <span class="s1">datetime</span><span class="s0">,</span>
    <span class="s1">timedelta</span><span class="s0">,</span>
<span class="s1">)</span>

<span class="s0">import </span><span class="s1">numpy </span><span class="s0">as </span><span class="s1">np</span>
<span class="s0">import </span><span class="s1">pytest</span>

<span class="s0">import </span><span class="s1">pandas </span><span class="s0">as </span><span class="s1">pd</span>
<span class="s0">from </span><span class="s1">pandas </span><span class="s0">import </span><span class="s1">(</span>
    <span class="s1">Categorical</span><span class="s0">,</span>
    <span class="s1">DataFrame</span><span class="s0">,</span>
    <span class="s1">Index</span><span class="s0">,</span>
    <span class="s1">Series</span><span class="s0">,</span>
    <span class="s1">date_range</span><span class="s0">,</span>
    <span class="s1">option_context</span><span class="s0">,</span>
    <span class="s1">period_range</span><span class="s0">,</span>
    <span class="s1">timedelta_range</span><span class="s0">,</span>
<span class="s1">)</span>
<span class="s0">import </span><span class="s1">pandas._testing </span><span class="s0">as </span><span class="s1">tm</span>


<span class="s0">class </span><span class="s1">TestSeriesRepr:</span>
    <span class="s0">def </span><span class="s1">test_multilevel_name_print(self</span><span class="s0">, </span><span class="s1">lexsorted_two_level_string_multiindex):</span>
        <span class="s1">index = lexsorted_two_level_string_multiindex</span>
        <span class="s1">ser = Series(range(len(index))</span><span class="s0">, </span><span class="s1">index=index</span><span class="s0">, </span><span class="s1">name=</span><span class="s2">&quot;sth&quot;</span><span class="s1">)</span>
        <span class="s1">expected = [</span>
            <span class="s2">&quot;first  second&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;foo    one       0&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;       two       1&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;       three     2&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;bar    one       3&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;       two       4&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;baz    two       5&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;       three     6&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;qux    one       7&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;       two       8&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;       three     9&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;Name: sth, dtype: int64&quot;</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">expected = </span><span class="s2">&quot;</span><span class="s0">\n</span><span class="s2">&quot;</span><span class="s1">.join(expected)</span>
        <span class="s0">assert </span><span class="s1">repr(ser) == expected</span>

    <span class="s0">def </span><span class="s1">test_small_name_printing(self):</span>
        <span class="s3"># Test small Series.</span>
        <span class="s1">s = Series([</span><span class="s4">0</span><span class="s0">, </span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s1">])</span>

        <span class="s1">s.name = </span><span class="s2">&quot;test&quot;</span>
        <span class="s0">assert </span><span class="s2">&quot;Name: test&quot; </span><span class="s0">in </span><span class="s1">repr(s)</span>

        <span class="s1">s.name = </span><span class="s0">None</span>
        <span class="s0">assert </span><span class="s2">&quot;Name:&quot; </span><span class="s0">not in </span><span class="s1">repr(s)</span>

    <span class="s0">def </span><span class="s1">test_big_name_printing(self):</span>
        <span class="s3"># Test big Series (diff code path).</span>
        <span class="s1">s = Series(range(</span><span class="s4">1000</span><span class="s1">))</span>

        <span class="s1">s.name = </span><span class="s2">&quot;test&quot;</span>
        <span class="s0">assert </span><span class="s2">&quot;Name: test&quot; </span><span class="s0">in </span><span class="s1">repr(s)</span>

        <span class="s1">s.name = </span><span class="s0">None</span>
        <span class="s0">assert </span><span class="s2">&quot;Name:&quot; </span><span class="s0">not in </span><span class="s1">repr(s)</span>

    <span class="s0">def </span><span class="s1">test_empty_name_printing(self):</span>
        <span class="s1">s = Series(index=date_range(</span><span class="s2">&quot;20010101&quot;</span><span class="s0">, </span><span class="s2">&quot;20020101&quot;</span><span class="s1">)</span><span class="s0">, </span><span class="s1">name=</span><span class="s2">&quot;test&quot;</span><span class="s0">, </span><span class="s1">dtype=object)</span>
        <span class="s0">assert </span><span class="s2">&quot;Name: test&quot; </span><span class="s0">in </span><span class="s1">repr(s)</span>

    <span class="s1">@pytest.mark.parametrize(</span><span class="s2">&quot;args&quot;</span><span class="s0">, </span><span class="s1">[()</span><span class="s0">, </span><span class="s1">(</span><span class="s4">0</span><span class="s0">, </span><span class="s1">-</span><span class="s4">1</span><span class="s1">)])</span>
    <span class="s0">def </span><span class="s1">test_float_range(self</span><span class="s0">, </span><span class="s1">args):</span>
        <span class="s1">str(Series(np.random.randn(</span><span class="s4">1000</span><span class="s1">)</span><span class="s0">, </span><span class="s1">index=np.arange(</span><span class="s4">1000</span><span class="s0">, </span><span class="s1">*args)))</span>

    <span class="s0">def </span><span class="s1">test_empty_object(self):</span>
        <span class="s3"># empty</span>
        <span class="s1">str(Series(dtype=object))</span>

    <span class="s0">def </span><span class="s1">test_string(self</span><span class="s0">, </span><span class="s1">string_series):</span>
        <span class="s1">str(string_series)</span>
        <span class="s1">str(string_series.astype(int))</span>

        <span class="s3"># with NaNs</span>
        <span class="s1">string_series[</span><span class="s4">5</span><span class="s1">:</span><span class="s4">7</span><span class="s1">] = np.NaN</span>
        <span class="s1">str(string_series)</span>

    <span class="s0">def </span><span class="s1">test_object(self</span><span class="s0">, </span><span class="s1">object_series):</span>
        <span class="s1">str(object_series)</span>

    <span class="s0">def </span><span class="s1">test_datetime(self</span><span class="s0">, </span><span class="s1">datetime_series):</span>
        <span class="s1">str(datetime_series)</span>
        <span class="s3"># with Nones</span>
        <span class="s1">ots = datetime_series.astype(</span><span class="s2">&quot;O&quot;</span><span class="s1">)</span>
        <span class="s1">ots[::</span><span class="s4">2</span><span class="s1">] = </span><span class="s0">None</span>
        <span class="s1">repr(ots)</span>

    <span class="s1">@pytest.mark.parametrize(</span>
        <span class="s2">&quot;name&quot;</span><span class="s0">,</span>
        <span class="s1">[</span>
            <span class="s2">&quot;&quot;</span><span class="s0">,</span>
            <span class="s4">1</span><span class="s0">,</span>
            <span class="s4">1.2</span><span class="s0">,</span>
            <span class="s2">&quot;foo&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;</span><span class="s0">\u03B1\u03B2\u03B3</span><span class="s2">&quot;</span><span class="s0">,</span>
            <span class="s2">&quot;loooooooooooooooooooooooooooooooooooooooooooooooooooong&quot;</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">&quot;foo&quot;</span><span class="s0">, </span><span class="s2">&quot;bar&quot;</span><span class="s0">, </span><span class="s2">&quot;baz&quot;</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">&quot;foo&quot;</span><span class="s0">, </span><span class="s4">1</span><span class="s0">, </span><span class="s4">2.3</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">&quot;</span><span class="s0">\u03B1</span><span class="s2">&quot;</span><span class="s0">, </span><span class="s2">&quot;</span><span class="s0">\u03B2</span><span class="s2">&quot;</span><span class="s0">, </span><span class="s2">&quot;</span><span class="s0">\u03B3</span><span class="s2">&quot;</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">&quot;</span><span class="s0">\u03B1</span><span class="s2">&quot;</span><span class="s0">, </span><span class="s2">&quot;bar&quot;</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span><span class="s0">,</span>
    <span class="s1">)</span>
    <span class="s0">def </span><span class="s1">test_various_names(self</span><span class="s0">, </span><span class="s1">name</span><span class="s0">, </span><span class="s1">string_series):</span>
        <span class="s3"># various names</span>
        <span class="s1">string_series.name = name</span>
        <span class="s1">repr(string_series)</span>

    <span class="s0">def </span><span class="s1">test_tuple_name(self):</span>
        <span class="s1">biggie = Series(</span>
            <span class="s1">np.random.randn(</span><span class="s4">1000</span><span class="s1">)</span><span class="s0">, </span><span class="s1">index=np.arange(</span><span class="s4">1000</span><span class="s1">)</span><span class="s0">, </span><span class="s1">name=(</span><span class="s2">&quot;foo&quot;</span><span class="s0">, </span><span class="s2">&quot;bar&quot;</span><span class="s0">, </span><span class="s2">&quot;baz&quot;</span><span class="s1">)</span>
        <span class="s1">)</span>
        <span class="s1">repr(biggie)</span>

    <span class="s1">@pytest.mark.parametrize(</span><span class="s2">&quot;arg&quot;</span><span class="s0">, </span><span class="s1">[</span><span class="s4">100</span><span class="s0">, </span><span class="s4">1001</span><span class="s1">])</span>
    <span class="s0">def </span><span class="s1">test_tidy_repr_name_0(self</span><span class="s0">, </span><span class="s1">arg):</span>
        <span class="s3"># tidy repr</span>
        <span class="s1">ser = Series(np.random.randn(arg)</span><span class="s0">, </span><span class="s1">name=</span><span class="s4">0</span><span class="s1">)</span>
        <span class="s1">rep_str = repr(ser)</span>
        <span class="s0">assert </span><span class="s2">&quot;Name: 0&quot; </span><span class="s0">in </span><span class="s1">rep_str</span>

    <span class="s0">def </span><span class="s1">test_newline(self):</span>
        <span class="s1">ser = Series([</span><span class="s2">&quot;a</span><span class="s0">\n\r\t</span><span class="s2">b&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">name=</span><span class="s2">&quot;a</span><span class="s0">\n\r\t</span><span class="s2">d&quot;</span><span class="s0">, </span><span class="s1">index=[</span><span class="s2">&quot;a</span><span class="s0">\n\r\t</span><span class="s2">f&quot;</span><span class="s1">])</span>
        <span class="s0">assert </span><span class="s2">&quot;</span><span class="s0">\t</span><span class="s2">&quot; </span><span class="s0">not in </span><span class="s1">repr(ser)</span>
        <span class="s0">assert </span><span class="s2">&quot;</span><span class="s0">\r</span><span class="s2">&quot; </span><span class="s0">not in </span><span class="s1">repr(ser)</span>
        <span class="s0">assert </span><span class="s2">&quot;a</span><span class="s0">\n</span><span class="s2">&quot; </span><span class="s0">not in </span><span class="s1">repr(ser)</span>

    <span class="s1">@pytest.mark.parametrize(</span>
        <span class="s2">&quot;name, expected&quot;</span><span class="s0">,</span>
        <span class="s1">[</span>
            <span class="s1">[</span><span class="s2">&quot;foo&quot;</span><span class="s0">, </span><span class="s2">&quot;Series([], Name: foo, dtype: int64)&quot;</span><span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span><span class="s0">None, </span><span class="s2">&quot;Series([], dtype: int64)&quot;</span><span class="s1">]</span><span class="s0">,</span>
        <span class="s1">]</span><span class="s0">,</span>
    <span class="s1">)</span>
    <span class="s0">def </span><span class="s1">test_empty_int64(self</span><span class="s0">, </span><span class="s1">name</span><span class="s0">, </span><span class="s1">expected):</span>
        <span class="s3"># with empty series (#4651)</span>
        <span class="s1">s = Series([]</span><span class="s0">, </span><span class="s1">dtype=np.int64</span><span class="s0">, </span><span class="s1">name=name)</span>
        <span class="s0">assert </span><span class="s1">repr(s) == expected</span>

    <span class="s0">def </span><span class="s1">test_tidy_repr(self):</span>
        <span class="s1">a = Series([</span><span class="s2">&quot;</span><span class="s0">\u05d0</span><span class="s2">&quot;</span><span class="s1">] * </span><span class="s4">1000</span><span class="s1">)</span>
        <span class="s1">a.name = </span><span class="s2">&quot;title1&quot;</span>
        <span class="s1">repr(a)  </span><span class="s3"># should not raise exception</span>

    <span class="s0">def </span><span class="s1">test_repr_bool_fails(self</span><span class="s0">, </span><span class="s1">capsys):</span>
        <span class="s1">s = Series([DataFrame(np.random.randn(</span><span class="s4">2</span><span class="s0">, </span><span class="s4">2</span><span class="s1">)) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(</span><span class="s4">5</span><span class="s1">)])</span>

        <span class="s3"># It works (with no Cython exception barf)!</span>
        <span class="s1">repr(s)</span>

        <span class="s1">captured = capsys.readouterr()</span>
        <span class="s0">assert </span><span class="s1">captured.err == </span><span class="s2">&quot;&quot;</span>

    <span class="s0">def </span><span class="s1">test_repr_name_iterable_indexable(self):</span>
        <span class="s1">s = Series([</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s1">]</span><span class="s0">, </span><span class="s1">name=np.int64(</span><span class="s4">3</span><span class="s1">))</span>

        <span class="s3"># it works!</span>
        <span class="s1">repr(s)</span>

        <span class="s1">s.name = (</span><span class="s2">&quot;</span><span class="s0">\u05d0</span><span class="s2">&quot;</span><span class="s0">,</span><span class="s1">) * </span><span class="s4">2</span>
        <span class="s1">repr(s)</span>

    <span class="s0">def </span><span class="s1">test_repr_should_return_str(self):</span>
        <span class="s3"># https://docs.python.org/3/reference/datamodel.html#object.__repr__</span>
        <span class="s3"># ...The return value must be a string object.</span>

        <span class="s3"># (str on py2.x, str (unicode) on py3)</span>

        <span class="s1">data = [</span><span class="s4">8</span><span class="s0">, </span><span class="s4">5</span><span class="s0">, </span><span class="s4">3</span><span class="s0">, </span><span class="s4">5</span><span class="s1">]</span>
        <span class="s1">index1 = [</span><span class="s2">&quot;</span><span class="s0">\u03c3</span><span class="s2">&quot;</span><span class="s0">, </span><span class="s2">&quot;</span><span class="s0">\u03c4</span><span class="s2">&quot;</span><span class="s0">, </span><span class="s2">&quot;</span><span class="s0">\u03c5</span><span class="s2">&quot;</span><span class="s0">, </span><span class="s2">&quot;</span><span class="s0">\u03c6</span><span class="s2">&quot;</span><span class="s1">]</span>
        <span class="s1">df = Series(data</span><span class="s0">, </span><span class="s1">index=index1)</span>
        <span class="s0">assert </span><span class="s1">type(df.__repr__() == str)  </span><span class="s3"># both py2 / 3</span>

    <span class="s0">def </span><span class="s1">test_repr_max_rows(self):</span>
        <span class="s3"># GH 6863</span>
        <span class="s0">with </span><span class="s1">option_context(</span><span class="s2">&quot;display.max_rows&quot;</span><span class="s0">, None</span><span class="s1">):</span>
            <span class="s1">str(Series(range(</span><span class="s4">1001</span><span class="s1">)))  </span><span class="s3"># should not raise exception</span>

    <span class="s0">def </span><span class="s1">test_unicode_string_with_unicode(self):</span>
        <span class="s1">df = Series([</span><span class="s2">&quot;</span><span class="s0">\u05d0</span><span class="s2">&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">name=</span><span class="s2">&quot;</span><span class="s0">\u05d1</span><span class="s2">&quot;</span><span class="s1">)</span>
        <span class="s1">str(df)</span>

    <span class="s0">def </span><span class="s1">test_str_to_bytes_raises(self):</span>
        <span class="s3"># GH 26447</span>
        <span class="s1">df = Series([</span><span class="s2">&quot;abc&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">name=</span><span class="s2">&quot;abc&quot;</span><span class="s1">)</span>
        <span class="s1">msg = </span><span class="s2">&quot;^'str' object cannot be interpreted as an integer$&quot;</span>
        <span class="s0">with </span><span class="s1">pytest.raises(TypeError</span><span class="s0">, </span><span class="s1">match=msg):</span>
            <span class="s1">bytes(df)</span>

    <span class="s0">def </span><span class="s1">test_timeseries_repr_object_dtype(self):</span>
        <span class="s1">index = Index(</span>
            <span class="s1">[datetime(</span><span class="s4">2000</span><span class="s0">, </span><span class="s4">1</span><span class="s0">, </span><span class="s4">1</span><span class="s1">) + timedelta(i) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(</span><span class="s4">1000</span><span class="s1">)]</span><span class="s0">, </span><span class="s1">dtype=object</span>
        <span class="s1">)</span>
        <span class="s1">ts = Series(np.random.randn(len(index))</span><span class="s0">, </span><span class="s1">index)</span>
        <span class="s1">repr(ts)</span>

        <span class="s1">ts = tm.makeTimeSeries(</span><span class="s4">1000</span><span class="s1">)</span>
        <span class="s0">assert </span><span class="s1">repr(ts).splitlines()[-</span><span class="s4">1</span><span class="s1">].startswith(</span><span class="s2">&quot;Freq:&quot;</span><span class="s1">)</span>

        <span class="s1">ts2 = ts.iloc[np.random.randint(</span><span class="s4">0</span><span class="s0">, </span><span class="s1">len(ts) - </span><span class="s4">1</span><span class="s0">, </span><span class="s4">400</span><span class="s1">)]</span>
        <span class="s1">repr(ts2).splitlines()[-</span><span class="s4">1</span><span class="s1">]</span>

    <span class="s1">@pytest.mark.filterwarnings(</span><span class="s2">&quot;ignore::FutureWarning&quot;</span><span class="s1">)</span>
    <span class="s0">def </span><span class="s1">test_latex_repr(self):</span>
        <span class="s1">result = </span><span class="s2">r&quot;&quot;&quot;\begin{tabular}{ll} 
\toprule 
{} &amp;         0 \\ 
\midrule 
0 &amp;  $\alpha$ \\ 
1 &amp;         b \\ 
2 &amp;         c \\ 
\bottomrule 
\end{tabular} 
&quot;&quot;&quot;</span>
        <span class="s0">with </span><span class="s1">option_context(</span><span class="s2">&quot;display.latex.escape&quot;</span><span class="s0">, False, </span><span class="s2">&quot;display.latex.repr&quot;</span><span class="s0">, True</span><span class="s1">):</span>
            <span class="s1">s = Series([</span><span class="s2">r&quot;$\alpha$&quot;</span><span class="s0">, </span><span class="s2">&quot;b&quot;</span><span class="s0">, </span><span class="s2">&quot;c&quot;</span><span class="s1">])</span>
            <span class="s0">assert </span><span class="s1">result == s._repr_latex_()</span>

        <span class="s0">assert </span><span class="s1">s._repr_latex_() </span><span class="s0">is None</span>

    <span class="s0">def </span><span class="s1">test_index_repr_in_frame_with_nan(self):</span>
        <span class="s3"># see gh-25061</span>
        <span class="s1">i = Index([</span><span class="s4">1</span><span class="s0">, </span><span class="s1">np.nan])</span>
        <span class="s1">s = Series([</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s1">]</span><span class="s0">, </span><span class="s1">index=i)</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;1.0    1</span><span class="s0">\n</span><span class="s2">NaN    2</span><span class="s0">\n</span><span class="s2">dtype: int64&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

    <span class="s0">def </span><span class="s1">test_format_pre_1900_dates(self):</span>
        <span class="s1">rng = date_range(</span><span class="s2">&quot;1/1/1850&quot;</span><span class="s0">, </span><span class="s2">&quot;1/1/1950&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;A-DEC&quot;</span><span class="s1">)</span>
        <span class="s1">rng.format()</span>
        <span class="s1">ts = Series(</span><span class="s4">1</span><span class="s0">, </span><span class="s1">index=rng)</span>
        <span class="s1">repr(ts)</span>

    <span class="s0">def </span><span class="s1">test_series_repr_nat(self):</span>
        <span class="s1">series = Series([</span><span class="s4">0</span><span class="s0">, </span><span class="s4">1000</span><span class="s0">, </span><span class="s4">2000</span><span class="s0">, </span><span class="s1">pd.NaT.value]</span><span class="s0">, </span><span class="s1">dtype=</span><span class="s2">&quot;M8[ns]&quot;</span><span class="s1">)</span>

        <span class="s1">result = repr(series)</span>
        <span class="s1">expected = (</span>
            <span class="s2">&quot;0   1970-01-01 00:00:00.000000</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;1   1970-01-01 00:00:00.000001</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;2   1970-01-01 00:00:00.000002</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;3                          NaT</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;dtype: datetime64[ns]&quot;</span>
        <span class="s1">)</span>
        <span class="s0">assert </span><span class="s1">result == expected</span>

    <span class="s0">def </span><span class="s1">test_float_repr(self):</span>
        <span class="s3"># GH#35603</span>
        <span class="s3"># check float format when cast to object</span>
        <span class="s1">ser = Series([</span><span class="s4">1.0</span><span class="s1">]).astype(object)</span>
        <span class="s1">expected = </span><span class="s2">&quot;0    1.0</span><span class="s0">\n</span><span class="s2">dtype: object&quot;</span>
        <span class="s0">assert </span><span class="s1">repr(ser) == expected</span>

    <span class="s0">def </span><span class="s1">test_different_null_objects(self):</span>
        <span class="s3"># GH#45263</span>
        <span class="s1">ser = Series([</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s0">, </span><span class="s4">4</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s0">True, None, </span><span class="s1">np.nan</span><span class="s0">, </span><span class="s1">pd.NaT])</span>
        <span class="s1">result = repr(ser)</span>
        <span class="s1">expected = </span><span class="s2">&quot;True    1</span><span class="s0">\n</span><span class="s2">None    2</span><span class="s0">\n</span><span class="s2">NaN     3</span><span class="s0">\n</span><span class="s2">NaT     4</span><span class="s0">\n</span><span class="s2">dtype: int64&quot;</span>
        <span class="s0">assert </span><span class="s1">result == expected</span>


<span class="s0">class </span><span class="s1">TestCategoricalRepr:</span>
    <span class="s0">def </span><span class="s1">test_categorical_repr_unicode(self):</span>
        <span class="s3"># see gh-21002</span>

        <span class="s0">class </span><span class="s1">County:</span>
            <span class="s1">name = </span><span class="s2">&quot;San Sebasti√°n&quot;</span>
            <span class="s1">state = </span><span class="s2">&quot;PR&quot;</span>

            <span class="s0">def </span><span class="s1">__repr__(self) -&gt; str:</span>
                <span class="s0">return </span><span class="s1">self.name + </span><span class="s2">&quot;, &quot; </span><span class="s1">+ self.state</span>

        <span class="s1">cat = Categorical([County() </span><span class="s0">for </span><span class="s1">_ </span><span class="s0">in </span><span class="s1">range(</span><span class="s4">61</span><span class="s1">)])</span>
        <span class="s1">idx = Index(cat)</span>
        <span class="s1">ser = idx.to_series()</span>

        <span class="s1">repr(ser)</span>
        <span class="s1">str(ser)</span>

    <span class="s0">def </span><span class="s1">test_categorical_repr(self):</span>
        <span class="s1">a = Series(Categorical([</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s0">, </span><span class="s4">4</span><span class="s1">]))</span>
        <span class="s1">exp = (</span>
            <span class="s2">&quot;0    1</span><span class="s0">\n</span><span class="s2">1    2</span><span class="s0">\n</span><span class="s2">2    3</span><span class="s0">\n</span><span class="s2">3    4</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s1">+ </span><span class="s2">&quot;dtype: category</span><span class="s0">\n</span><span class="s2">Categories (4, int64): [1, 2, 3, 4]&quot;</span>
        <span class="s1">)</span>

        <span class="s0">assert </span><span class="s1">exp == a.__str__()</span>

        <span class="s1">a = Series(Categorical([</span><span class="s2">&quot;a&quot;</span><span class="s0">, </span><span class="s2">&quot;b&quot;</span><span class="s1">] * </span><span class="s4">25</span><span class="s1">))</span>
        <span class="s1">exp = (</span>
            <span class="s2">&quot;0     a</span><span class="s0">\n</span><span class="s2">1     b</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s1">+ </span><span class="s2">&quot;     ..</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s1">+ </span><span class="s2">&quot;48    a</span><span class="s0">\n</span><span class="s2">49    b</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s1">+ </span><span class="s2">&quot;Length: 50, dtype: category</span><span class="s0">\n</span><span class="s2">Categories (2, object): ['a', 'b']&quot;</span>
        <span class="s1">)</span>
        <span class="s0">with </span><span class="s1">option_context(</span><span class="s2">&quot;display.max_rows&quot;</span><span class="s0">, </span><span class="s4">5</span><span class="s1">):</span>
            <span class="s0">assert </span><span class="s1">exp == repr(a)</span>

        <span class="s1">levs = list(</span><span class="s2">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span><span class="s1">)</span>
        <span class="s1">a = Series(Categorical([</span><span class="s2">&quot;a&quot;</span><span class="s0">, </span><span class="s2">&quot;b&quot;</span><span class="s1">]</span><span class="s0">, </span><span class="s1">categories=levs</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = (</span>
            <span class="s2">&quot;0    a</span><span class="s0">\n</span><span class="s2">1    b</span><span class="s0">\n</span><span class="s2">&quot; </span><span class="s1">+ </span><span class="s2">&quot;dtype: category</span><span class="s0">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Categories (26, object): ['a' &lt; 'b' &lt; 'c' &lt; 'd' ... 'w' &lt; 'x' &lt; 'y' &lt; 'z']&quot;</span>
        <span class="s1">)</span>
        <span class="s0">assert </span><span class="s1">exp == a.__str__()</span>

    <span class="s0">def </span><span class="s1">test_categorical_series_repr(self):</span>
        <span class="s1">s = Series(Categorical([</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s1">]))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0    1 
1    2 
2    3 
dtype: category 
Categories (3, int64): [1, 2, 3]&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

        <span class="s1">s = Series(Categorical(np.arange(</span><span class="s4">10</span><span class="s1">)))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0    0 
1    1 
2    2 
3    3 
4    4 
5    5 
6    6 
7    7 
8    8 
9    9 
dtype: category 
Categories (10, int64): [0, 1, 2, 3, ..., 6, 7, 8, 9]&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

    <span class="s0">def </span><span class="s1">test_categorical_series_repr_ordered(self):</span>
        <span class="s1">s = Series(Categorical([</span><span class="s4">1</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">3</span><span class="s1">]</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0    1 
1    2 
2    3 
dtype: category 
Categories (3, int64): [1 &lt; 2 &lt; 3]&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

        <span class="s1">s = Series(Categorical(np.arange(</span><span class="s4">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0    0 
1    1 
2    2 
3    3 
4    4 
5    5 
6    6 
7    7 
8    8 
9    9 
dtype: category 
Categories (10, int64): [0 &lt; 1 &lt; 2 &lt; 3 ... 6 &lt; 7 &lt; 8 &lt; 9]&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

    <span class="s0">def </span><span class="s1">test_categorical_series_repr_datetime(self):</span>
        <span class="s1">idx = date_range(</span><span class="s2">&quot;2011-01-01 09:00&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;H&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0   2011-01-01 09:00:00 
1   2011-01-01 10:00:00 
2   2011-01-01 11:00:00 
3   2011-01-01 12:00:00 
4   2011-01-01 13:00:00 
dtype: category 
Categories (5, datetime64[ns]): [2011-01-01 09:00:00, 2011-01-01 10:00:00, 2011-01-01 11:00:00, 
                                 2011-01-01 12:00:00, 2011-01-01 13:00:00]&quot;&quot;&quot;  </span><span class="s3"># noqa:E501</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

        <span class="s1">idx = date_range(</span><span class="s2">&quot;2011-01-01 09:00&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;H&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s0">, </span><span class="s1">tz=</span><span class="s2">&quot;US/Eastern&quot;</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0   2011-01-01 09:00:00-05:00 
1   2011-01-01 10:00:00-05:00 
2   2011-01-01 11:00:00-05:00 
3   2011-01-01 12:00:00-05:00 
4   2011-01-01 13:00:00-05:00 
dtype: category 
Categories (5, datetime64[ns, US/Eastern]): [2011-01-01 09:00:00-05:00, 2011-01-01 10:00:00-05:00, 
                                             2011-01-01 11:00:00-05:00, 2011-01-01 12:00:00-05:00, 
                                             2011-01-01 13:00:00-05:00]&quot;&quot;&quot;  </span><span class="s3"># noqa:E501</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

    <span class="s0">def </span><span class="s1">test_categorical_series_repr_datetime_ordered(self):</span>
        <span class="s1">idx = date_range(</span><span class="s2">&quot;2011-01-01 09:00&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;H&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0   2011-01-01 09:00:00 
1   2011-01-01 10:00:00 
2   2011-01-01 11:00:00 
3   2011-01-01 12:00:00 
4   2011-01-01 13:00:00 
dtype: category 
Categories (5, datetime64[ns]): [2011-01-01 09:00:00 &lt; 2011-01-01 10:00:00 &lt; 2011-01-01 11:00:00 &lt; 
                                 2011-01-01 12:00:00 &lt; 2011-01-01 13:00:00]&quot;&quot;&quot;  </span><span class="s3"># noqa:E501</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

        <span class="s1">idx = date_range(</span><span class="s2">&quot;2011-01-01 09:00&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;H&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s0">, </span><span class="s1">tz=</span><span class="s2">&quot;US/Eastern&quot;</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0   2011-01-01 09:00:00-05:00 
1   2011-01-01 10:00:00-05:00 
2   2011-01-01 11:00:00-05:00 
3   2011-01-01 12:00:00-05:00 
4   2011-01-01 13:00:00-05:00 
dtype: category 
Categories (5, datetime64[ns, US/Eastern]): [2011-01-01 09:00:00-05:00 &lt; 2011-01-01 10:00:00-05:00 &lt; 
                                             2011-01-01 11:00:00-05:00 &lt; 2011-01-01 12:00:00-05:00 &lt; 
                                             2011-01-01 13:00:00-05:00]&quot;&quot;&quot;  </span><span class="s3"># noqa:E501</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

    <span class="s0">def </span><span class="s1">test_categorical_series_repr_period(self):</span>
        <span class="s1">idx = period_range(</span><span class="s2">&quot;2011-01-01 09:00&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;H&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0    2011-01-01 09:00 
1    2011-01-01 10:00 
2    2011-01-01 11:00 
3    2011-01-01 12:00 
4    2011-01-01 13:00 
dtype: category 
Categories (5, period[H]): [2011-01-01 09:00, 2011-01-01 10:00, 2011-01-01 11:00, 2011-01-01 12:00, 
                            2011-01-01 13:00]&quot;&quot;&quot;  </span><span class="s3"># noqa:E501</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

        <span class="s1">idx = period_range(</span><span class="s2">&quot;2011-01&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;M&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0    2011-01 
1    2011-02 
2    2011-03 
3    2011-04 
4    2011-05 
dtype: category 
Categories (5, period[M]): [2011-01, 2011-02, 2011-03, 2011-04, 2011-05]&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

    <span class="s0">def </span><span class="s1">test_categorical_series_repr_period_ordered(self):</span>
        <span class="s1">idx = period_range(</span><span class="s2">&quot;2011-01-01 09:00&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;H&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0    2011-01-01 09:00 
1    2011-01-01 10:00 
2    2011-01-01 11:00 
3    2011-01-01 12:00 
4    2011-01-01 13:00 
dtype: category 
Categories (5, period[H]): [2011-01-01 09:00 &lt; 2011-01-01 10:00 &lt; 2011-01-01 11:00 &lt; 2011-01-01 12:00 &lt; 
                            2011-01-01 13:00]&quot;&quot;&quot;  </span><span class="s3"># noqa:E501</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

        <span class="s1">idx = period_range(</span><span class="s2">&quot;2011-01&quot;</span><span class="s0">, </span><span class="s1">freq=</span><span class="s2">&quot;M&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0    2011-01 
1    2011-02 
2    2011-03 
3    2011-04 
4    2011-05 
dtype: category 
Categories (5, period[M]): [2011-01 &lt; 2011-02 &lt; 2011-03 &lt; 2011-04 &lt; 2011-05]&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

    <span class="s0">def </span><span class="s1">test_categorical_series_repr_timedelta(self):</span>
        <span class="s1">idx = timedelta_range(</span><span class="s2">&quot;1 days&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0   1 days 
1   2 days 
2   3 days 
3   4 days 
4   5 days 
dtype: category 
Categories (5, timedelta64[ns]): [1 days, 2 days, 3 days, 4 days, 5 days]&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

        <span class="s1">idx = timedelta_range(</span><span class="s2">&quot;1 hours&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">10</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0   0 days 01:00:00 
1   1 days 01:00:00 
2   2 days 01:00:00 
3   3 days 01:00:00 
4   4 days 01:00:00 
5   5 days 01:00:00 
6   6 days 01:00:00 
7   7 days 01:00:00 
8   8 days 01:00:00 
9   9 days 01:00:00 
dtype: category 
Categories (10, timedelta64[ns]): [0 days 01:00:00, 1 days 01:00:00, 2 days 01:00:00, 
                                   3 days 01:00:00, ..., 6 days 01:00:00, 7 days 01:00:00, 
                                   8 days 01:00:00, 9 days 01:00:00]&quot;&quot;&quot;  </span><span class="s3"># noqa:E501</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

    <span class="s0">def </span><span class="s1">test_categorical_series_repr_timedelta_ordered(self):</span>
        <span class="s1">idx = timedelta_range(</span><span class="s2">&quot;1 days&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">5</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0   1 days 
1   2 days 
2   3 days 
3   4 days 
4   5 days 
dtype: category 
Categories (5, timedelta64[ns]): [1 days &lt; 2 days &lt; 3 days &lt; 4 days &lt; 5 days]&quot;&quot;&quot;</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>

        <span class="s1">idx = timedelta_range(</span><span class="s2">&quot;1 hours&quot;</span><span class="s0">, </span><span class="s1">periods=</span><span class="s4">10</span><span class="s1">)</span>
        <span class="s1">s = Series(Categorical(idx</span><span class="s0">, </span><span class="s1">ordered=</span><span class="s0">True</span><span class="s1">))</span>
        <span class="s1">exp = </span><span class="s2">&quot;&quot;&quot;0   0 days 01:00:00 
1   1 days 01:00:00 
2   2 days 01:00:00 
3   3 days 01:00:00 
4   4 days 01:00:00 
5   5 days 01:00:00 
6   6 days 01:00:00 
7   7 days 01:00:00 
8   8 days 01:00:00 
9   9 days 01:00:00 
dtype: category 
Categories (10, timedelta64[ns]): [0 days 01:00:00 &lt; 1 days 01:00:00 &lt; 2 days 01:00:00 &lt; 
                                   3 days 01:00:00 ... 6 days 01:00:00 &lt; 7 days 01:00:00 &lt; 
                                   8 days 01:00:00 &lt; 9 days 01:00:00]&quot;&quot;&quot;  </span><span class="s3"># noqa:E501</span>

        <span class="s0">assert </span><span class="s1">repr(s) == exp</span>
</pre>
</body>
</html>