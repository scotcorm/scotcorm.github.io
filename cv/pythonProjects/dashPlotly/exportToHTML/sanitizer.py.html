<html>
<head>
<title>sanitizer.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #629755; font-style: italic;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #808080;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
sanitizer.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot;Deprecated from html5lib 1.1. 
 
See `here &lt;https://github.com/html5lib/html5lib-python/issues/443&gt;`_ for 
information about its deprecation; `Bleach &lt;https://github.com/mozilla/bleach&gt;`_ 
is recommended as a replacement. Please let us know in the aforementioned issue 
if Bleach is unsuitable for your needs. 
 
&quot;&quot;&quot;</span>
<span class="s2">from </span><span class="s1">__future__ </span><span class="s2">import </span><span class="s1">absolute_import</span><span class="s2">, </span><span class="s1">division</span><span class="s2">, </span><span class="s1">unicode_literals</span>

<span class="s2">import </span><span class="s1">re</span>
<span class="s2">import </span><span class="s1">warnings</span>
<span class="s2">from </span><span class="s1">xml.sax.saxutils </span><span class="s2">import </span><span class="s1">escape</span><span class="s2">, </span><span class="s1">unescape</span>

<span class="s2">from </span><span class="s1">pip._vendor.six.moves </span><span class="s2">import </span><span class="s1">urllib_parse </span><span class="s2">as </span><span class="s1">urlparse</span>

<span class="s2">from </span><span class="s1">. </span><span class="s2">import </span><span class="s1">base</span>
<span class="s2">from </span><span class="s1">..constants </span><span class="s2">import </span><span class="s1">namespaces</span><span class="s2">, </span><span class="s1">prefixes</span>

<span class="s1">__all__ = [</span><span class="s3">&quot;Filter&quot;</span><span class="s1">]</span>


<span class="s1">_deprecation_msg = (</span>
    <span class="s3">&quot;html5lib's sanitizer is deprecated; see &quot; </span><span class="s1">+</span>
    <span class="s3">&quot;https://github.com/html5lib/html5lib-python/issues/443 and please let &quot; </span><span class="s1">+</span>
    <span class="s3">&quot;us know if Bleach is unsuitable for your needs&quot;</span>
<span class="s1">)</span>

<span class="s1">warnings.warn(_deprecation_msg</span><span class="s2">, </span><span class="s1">DeprecationWarning)</span>

<span class="s1">allowed_elements = frozenset((</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'a'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'abbr'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'acronym'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'address'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'area'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'article'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'aside'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'audio'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'b'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'big'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'blockquote'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'br'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'button'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'canvas'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'caption'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'center'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'cite'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'code'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'col'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'colgroup'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'command'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'datagrid'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'datalist'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'dd'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'del'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'details'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'dfn'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'dialog'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'dir'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'div'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'dl'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'dt'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'em'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'event-source'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'fieldset'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'figcaption'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'figure'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'footer'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'font'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'form'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'header'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'h1'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'h2'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'h3'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'h4'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'h5'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'h6'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'hr'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'i'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'img'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'input'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'ins'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'keygen'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'kbd'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'label'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'legend'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'li'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'m'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'map'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'menu'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'meter'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'multicol'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'nav'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'nextid'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'ol'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'output'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'optgroup'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'option'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'p'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'pre'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'progress'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'q'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'s'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'samp'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'section'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'select'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'small'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'sound'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'source'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'spacer'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'span'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'strike'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'strong'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'sub'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'sup'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'table'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'tbody'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'td'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'textarea'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'time'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'tfoot'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'th'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'thead'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'tr'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'tt'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'u'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'ul'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'var'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'html'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'video'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'maction'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'math'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'merror'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mfrac'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mi'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mmultiscripts'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mn'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mo'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mover'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mpadded'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mphantom'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mprescripts'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mroot'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mrow'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mspace'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'msqrt'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mstyle'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'msub'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'msubsup'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'msup'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mtable'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mtd'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mtext'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mtr'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'munder'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'munderover'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'mathml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'none'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'a'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'animate'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'animateColor'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'animateMotion'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'animateTransform'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'clipPath'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'circle'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'defs'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'desc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'ellipse'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'font-face'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'font-face-name'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'font-face-src'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'g'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'glyph'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'hkern'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'linearGradient'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'line'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'marker'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'metadata'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'missing-glyph'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'mpath'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'path'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'polygon'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'polyline'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'radialGradient'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'rect'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'set'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'stop'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'svg'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'switch'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'text'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'title'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'tspan'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'svg'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'use'</span><span class="s1">)</span><span class="s2">,</span>
<span class="s1">))</span>

<span class="s1">allowed_attributes = frozenset((</span>
    <span class="s4"># HTML attributes</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'abbr'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'accept'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'accept-charset'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'accesskey'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'action'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'align'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'alt'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'autocomplete'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'autofocus'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'axis'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'background'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'balance'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'bgcolor'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'bgproperties'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'border'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'bordercolor'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'bordercolordark'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'bordercolorlight'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'bottompadding'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cellpadding'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cellspacing'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'ch'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'challenge'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'char'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'charoff'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'choff'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'charset'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'checked'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cite'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'class'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'clear'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'color'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cols'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'colspan'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'compact'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'contenteditable'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'controls'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'coords'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'datafld'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'datapagesize'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'datasrc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'datetime'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'default'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'delay'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'dir'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'disabled'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'draggable'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'dynsrc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'enctype'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'end'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'face'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'for'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'form'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'frame'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'galleryimg'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'gutter'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'headers'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'height'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'hidefocus'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'hidden'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'high'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'href'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'hreflang'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'hspace'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'icon'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'id'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'inputmode'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'ismap'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'keytype'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'label'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'leftspacing'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'lang'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'list'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'longdesc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'loop'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'loopcount'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'loopend'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'loopstart'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'low'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'lowsrc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'max'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'maxlength'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'media'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'method'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'min'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'multiple'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'name'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'nohref'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'noshade'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'nowrap'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'open'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'optimum'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'pattern'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'ping'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'point-size'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'poster'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'pqg'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'preload'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'prompt'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'radiogroup'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'readonly'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rel'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'repeat-max'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'repeat-min'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'replace'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'required'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rev'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rightspacing'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rows'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rowspan'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rules'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'scope'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'selected'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'shape'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'size'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'span'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'src'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'start'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'step'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'style'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'summary'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'suppress'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'tabindex'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'target'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'template'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'title'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'toppadding'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'type'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'unselectable'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'usemap'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'urn'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'valign'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'value'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'variable'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'volume'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'vspace'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'vrml'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'width'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'wrap'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'lang'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s4"># MathML attributes</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'actiontype'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'align'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'columnalign'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'columnalign'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'columnalign'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'columnlines'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'columnspacing'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'columnspan'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'depth'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'display'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'displaystyle'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'equalcolumns'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'equalrows'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fence'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fontstyle'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fontweight'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'frame'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'height'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'linethickness'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'lspace'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'mathbackground'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'mathcolor'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'mathvariant'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'mathvariant'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'maxsize'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'minsize'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'other'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rowalign'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rowalign'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rowalign'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rowlines'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rowspacing'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rowspan'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rspace'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'scriptlevel'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'selection'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'separator'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stretchy'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'width'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'width'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'href'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'show'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'type'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s4"># SVG attributes</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'accent-height'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'accumulate'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'additive'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'alphabetic'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'arabic-form'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'ascent'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'attributeName'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'attributeType'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'baseProfile'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'bbox'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'begin'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'by'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'calcMode'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cap-height'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'class'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'clip-path'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'color'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'color-rendering'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'content'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cx'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cy'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'d'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'dx'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'dy'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'descent'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'display'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'dur'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'end'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fill'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fill-opacity'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fill-rule'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'font-family'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'font-size'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'font-stretch'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'font-style'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'font-variant'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'font-weight'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'from'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fx'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fy'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'g1'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'g2'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'glyph-name'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'gradientUnits'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'hanging'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'height'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'horiz-adv-x'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'horiz-origin-x'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'id'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'ideographic'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'k'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'keyPoints'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'keySplines'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'keyTimes'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'lang'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'marker-end'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'marker-mid'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'marker-start'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'markerHeight'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'markerUnits'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'markerWidth'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'mathematical'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'max'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'min'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'name'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'offset'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'opacity'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'orient'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'origin'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'overline-position'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'overline-thickness'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'panose-1'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'path'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'pathLength'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'points'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'preserveAspectRatio'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'r'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'refX'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'refY'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'repeatCount'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'repeatDur'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'requiredExtensions'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'requiredFeatures'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'restart'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rotate'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'rx'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'ry'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'slope'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stemh'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stemv'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stop-color'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stop-opacity'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'strikethrough-position'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'strikethrough-thickness'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke-dasharray'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke-dashoffset'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke-linecap'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke-linejoin'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke-miterlimit'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke-opacity'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke-width'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'systemLanguage'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'target'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'text-anchor'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'to'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'transform'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'type'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'u1'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'u2'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'underline-position'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'underline-thickness'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'unicode'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'unicode-range'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'units-per-em'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'values'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'version'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'viewBox'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'visibility'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'width'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'widths'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'x'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'x-height'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'x1'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'x2'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'actuate'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'arcrole'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'href'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'role'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'show'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'title'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'type'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'base'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'lang'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'space'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'y'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'y1'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'y2'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'zoomAndPan'</span><span class="s1">)</span><span class="s2">,</span>
<span class="s1">))</span>

<span class="s1">attr_val_is_uri = frozenset((</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'href'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'src'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cite'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'action'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'longdesc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'poster'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'background'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'datasrc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'dynsrc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'lowsrc'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'ping'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'href'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(namespaces[</span><span class="s3">'xml'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'base'</span><span class="s1">)</span><span class="s2">,</span>
<span class="s1">))</span>

<span class="s1">svg_attr_val_allows_ref = frozenset((</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'clip-path'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'color-profile'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cursor'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'fill'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'filter'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'marker'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'marker-start'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'marker-mid'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'marker-end'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'mask'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'stroke'</span><span class="s1">)</span><span class="s2">,</span>
<span class="s1">))</span>

<span class="s1">svg_allow_local_href = frozenset((</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'altGlyph'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'animate'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'animateColor'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'animateMotion'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'animateTransform'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'cursor'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'feImage'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'filter'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'linearGradient'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'pattern'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'radialGradient'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'textpath'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'tref'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'set'</span><span class="s1">)</span><span class="s2">,</span>
    <span class="s1">(</span><span class="s2">None, </span><span class="s3">'use'</span><span class="s1">)</span>
<span class="s1">))</span>

<span class="s1">allowed_css_properties = frozenset((</span>
    <span class="s3">'azimuth'</span><span class="s2">,</span>
    <span class="s3">'background-color'</span><span class="s2">,</span>
    <span class="s3">'border-bottom-color'</span><span class="s2">,</span>
    <span class="s3">'border-collapse'</span><span class="s2">,</span>
    <span class="s3">'border-color'</span><span class="s2">,</span>
    <span class="s3">'border-left-color'</span><span class="s2">,</span>
    <span class="s3">'border-right-color'</span><span class="s2">,</span>
    <span class="s3">'border-top-color'</span><span class="s2">,</span>
    <span class="s3">'clear'</span><span class="s2">,</span>
    <span class="s3">'color'</span><span class="s2">,</span>
    <span class="s3">'cursor'</span><span class="s2">,</span>
    <span class="s3">'direction'</span><span class="s2">,</span>
    <span class="s3">'display'</span><span class="s2">,</span>
    <span class="s3">'elevation'</span><span class="s2">,</span>
    <span class="s3">'float'</span><span class="s2">,</span>
    <span class="s3">'font'</span><span class="s2">,</span>
    <span class="s3">'font-family'</span><span class="s2">,</span>
    <span class="s3">'font-size'</span><span class="s2">,</span>
    <span class="s3">'font-style'</span><span class="s2">,</span>
    <span class="s3">'font-variant'</span><span class="s2">,</span>
    <span class="s3">'font-weight'</span><span class="s2">,</span>
    <span class="s3">'height'</span><span class="s2">,</span>
    <span class="s3">'letter-spacing'</span><span class="s2">,</span>
    <span class="s3">'line-height'</span><span class="s2">,</span>
    <span class="s3">'overflow'</span><span class="s2">,</span>
    <span class="s3">'pause'</span><span class="s2">,</span>
    <span class="s3">'pause-after'</span><span class="s2">,</span>
    <span class="s3">'pause-before'</span><span class="s2">,</span>
    <span class="s3">'pitch'</span><span class="s2">,</span>
    <span class="s3">'pitch-range'</span><span class="s2">,</span>
    <span class="s3">'richness'</span><span class="s2">,</span>
    <span class="s3">'speak'</span><span class="s2">,</span>
    <span class="s3">'speak-header'</span><span class="s2">,</span>
    <span class="s3">'speak-numeral'</span><span class="s2">,</span>
    <span class="s3">'speak-punctuation'</span><span class="s2">,</span>
    <span class="s3">'speech-rate'</span><span class="s2">,</span>
    <span class="s3">'stress'</span><span class="s2">,</span>
    <span class="s3">'text-align'</span><span class="s2">,</span>
    <span class="s3">'text-decoration'</span><span class="s2">,</span>
    <span class="s3">'text-indent'</span><span class="s2">,</span>
    <span class="s3">'unicode-bidi'</span><span class="s2">,</span>
    <span class="s3">'vertical-align'</span><span class="s2">,</span>
    <span class="s3">'voice-family'</span><span class="s2">,</span>
    <span class="s3">'volume'</span><span class="s2">,</span>
    <span class="s3">'white-space'</span><span class="s2">,</span>
    <span class="s3">'width'</span><span class="s2">,</span>
<span class="s1">))</span>

<span class="s1">allowed_css_keywords = frozenset((</span>
    <span class="s3">'auto'</span><span class="s2">,</span>
    <span class="s3">'aqua'</span><span class="s2">,</span>
    <span class="s3">'black'</span><span class="s2">,</span>
    <span class="s3">'block'</span><span class="s2">,</span>
    <span class="s3">'blue'</span><span class="s2">,</span>
    <span class="s3">'bold'</span><span class="s2">,</span>
    <span class="s3">'both'</span><span class="s2">,</span>
    <span class="s3">'bottom'</span><span class="s2">,</span>
    <span class="s3">'brown'</span><span class="s2">,</span>
    <span class="s3">'center'</span><span class="s2">,</span>
    <span class="s3">'collapse'</span><span class="s2">,</span>
    <span class="s3">'dashed'</span><span class="s2">,</span>
    <span class="s3">'dotted'</span><span class="s2">,</span>
    <span class="s3">'fuchsia'</span><span class="s2">,</span>
    <span class="s3">'gray'</span><span class="s2">,</span>
    <span class="s3">'green'</span><span class="s2">,</span>
    <span class="s3">'!important'</span><span class="s2">,</span>
    <span class="s3">'italic'</span><span class="s2">,</span>
    <span class="s3">'left'</span><span class="s2">,</span>
    <span class="s3">'lime'</span><span class="s2">,</span>
    <span class="s3">'maroon'</span><span class="s2">,</span>
    <span class="s3">'medium'</span><span class="s2">,</span>
    <span class="s3">'none'</span><span class="s2">,</span>
    <span class="s3">'navy'</span><span class="s2">,</span>
    <span class="s3">'normal'</span><span class="s2">,</span>
    <span class="s3">'nowrap'</span><span class="s2">,</span>
    <span class="s3">'olive'</span><span class="s2">,</span>
    <span class="s3">'pointer'</span><span class="s2">,</span>
    <span class="s3">'purple'</span><span class="s2">,</span>
    <span class="s3">'red'</span><span class="s2">,</span>
    <span class="s3">'right'</span><span class="s2">,</span>
    <span class="s3">'solid'</span><span class="s2">,</span>
    <span class="s3">'silver'</span><span class="s2">,</span>
    <span class="s3">'teal'</span><span class="s2">,</span>
    <span class="s3">'top'</span><span class="s2">,</span>
    <span class="s3">'transparent'</span><span class="s2">,</span>
    <span class="s3">'underline'</span><span class="s2">,</span>
    <span class="s3">'white'</span><span class="s2">,</span>
    <span class="s3">'yellow'</span><span class="s2">,</span>
<span class="s1">))</span>

<span class="s1">allowed_svg_properties = frozenset((</span>
    <span class="s3">'fill'</span><span class="s2">,</span>
    <span class="s3">'fill-opacity'</span><span class="s2">,</span>
    <span class="s3">'fill-rule'</span><span class="s2">,</span>
    <span class="s3">'stroke'</span><span class="s2">,</span>
    <span class="s3">'stroke-width'</span><span class="s2">,</span>
    <span class="s3">'stroke-linecap'</span><span class="s2">,</span>
    <span class="s3">'stroke-linejoin'</span><span class="s2">,</span>
    <span class="s3">'stroke-opacity'</span><span class="s2">,</span>
<span class="s1">))</span>

<span class="s1">allowed_protocols = frozenset((</span>
    <span class="s3">'ed2k'</span><span class="s2">,</span>
    <span class="s3">'ftp'</span><span class="s2">,</span>
    <span class="s3">'http'</span><span class="s2">,</span>
    <span class="s3">'https'</span><span class="s2">,</span>
    <span class="s3">'irc'</span><span class="s2">,</span>
    <span class="s3">'mailto'</span><span class="s2">,</span>
    <span class="s3">'news'</span><span class="s2">,</span>
    <span class="s3">'gopher'</span><span class="s2">,</span>
    <span class="s3">'nntp'</span><span class="s2">,</span>
    <span class="s3">'telnet'</span><span class="s2">,</span>
    <span class="s3">'webcal'</span><span class="s2">,</span>
    <span class="s3">'xmpp'</span><span class="s2">,</span>
    <span class="s3">'callto'</span><span class="s2">,</span>
    <span class="s3">'feed'</span><span class="s2">,</span>
    <span class="s3">'urn'</span><span class="s2">,</span>
    <span class="s3">'aim'</span><span class="s2">,</span>
    <span class="s3">'rsync'</span><span class="s2">,</span>
    <span class="s3">'tag'</span><span class="s2">,</span>
    <span class="s3">'ssh'</span><span class="s2">,</span>
    <span class="s3">'sftp'</span><span class="s2">,</span>
    <span class="s3">'rtsp'</span><span class="s2">,</span>
    <span class="s3">'afs'</span><span class="s2">,</span>
    <span class="s3">'data'</span><span class="s2">,</span>
<span class="s1">))</span>

<span class="s1">allowed_content_types = frozenset((</span>
    <span class="s3">'image/png'</span><span class="s2">,</span>
    <span class="s3">'image/jpeg'</span><span class="s2">,</span>
    <span class="s3">'image/gif'</span><span class="s2">,</span>
    <span class="s3">'image/webp'</span><span class="s2">,</span>
    <span class="s3">'image/bmp'</span><span class="s2">,</span>
    <span class="s3">'text/plain'</span><span class="s2">,</span>
<span class="s1">))</span>


<span class="s1">data_content_type = re.compile(</span><span class="s3">r''' 
                                ^ 
                                # Match a content type &lt;application&gt;/&lt;type&gt; 
                                (?P&lt;content_type&gt;[-a-zA-Z0-9.]+/[-a-zA-Z0-9.]+) 
                                # Match any character set and encoding 
                                (?:(?:;charset=(?:[-a-zA-Z0-9]+)(?:;(?:base64))?) 
                                  |(?:;(?:base64))?(?:;charset=(?:[-a-zA-Z0-9]+))?) 
                                # Assume the rest is data 
                                ,.* 
                                $ 
                                '''</span><span class="s2">,</span>
                               <span class="s1">re.VERBOSE)</span>


<span class="s2">class </span><span class="s1">Filter(base.Filter):</span>
    <span class="s0">&quot;&quot;&quot;Sanitizes token stream of XHTML+MathML+SVG and of inline style attributes&quot;&quot;&quot;</span>
    <span class="s2">def </span><span class="s1">__init__(self</span><span class="s2">,</span>
                 <span class="s1">source</span><span class="s2">,</span>
                 <span class="s1">allowed_elements=allowed_elements</span><span class="s2">,</span>
                 <span class="s1">allowed_attributes=allowed_attributes</span><span class="s2">,</span>
                 <span class="s1">allowed_css_properties=allowed_css_properties</span><span class="s2">,</span>
                 <span class="s1">allowed_css_keywords=allowed_css_keywords</span><span class="s2">,</span>
                 <span class="s1">allowed_svg_properties=allowed_svg_properties</span><span class="s2">,</span>
                 <span class="s1">allowed_protocols=allowed_protocols</span><span class="s2">,</span>
                 <span class="s1">allowed_content_types=allowed_content_types</span><span class="s2">,</span>
                 <span class="s1">attr_val_is_uri=attr_val_is_uri</span><span class="s2">,</span>
                 <span class="s1">svg_attr_val_allows_ref=svg_attr_val_allows_ref</span><span class="s2">,</span>
                 <span class="s1">svg_allow_local_href=svg_allow_local_href):</span>
        <span class="s0">&quot;&quot;&quot;Creates a Filter 
 
        :arg allowed_elements: set of elements to allow--everything else will 
            be escaped 
 
        :arg allowed_attributes: set of attributes to allow in 
            elements--everything else will be stripped 
 
        :arg allowed_css_properties: set of CSS properties to allow--everything 
            else will be stripped 
 
        :arg allowed_css_keywords: set of CSS keywords to allow--everything 
            else will be stripped 
 
        :arg allowed_svg_properties: set of SVG properties to allow--everything 
            else will be removed 
 
        :arg allowed_protocols: set of allowed protocols for URIs 
 
        :arg allowed_content_types: set of allowed content types for ``data`` URIs. 
 
        :arg attr_val_is_uri: set of attributes that have URI values--values 
            that have a scheme not listed in ``allowed_protocols`` are removed 
 
        :arg svg_attr_val_allows_ref: set of SVG attributes that can have 
            references 
 
        :arg svg_allow_local_href: set of SVG elements that can have local 
            hrefs--these are removed 
 
        &quot;&quot;&quot;</span>
        <span class="s1">super(Filter</span><span class="s2">, </span><span class="s1">self).__init__(source)</span>

        <span class="s1">warnings.warn(_deprecation_msg</span><span class="s2">, </span><span class="s1">DeprecationWarning)</span>

        <span class="s1">self.allowed_elements = allowed_elements</span>
        <span class="s1">self.allowed_attributes = allowed_attributes</span>
        <span class="s1">self.allowed_css_properties = allowed_css_properties</span>
        <span class="s1">self.allowed_css_keywords = allowed_css_keywords</span>
        <span class="s1">self.allowed_svg_properties = allowed_svg_properties</span>
        <span class="s1">self.allowed_protocols = allowed_protocols</span>
        <span class="s1">self.allowed_content_types = allowed_content_types</span>
        <span class="s1">self.attr_val_is_uri = attr_val_is_uri</span>
        <span class="s1">self.svg_attr_val_allows_ref = svg_attr_val_allows_ref</span>
        <span class="s1">self.svg_allow_local_href = svg_allow_local_href</span>

    <span class="s2">def </span><span class="s1">__iter__(self):</span>
        <span class="s2">for </span><span class="s1">token </span><span class="s2">in </span><span class="s1">base.Filter.__iter__(self):</span>
            <span class="s1">token = self.sanitize_token(token)</span>
            <span class="s2">if </span><span class="s1">token:</span>
                <span class="s2">yield </span><span class="s1">token</span>

    <span class="s4"># Sanitize the +html+, escaping all elements not in ALLOWED_ELEMENTS, and</span>
    <span class="s4"># stripping out all attributes not in ALLOWED_ATTRIBUTES. Style attributes</span>
    <span class="s4"># are parsed, and a restricted set, specified by ALLOWED_CSS_PROPERTIES and</span>
    <span class="s4"># ALLOWED_CSS_KEYWORDS, are allowed through. attributes in ATTR_VAL_IS_URI</span>
    <span class="s4"># are scanned, and only URI schemes specified in ALLOWED_PROTOCOLS are</span>
    <span class="s4"># allowed.</span>
    <span class="s4">#</span>
    <span class="s4">#   sanitize_html('&lt;script&gt; do_nasty_stuff() &lt;/script&gt;')</span>
    <span class="s4">#    =&gt; &amp;lt;script&gt; do_nasty_stuff() &amp;lt;/script&gt;</span>
    <span class="s4">#   sanitize_html('&lt;a href=&quot;javascript: sucker();&quot;&gt;Click here for $100&lt;/a&gt;')</span>
    <span class="s4">#    =&gt; &lt;a&gt;Click here for $100&lt;/a&gt;</span>
    <span class="s2">def </span><span class="s1">sanitize_token(self</span><span class="s2">, </span><span class="s1">token):</span>

        <span class="s4"># accommodate filters which use token_type differently</span>
        <span class="s1">token_type = token[</span><span class="s3">&quot;type&quot;</span><span class="s1">]</span>
        <span class="s2">if </span><span class="s1">token_type </span><span class="s2">in </span><span class="s1">(</span><span class="s3">&quot;StartTag&quot;</span><span class="s2">, </span><span class="s3">&quot;EndTag&quot;</span><span class="s2">, </span><span class="s3">&quot;EmptyTag&quot;</span><span class="s1">):</span>
            <span class="s1">name = token[</span><span class="s3">&quot;name&quot;</span><span class="s1">]</span>
            <span class="s1">namespace = token[</span><span class="s3">&quot;namespace&quot;</span><span class="s1">]</span>
            <span class="s2">if </span><span class="s1">((namespace</span><span class="s2">, </span><span class="s1">name) </span><span class="s2">in </span><span class="s1">self.allowed_elements </span><span class="s2">or</span>
                <span class="s1">(namespace </span><span class="s2">is None and</span>
                 <span class="s1">(namespaces[</span><span class="s3">&quot;html&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s1">name) </span><span class="s2">in </span><span class="s1">self.allowed_elements)):</span>
                <span class="s2">return </span><span class="s1">self.allowed_token(token)</span>
            <span class="s2">else</span><span class="s1">:</span>
                <span class="s2">return </span><span class="s1">self.disallowed_token(token)</span>
        <span class="s2">elif </span><span class="s1">token_type == </span><span class="s3">&quot;Comment&quot;</span><span class="s1">:</span>
            <span class="s2">pass</span>
        <span class="s2">else</span><span class="s1">:</span>
            <span class="s2">return </span><span class="s1">token</span>

    <span class="s2">def </span><span class="s1">allowed_token(self</span><span class="s2">, </span><span class="s1">token):</span>
        <span class="s2">if </span><span class="s3">&quot;data&quot; </span><span class="s2">in </span><span class="s1">token:</span>
            <span class="s1">attrs = token[</span><span class="s3">&quot;data&quot;</span><span class="s1">]</span>
            <span class="s1">attr_names = set(attrs.keys())</span>

            <span class="s4"># Remove forbidden attributes</span>
            <span class="s2">for </span><span class="s1">to_remove </span><span class="s2">in </span><span class="s1">(attr_names - self.allowed_attributes):</span>
                <span class="s2">del </span><span class="s1">token[</span><span class="s3">&quot;data&quot;</span><span class="s1">][to_remove]</span>
                <span class="s1">attr_names.remove(to_remove)</span>

            <span class="s4"># Remove attributes with disallowed URL values</span>
            <span class="s2">for </span><span class="s1">attr </span><span class="s2">in </span><span class="s1">(attr_names &amp; self.attr_val_is_uri):</span>
                <span class="s2">assert </span><span class="s1">attr </span><span class="s2">in </span><span class="s1">attrs</span>
                <span class="s4"># I don't have a clue where this regexp comes from or why it matches those</span>
                <span class="s4"># characters, nor why we call unescape. I just know it's always been here.</span>
                <span class="s4"># Should you be worried by this comment in a sanitizer? Yes. On the other hand, all</span>
                <span class="s4"># this will do is remove *more* than it otherwise would.</span>
                <span class="s1">val_unescaped = re.sub(</span><span class="s3">&quot;[`</span><span class="s2">\x00</span><span class="s3">-</span><span class="s2">\x20\x7f</span><span class="s3">-</span><span class="s2">\xa0\\</span><span class="s3">s]+&quot;</span><span class="s2">, </span><span class="s3">''</span><span class="s2">,</span>
                                       <span class="s1">unescape(attrs[attr])).lower()</span>
                <span class="s4"># remove replacement characters from unescaped characters</span>
                <span class="s1">val_unescaped = val_unescaped.replace(</span><span class="s3">&quot;</span><span class="s2">\ufffd</span><span class="s3">&quot;</span><span class="s2">, </span><span class="s3">&quot;&quot;</span><span class="s1">)</span>
                <span class="s2">try</span><span class="s1">:</span>
                    <span class="s1">uri = urlparse.urlparse(val_unescaped)</span>
                <span class="s2">except </span><span class="s1">ValueError:</span>
                    <span class="s1">uri = </span><span class="s2">None</span>
                    <span class="s2">del </span><span class="s1">attrs[attr]</span>
                <span class="s2">if </span><span class="s1">uri </span><span class="s2">and </span><span class="s1">uri.scheme:</span>
                    <span class="s2">if </span><span class="s1">uri.scheme </span><span class="s2">not in </span><span class="s1">self.allowed_protocols:</span>
                        <span class="s2">del </span><span class="s1">attrs[attr]</span>
                    <span class="s2">if </span><span class="s1">uri.scheme == </span><span class="s3">'data'</span><span class="s1">:</span>
                        <span class="s1">m = data_content_type.match(uri.path)</span>
                        <span class="s2">if not </span><span class="s1">m:</span>
                            <span class="s2">del </span><span class="s1">attrs[attr]</span>
                        <span class="s2">elif </span><span class="s1">m.group(</span><span class="s3">'content_type'</span><span class="s1">) </span><span class="s2">not in </span><span class="s1">self.allowed_content_types:</span>
                            <span class="s2">del </span><span class="s1">attrs[attr]</span>

            <span class="s2">for </span><span class="s1">attr </span><span class="s2">in </span><span class="s1">self.svg_attr_val_allows_ref:</span>
                <span class="s2">if </span><span class="s1">attr </span><span class="s2">in </span><span class="s1">attrs:</span>
                    <span class="s1">attrs[attr] = re.sub(</span><span class="s3">r'url\s*\(\s*[^#\s][^)]+?\)'</span><span class="s2">,</span>
                                         <span class="s3">' '</span><span class="s2">,</span>
                                         <span class="s1">unescape(attrs[attr]))</span>
            <span class="s2">if </span><span class="s1">(token[</span><span class="s3">&quot;name&quot;</span><span class="s1">] </span><span class="s2">in </span><span class="s1">self.svg_allow_local_href </span><span class="s2">and</span>
                <span class="s1">(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'href'</span><span class="s1">) </span><span class="s2">in </span><span class="s1">attrs </span><span class="s2">and </span><span class="s1">re.search(</span><span class="s3">r'^\s*[^#\s].*'</span><span class="s2">,</span>
                                                                     <span class="s1">attrs[(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'href'</span><span class="s1">)])):</span>
                <span class="s2">del </span><span class="s1">attrs[(namespaces[</span><span class="s3">'xlink'</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'href'</span><span class="s1">)]</span>
            <span class="s2">if </span><span class="s1">(</span><span class="s2">None, </span><span class="s3">'style'</span><span class="s1">) </span><span class="s2">in </span><span class="s1">attrs:</span>
                <span class="s1">attrs[(</span><span class="s2">None, </span><span class="s3">'style'</span><span class="s1">)] = self.sanitize_css(attrs[(</span><span class="s2">None, </span><span class="s3">'style'</span><span class="s1">)])</span>
            <span class="s1">token[</span><span class="s3">&quot;data&quot;</span><span class="s1">] = attrs</span>
        <span class="s2">return </span><span class="s1">token</span>

    <span class="s2">def </span><span class="s1">disallowed_token(self</span><span class="s2">, </span><span class="s1">token):</span>
        <span class="s1">token_type = token[</span><span class="s3">&quot;type&quot;</span><span class="s1">]</span>
        <span class="s2">if </span><span class="s1">token_type == </span><span class="s3">&quot;EndTag&quot;</span><span class="s1">:</span>
            <span class="s1">token[</span><span class="s3">&quot;data&quot;</span><span class="s1">] = </span><span class="s3">&quot;&lt;/%s&gt;&quot; </span><span class="s1">% token[</span><span class="s3">&quot;name&quot;</span><span class="s1">]</span>
        <span class="s2">elif </span><span class="s1">token[</span><span class="s3">&quot;data&quot;</span><span class="s1">]:</span>
            <span class="s2">assert </span><span class="s1">token_type </span><span class="s2">in </span><span class="s1">(</span><span class="s3">&quot;StartTag&quot;</span><span class="s2">, </span><span class="s3">&quot;EmptyTag&quot;</span><span class="s1">)</span>
            <span class="s1">attrs = []</span>
            <span class="s2">for </span><span class="s1">(ns</span><span class="s2">, </span><span class="s1">name)</span><span class="s2">, </span><span class="s1">v </span><span class="s2">in </span><span class="s1">token[</span><span class="s3">&quot;data&quot;</span><span class="s1">].items():</span>
                <span class="s1">attrs.append(</span><span class="s3">' %s=&quot;%s&quot;' </span><span class="s1">% (name </span><span class="s2">if </span><span class="s1">ns </span><span class="s2">is None else </span><span class="s3">&quot;%s:%s&quot; </span><span class="s1">% (prefixes[ns]</span><span class="s2">, </span><span class="s1">name)</span><span class="s2">, </span><span class="s1">escape(v)))</span>
            <span class="s1">token[</span><span class="s3">&quot;data&quot;</span><span class="s1">] = </span><span class="s3">&quot;&lt;%s%s&gt;&quot; </span><span class="s1">% (token[</span><span class="s3">&quot;name&quot;</span><span class="s1">]</span><span class="s2">, </span><span class="s3">''</span><span class="s1">.join(attrs))</span>
        <span class="s2">else</span><span class="s1">:</span>
            <span class="s1">token[</span><span class="s3">&quot;data&quot;</span><span class="s1">] = </span><span class="s3">&quot;&lt;%s&gt;&quot; </span><span class="s1">% token[</span><span class="s3">&quot;name&quot;</span><span class="s1">]</span>
        <span class="s2">if </span><span class="s1">token.get(</span><span class="s3">&quot;selfClosing&quot;</span><span class="s1">):</span>
            <span class="s1">token[</span><span class="s3">&quot;data&quot;</span><span class="s1">] = token[</span><span class="s3">&quot;data&quot;</span><span class="s1">][:-</span><span class="s5">1</span><span class="s1">] + </span><span class="s3">&quot;/&gt;&quot;</span>

        <span class="s1">token[</span><span class="s3">&quot;type&quot;</span><span class="s1">] = </span><span class="s3">&quot;Characters&quot;</span>

        <span class="s2">del </span><span class="s1">token[</span><span class="s3">&quot;name&quot;</span><span class="s1">]</span>
        <span class="s2">return </span><span class="s1">token</span>

    <span class="s2">def </span><span class="s1">sanitize_css(self</span><span class="s2">, </span><span class="s1">style):</span>
        <span class="s4"># disallow urls</span>
        <span class="s1">style = re.compile(</span><span class="s3">r'url\s*\(\s*[^\s)]+?\s*\)\s*'</span><span class="s1">).sub(</span><span class="s3">' '</span><span class="s2">, </span><span class="s1">style)</span>

        <span class="s4"># gauntlet</span>
        <span class="s2">if not </span><span class="s1">re.match(</span><span class="s3">r&quot;&quot;&quot;^([:,;#%.\sa-zA-Z0-9!]|\w-\w|'[\s\w]+'|&quot;[\s\w]+&quot;|\([\d,\s]+\))*$&quot;&quot;&quot;</span><span class="s2">, </span><span class="s1">style):</span>
            <span class="s2">return </span><span class="s3">''</span>
        <span class="s2">if not </span><span class="s1">re.match(</span><span class="s3">r&quot;^\s*([-\w]+\s*:[^:;]*(;\s*|$))*$&quot;</span><span class="s2">, </span><span class="s1">style):</span>
            <span class="s2">return </span><span class="s3">''</span>

        <span class="s1">clean = []</span>
        <span class="s2">for </span><span class="s1">prop</span><span class="s2">, </span><span class="s1">value </span><span class="s2">in </span><span class="s1">re.findall(</span><span class="s3">r&quot;([-\w]+)\s*:\s*([^:;]*)&quot;</span><span class="s2">, </span><span class="s1">style):</span>
            <span class="s2">if not </span><span class="s1">value:</span>
                <span class="s2">continue</span>
            <span class="s2">if </span><span class="s1">prop.lower() </span><span class="s2">in </span><span class="s1">self.allowed_css_properties:</span>
                <span class="s1">clean.append(prop + </span><span class="s3">': ' </span><span class="s1">+ value + </span><span class="s3">';'</span><span class="s1">)</span>
            <span class="s2">elif </span><span class="s1">prop.split(</span><span class="s3">'-'</span><span class="s1">)[</span><span class="s5">0</span><span class="s1">].lower() </span><span class="s2">in </span><span class="s1">[</span><span class="s3">'background'</span><span class="s2">, </span><span class="s3">'border'</span><span class="s2">, </span><span class="s3">'margin'</span><span class="s2">,</span>
                                                <span class="s3">'padding'</span><span class="s1">]:</span>
                <span class="s2">for </span><span class="s1">keyword </span><span class="s2">in </span><span class="s1">value.split():</span>
                    <span class="s2">if </span><span class="s1">keyword </span><span class="s2">not in </span><span class="s1">self.allowed_css_keywords </span><span class="s2">and </span><span class="s1">\</span>
                            <span class="s2">not </span><span class="s1">re.match(</span><span class="s3">r&quot;^(#[0-9a-fA-F]+|rgb\(\d+%?,\d*%?,?\d*%?\)?|\d{0,2}\.?\d{0,2}(cm|em|ex|in|mm|pc|pt|px|%|,|\))?)$&quot;</span><span class="s2">, </span><span class="s1">keyword):  </span><span class="s4"># noqa</span>
                        <span class="s2">break</span>
                <span class="s2">else</span><span class="s1">:</span>
                    <span class="s1">clean.append(prop + </span><span class="s3">': ' </span><span class="s1">+ value + </span><span class="s3">';'</span><span class="s1">)</span>
            <span class="s2">elif </span><span class="s1">prop.lower() </span><span class="s2">in </span><span class="s1">self.allowed_svg_properties:</span>
                <span class="s1">clean.append(prop + </span><span class="s3">': ' </span><span class="s1">+ value + </span><span class="s3">';'</span><span class="s1">)</span>

        <span class="s2">return </span><span class="s3">' '</span><span class="s1">.join(clean)</span>
</pre>
</body>
</html>